"use strict";(self.webpackChunktodoapp=self.webpackChunktodoapp||[]).push([[179],{2011:(rt,Ce,k)=>{k.d(Ce,{Dh:()=>ce,GT:()=>pe,cc:()=>Te,hO:()=>He,on:()=>B,pX:()=>J,xv:()=>ue});var g=k(5e3),K=k(127),O=k(5813);rt=k.hmd(rt);const oe=["ngOnDestroy"],J=(we,Je,qe,De={})=>new Proxy(we,{get:(_e,ve)=>qe.runOutsideAngular(()=>{var $e;if(we[ve])return(null===($e=null==De?void 0:De.spy)||void 0===$e?void 0:$e.get)&&De.spy.get(ve,we[ve]),we[ve];if(oe.indexOf(ve)>-1)return()=>{};const je=Je.toPromise().then(ee=>{const q=ee&&ee[ve];return"function"==typeof q?q.bind(ee):q&&q.then?q.then(te=>qe.run(()=>te)):qe.run(()=>q)});return new Proxy(()=>{},{get:(ee,q)=>je[q],apply:(ee,q,te)=>je.then(ge=>{var ne;const Me=ge&&ge(...te);return(null===(ne=null==De?void 0:De.spy)||void 0===ne?void 0:ne.apply)&&De.spy.apply(ve,te,Me),Me})})})}),pe=(we,Je)=>{Je.forEach(qe=>{Object.getOwnPropertyNames(qe.prototype||qe).forEach(De=>{Object.defineProperty(we.prototype,De,Object.getOwnPropertyDescriptor(qe.prototype||qe,De))})})};class ie{constructor(Je){return Je}}const ce=new g.OlP("angularfire2.app.options"),ue=new g.OlP("angularfire2.app.name");function B(we,Je,qe){const _e="object"==typeof qe&&qe||{};_e.name=_e.name||"string"==typeof qe&&qe||"[DEFAULT]";const $e=K.Z.apps.filter(je=>je&&je.name===_e.name)[0]||Je.runOutsideAngular(()=>K.Z.initializeApp(we,_e));try{JSON.stringify(we)!==JSON.stringify($e.options)&&j("error",`${$e.name} Firebase App already initialized with different options${rt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new ie($e)}const j=(we,...Je)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[we](...Je)},Q={provide:ie,useFactory:B,deps:[ce,g.R0b,[new g.FiY,ue]]};let He=(()=>{class we{constructor(qe){K.Z.registerVersion("angularfire",O.q4.full,"core"),K.Z.registerVersion("angularfire",O.q4.full,"app-compat"),K.Z.registerVersion("angular",g.q4F.full,qe.toString())}static initializeApp(qe,De){return{ngModule:we,providers:[{provide:ce,useValue:qe},{provide:ue,useValue:De}]}}}return we.\u0275fac=function(qe){return new(qe||we)(g.LFG(g.Lbi))},we.\u0275mod=g.oAB({type:we}),we.\u0275inj=g.cJS({providers:[Q]}),we})();function Te(we,Je,qe,De,_e){const[,ve,$e]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===we)||[];if(ve)return function Re(we,Je){try{return we.toString()===Je.toString()}catch(qe){return we===Je}}(_e,$e)||(he("error",`${Je} was already initialized on the ${qe} Firebase App with different settings.${Pe?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:_e,was:$e})),ve;{const je=De();return globalThis.\u0275AngularfireInstanceCache.push([we,je,_e]),je}}const Pe=!!rt.hot,he=(we,...Je)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[we](...Je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(rt,Ce,k)=>{k.d(Ce,{q4:()=>wl,iC:()=>Cl,HU:()=>pu,vb:()=>Xc,JM:()=>$s});var g=k(5e3),K=k(5867),O=k(5861),oe=k(9681),J=k(2090),pe=k(4859),ie=k(1877);const ce="@firebase/installations",j="w:0.5.7",Q="FIS_v2",we=new J.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Je(D){return D instanceof J.ZR&&D.code.includes("request-failed")}function qe({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function De(D){return{token:D.token,requestStatus:2,expiresIn:te(D.expiresIn),creationTime:Date.now()}}function _e(D,b){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(D,b){const F=(yield b.json()).error;return we.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function $e({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function je(D,{refreshToken:b}){const x=$e(D);return x.append("Authorization",function ge(D){return`${Q} ${D}`}(b)),x}function ee(D){return q.apply(this,arguments)}function q(){return(q=(0,O.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function te(D){return Number(D.replace("s","000"))}function ne(D,b){return Me.apply(this,arguments)}function Me(){return(Me=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:x}){const F=qe(D),z=$e(D),X=b.getImmediate({optional:!0});if(X){const yt=yield X.getHeartbeatsHeader();yt&&z.append("x-firebase-client",yt)}const Se={method:"POST",headers:z,body:JSON.stringify({fid:x,authVersion:Q,appId:D.appId,sdkVersion:j})},Ze=yield ee(()=>fetch(F,Se));if(Ze.ok){const yt=yield Ze.json();return{fid:yt.fid||x,registrationStatus:2,refreshToken:yt.refreshToken,authToken:De(yt.authToken)}}throw yield _e("Create Installation",Ze)})).apply(this,arguments)}function se(D){return new Promise(b=>{setTimeout(b,D)})}const Wt=/^[cdef][\w-]{21}$/;function it(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function dt(D){return function vt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Wt.test(x)?x:""}catch(D){return""}}function sn(D){return`${D.appName}!${D.appId}`}const on=new Map;function wi(D,b){const x=sn(D);Zt(x,b),function Lt(D,b){const x=function ni(){return!er&&"BroadcastChannel"in self&&(er=new BroadcastChannel("[Firebase] FID Change"),er.onmessage=D=>{Zt(D.data.key,D.data.fid)}),er}();x&&x.postMessage({key:D,fid:b}),function ws(){0===on.size&&er&&(er.close(),er=null)}()}(x,b)}function Zt(D,b){const x=on.get(D);if(x)for(const F of x)F(b)}let er=null;const Cr="firebase-installations-store";let Qi=null;function Ji(){return Qi||(Qi=(0,J.X3)("firebase-installations-database",1,(D,b)=>{0===b&&D.createObjectStore(Cr)})),Qi}function st(D,b){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,O.Z)(function*(D,b){const x=sn(D),z=(yield Ji()).transaction(Cr,"readwrite"),X=z.objectStore(Cr),Ae=yield X.get(x);return yield X.put(b,x),yield z.complete,(!Ae||Ae.fid!==b.fid)&&wi(D,b.fid),b})).apply(this,arguments)}function Gn(D){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,O.Z)(function*(D){const b=sn(D),F=(yield Ji()).transaction(Cr,"readwrite");yield F.objectStore(Cr).delete(b),yield F.complete})).apply(this,arguments)}function ri(D,b){return Js.apply(this,arguments)}function Js(){return(Js=(0,O.Z)(function*(D,b){const x=sn(D),z=(yield Ji()).transaction(Cr,"readwrite"),X=z.objectStore(Cr),Ae=yield X.get(x),Se=b(Ae);return void 0===Se?yield X.delete(x):yield X.put(Se,x),yield z.complete,Se&&(!Ae||Ae.fid!==Se.fid)&&wi(D,Se.fid),Se})).apply(this,arguments)}function hn(D){return qn.apply(this,arguments)}function qn(){return(qn=(0,O.Z)(function*(D){let b;const x=yield ri(D.appConfig,F=>{const z=Es(F),X=ca(D,z);return b=X.registrationPromise,X.installationEntry});return""===x.fid?{installationEntry:yield b}:{installationEntry:x,registrationPromise:b}})).apply(this,arguments)}function Es(D){return Pt(D||{fid:it(),registrationStatus:0})}function ca(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(we.create("app-offline"))};const x={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function Vt(D,b){return et.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:mt(D)}:{installationEntry:b}}function et(){return(et=(0,O.Z)(function*(D,b){try{const x=yield ne(D,b);return st(D.appConfig,x)}catch(x){throw Je(x)&&409===x.customData.serverCode?yield Gn(D.appConfig):yield st(D.appConfig,{fid:b.fid,registrationStatus:0}),x}})).apply(this,arguments)}function mt(D){return tr.apply(this,arguments)}function tr(){return(tr=(0,O.Z)(function*(D){let b=yield Fi(D.appConfig);for(;1===b.registrationStatus;)yield se(100),b=yield Fi(D.appConfig);if(0===b.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield hn(D);return F||x}return b})).apply(this,arguments)}function Fi(D){return ri(D,b=>{if(!b)throw we.create("installation-not-found");return Pt(b)})}function Pt(D){return function Xs(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function dr(D,b){return nr.apply(this,arguments)}function nr(){return(nr=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},x){const F=at(D,x),z=je(D,x),X=b.getImmediate({optional:!0});if(X){const yt=yield X.getHeartbeatsHeader();yt&&z.append("x-firebase-client",yt)}const Se={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:j,appId:D.appId}})},Ze=yield ee(()=>fetch(F,Se));if(Ze.ok)return De(yield Ze.json());throw yield _e("Generate Auth Token",Ze)})).apply(this,arguments)}function at(D,{fid:b}){return`${qe(D)}/${b}/authTokens:generate`}function hr(D){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,O.Z)(function*(D,b=!1){let x;const F=yield ri(D.appConfig,X=>{if(!Nt(X))throw we.create("not-registered");const Ae=X.authToken;if(!b&&U(Ae))return X;if(1===Ae.requestStatus)return x=ze(D,b),X;{if(!navigator.onLine)throw we.create("app-offline");const Se=$(X);return x=ut(D,Se),Se}});return x?yield x:F.authToken})).apply(this,arguments)}function ze(D,b){return be.apply(this,arguments)}function be(){return(be=(0,O.Z)(function*(D,b){let x=yield We(D.appConfig);for(;1===x.authToken.requestStatus;)yield se(100),x=yield We(D.appConfig);const F=x.authToken;return 0===F.requestStatus?hr(D,b):F})).apply(this,arguments)}function We(D){return ri(D,b=>{if(!Nt(b))throw we.create("not-registered");return function le(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function ut(D,b){return kt.apply(this,arguments)}function kt(){return(kt=(0,O.Z)(function*(D,b){try{const x=yield dr(D,b),F=Object.assign(Object.assign({},b),{authToken:x});return yield st(D.appConfig,F),x}catch(x){if(!Je(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield st(D.appConfig,F)}else yield Gn(D.appConfig);throw x}})).apply(this,arguments)}function Nt(D){return void 0!==D&&2===D.registrationStatus}function U(D){return 2===D.requestStatus&&!function L(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function $(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function Le(){return(Le=(0,O.Z)(function*(D){const b=D,{installationEntry:x,registrationPromise:F}=yield hn(b);return F?F.catch(console.error):hr(b).catch(console.error),x.fid})).apply(this,arguments)}function Gt(){return(Gt=(0,O.Z)(function*(D,b=!1){const x=D;return yield fr(x),(yield hr(x,b)).token})).apply(this,arguments)}function fr(D){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,O.Z)(function*(D){const{registrationPromise:b}=yield hn(D);b&&(yield b)})).apply(this,arguments)}function Vn(D){return we.create("missing-app-config-values",{valueName:D})}const ha="installations",Oe=D=>{const b=D.getProvider("app").getImmediate(),x=function Xi(D){if(!D||!D.options)throw Vn("App Configuration");if(!D.name)throw Vn("App Name");const b=["projectId","apiKey","appId"];for(const x of b)if(!D.options[x])throw Vn(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:x,heartbeatServiceProvider:(0,oe._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},St=D=>{const b=D.getProvider("app").getImmediate(),x=(0,oe._getProvider)(b,ha).getImmediate();return{getId:()=>function Y(D){return Le.apply(this,arguments)}(x),getToken:z=>function ht(D){return Gt.apply(this,arguments)}(x,z)}};(function un(){(0,oe._registerComponent)(new pe.wA(ha,Oe,"PUBLIC")),(0,oe._registerComponent)(new pe.wA("installations-internal",St,"PRIVATE"))})(),(0,oe.registerVersion)(ce,"0.5.7"),(0,oe.registerVersion)(ce,"0.5.7","esm2017");const rr="@firebase/remote-config",Cn=new J.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class mh{constructor(b,x,F,z){this.client=b,this.storage=x,this.storageCache=F,this.logger=z}isCachedDataFresh(b,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,z=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${z}.`),z}fetch(b){var x=this;return(0,O.Z)(function*(){const[F,z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(z&&x.isCachedDataFresh(b.cacheMaxAgeMillis,F))return z;b.eTag=z&&z.eTag;const X=yield x.client.fetch(b),Ae=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&Ae.push(x.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(Ae),X})()}}function Zu(D=navigator){return D.languages&&D.languages[0]||D.language}class Za{constructor(b,x,F,z,X,Ae){this.firebaseInstallations=b,this.sdkVersion=x,this.namespace=F,this.projectId=z,this.apiKey=X,this.appId=Ae}fetch(b){var x=this;return(0,O.Z)(function*(){const[F,z]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Ae=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Se={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},Ze={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:z,app_id:x.appId,language_code:Zu()},yt={method:"POST",headers:Se,body:JSON.stringify(Ze)},At=fetch(Ae,yt),wt=new Promise((hi,xi)=>{b.signal.addEventListener(()=>{const go=new Error("The operation was aborted.");go.name="AbortError",xi(go)})});let kn;try{yield Promise.race([At,wt]),kn=yield At}catch(hi){let xi="fetch-client-network";throw"AbortError"===hi.name&&(xi="fetch-timeout"),Cn.create(xi,{originalErrorMessage:hi.message})}let En=kn.status;const Yo=kn.headers.get("ETag")||void 0;let po,Sr;if(200===kn.status){let hi;try{hi=yield kn.json()}catch(xi){throw Cn.create("fetch-client-parse",{originalErrorMessage:xi.message})}po=hi.entries,Sr=hi.state}if("INSTANCE_STATE_UNSPECIFIED"===Sr?En=500:"NO_CHANGE"===Sr?En=304:("NO_TEMPLATE"===Sr||"EMPTY_CONFIG"===Sr)&&(po={}),304!==En&&200!==En)throw Cn.create("fetch-status",{httpStatus:En});return{status:En,eTag:Yo,config:po}})()}}class Np{constructor(b,x){this.client=b,this.storage=x}fetch(b){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:x,backoffCount:F}){var z=this;return(0,O.Z)(function*(){yield function Nn(D,b){return new Promise((x,F)=>{const z=Math.max(b-Date.now(),0),X=setTimeout(x,z);D.addEventListener(()=>{clearTimeout(X),F(Cn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,x);try{const X=yield z.client.fetch(b);return yield z.storage.deleteThrottleMetadata(),X}catch(X){if(!function Oc(D){if(!(D instanceof J.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(X))throw X;const Ae={throttleEndTimeMillis:Date.now()+(0,J.$s)(F),backoffCount:F+1};return yield z.storage.setThrottleMetadata(Ae),z.attemptFetch(b,Ae)}})()}}class Ku{constructor(b,x,F,z,X){this.app=b,this._client=x,this._storageCache=F,this._storage=z,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Yu(D,b){const x=D.target.error||void 0;return Cn.create(b,{originalErrorMessage:x&&x.message})}const Ts="app_namespace_store";class yh{constructor(b,x,F,z=function kp(){return new Promise((D,b)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{b(Yu(F,"storage-open"))},x.onsuccess=F=>{D(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Ts,{keyPath:"compositeKey"})}}catch(x){b(Cn.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=b,this.appName=x,this.namespace=F,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((z,X)=>{const Se=F.transaction([Ts],"readonly").objectStore(Ts),Ze=x.createCompositeKey(b);try{const yt=Se.get(Ze);yt.onerror=At=>{X(Yu(At,"storage-get"))},yt.onsuccess=At=>{const wt=At.target.result;z(wt?wt.value:void 0)}}catch(yt){X(Cn.create("storage-get",{originalErrorMessage:yt&&yt.message}))}})})()}set(b,x){var F=this;return(0,O.Z)(function*(){const z=yield F.openDbPromise;return new Promise((X,Ae)=>{const Ze=z.transaction([Ts],"readwrite").objectStore(Ts),yt=F.createCompositeKey(b);try{const At=Ze.put({compositeKey:yt,value:x});At.onerror=wt=>{Ae(Yu(wt,"storage-set"))},At.onsuccess=()=>{X()}}catch(At){Ae(Cn.create("storage-set",{originalErrorMessage:At&&At.message}))}})})()}delete(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((z,X)=>{const Se=F.transaction([Ts],"readwrite").objectStore(Ts),Ze=x.createCompositeKey(b);try{const yt=Se.delete(Ze);yt.onerror=At=>{X(Yu(At,"storage-delete"))},yt.onsuccess=()=>{z()}}catch(yt){X(Cn.create("storage-delete",{originalErrorMessage:yt&&yt.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class kc{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const x=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),z=b.storage.getActiveConfig(),X=yield x;X&&(b.lastFetchStatus=X);const Ae=yield F;Ae&&(b.lastSuccessfulFetchTimestampMillis=Ae);const Se=yield z;Se&&(b.activeConfig=Se)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function no(){return _h.apply(this,arguments)}function _h(){return(_h=(0,O.Z)(function*(){if(!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Fo(){(0,oe._registerComponent)(new pe.wA("remote-config",function D(b,{instanceIdentifier:x}){const F=b.getProvider("app").getImmediate(),z=b.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Cn.create("registration-window");if(!(0,J.hl)())throw Cn.create("indexed-db-unavailable");const{projectId:X,apiKey:Ae,appId:Se}=F.options;if(!X)throw Cn.create("registration-project-id");if(!Ae)throw Cn.create("registration-api-key");if(!Se)throw Cn.create("registration-app-id");const Ze=new yh(Se,F.name,x=x||"firebase"),yt=new kc(Ze),At=new ie.Yd(rr);At.logLevel=ie.in.ERROR;const wt=new Za(z,oe.SDK_VERSION,x,X,Ae,Se),kn=new Np(wt,Ze),En=new mh(kn,Ze,yt,At),Yo=new Ku(F,En,yt,Ze,At);return function Ur(D){const b=(0,J.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Yo),Yo},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(rr,"0.3.6"),(0,oe.registerVersion)(rr,"0.3.6","esm2017")}();const Ju="/firebase-messaging-sw.js",As="/firebase-cloud-messaging-push-scope",jr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ro="google.c.a.c_id",pa="google.c.a.c_l",Pc="google.c.a.ts",Pp="google.c.a.e";var Ss=(()=>{return(D=Ss||(Ss={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Ss;var D})();function oi(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ya(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),z=new Uint8Array(F.length);for(let X=0;X<F.length;++X)z[X]=F.charCodeAt(X);return z}const Qa="fcm_token_details_db",ir="fcm_token_object_Store";function vh(D){return Ja.apply(this,arguments)}function Ja(){return Ja=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(Qa))return null;let b=null;return(yield(0,J.X3)(Qa,5,function(){var F=(0,O.Z)(function*(z,X,Ae,Se){var Ze;if(X<2||!z.objectStoreNames.contains(ir))return;const yt=Se.objectStore(ir),At=yield yt.index("fcmSenderId").get(D);if(yield yt.clear(),At)if(2===X){const wt=At;if(!wt.auth||!wt.p256dh||!wt.endpoint)return;b={token:wt.fcmToken,createTime:null!==(Ze=wt.createTime)&&void 0!==Ze?Ze:Date.now(),subscriptionOptions:{auth:wt.auth,p256dh:wt.p256dh,endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:"string"==typeof wt.vapidKey?wt.vapidKey:oi(wt.vapidKey)}}}else if(3===X){const wt=At;b={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:oi(wt.auth),p256dh:oi(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:oi(wt.vapidKey)}}}else if(4===X){const wt=At;b={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:oi(wt.auth),p256dh:oi(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:oi(wt.vapidKey)}}}});return function(z,X,Ae,Se){return F.apply(this,arguments)}}())).close(),yield(0,J.Lj)(Qa),yield(0,J.Lj)("fcm_vapid_details_db"),yield(0,J.Lj)("undefined"),Fc(b)?b:null}),Ja.apply(this,arguments)}function Fc(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const rs="firebase-messaging-store";let ga=null;function Xu(){return ga||(ga=(0,J.X3)("firebase-messaging-database",1,(D,b)=>{0===b&&D.createObjectStore(rs)})),ga}function dn(D){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,O.Z)(function*(D){const b=so(D),F=yield(yield Xu()).transaction(rs).objectStore(rs).get(b);if(F)return F;{const z=yield vh(D.appConfig.senderId);if(z)return yield xs(D,z),z}})).apply(this,arguments)}function xs(D,b){return nn.apply(this,arguments)}function nn(){return(nn=(0,O.Z)(function*(D,b){const x=so(D),z=(yield Xu()).transaction(rs,"readwrite");return yield z.objectStore(rs).put(b,x),yield z.complete,b})).apply(this,arguments)}function Lc(D){return io.apply(this,arguments)}function io(){return(io=(0,O.Z)(function*(D){const b=so(D),F=(yield Xu()).transaction(rs,"readwrite");yield F.objectStore(rs).delete(b),yield F.complete})).apply(this,arguments)}function so({appConfig:D}){return D.appId}const Tn=new J.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ma(D,b){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,O.Z)(function*(D,b){const x=yield Ns(D),F=lt(b),z={method:"POST",headers:x,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(Hr(D.appConfig),z)).json()}catch(Ae){throw Tn.create("token-subscribe-failed",{errorInfo:Ae})}if(X.error)throw Tn.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw Tn.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function gr(D,b){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,O.Z)(function*(D,b){const x=yield Ns(D),F=lt(b.subscriptionOptions),z={method:"PATCH",headers:x,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(`${Hr(D.appConfig)}/${b.token}`,z)).json()}catch(Ae){throw Tn.create("token-update-failed",{errorInfo:Ae})}if(X.error)throw Tn.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw Tn.create("token-update-no-token");return X.token})).apply(this,arguments)}function is(D,b){return tu.apply(this,arguments)}function tu(){return(tu=(0,O.Z)(function*(D,b){const F={method:"DELETE",headers:yield Ns(D)};try{const X=yield(yield fetch(`${Hr(D.appConfig)}/${b}`,F)).json();if(X.error)throw Tn.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(z){throw Tn.create("token-unsubscribe-failed",{errorInfo:z})}})).apply(this,arguments)}function Hr({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Ns(D){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,O.Z)(function*({appConfig:D,installations:b}){const x=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function lt({p256dh:D,auth:b,endpoint:x,vapidKey:F}){const z={web:{endpoint:x,auth:b,p256dh:D}};return F!==jr&&(z.web.applicationPubKey=F),z}const nu=6048e5;function ya(D){return ru.apply(this,arguments)}function ru(){return(ru=(0,O.Z)(function*(D){const b=yield nl(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:oi(b.getKey("auth")),p256dh:oi(b.getKey("p256dh"))},F=yield dn(D.firebaseDependencies);if(F){if(Uo(F.subscriptionOptions,x))return Date.now()>=F.createTime+nu?el(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield is(D.firebaseDependencies,F.token)}catch(z){console.warn(z)}return Ee(D.firebaseDependencies,x)}return Ee(D.firebaseDependencies,x)})).apply(this,arguments)}function iu(D){return su.apply(this,arguments)}function su(){return(su=(0,O.Z)(function*(D){const b=yield dn(D.firebaseDependencies);b&&(yield is(D.firebaseDependencies,b.token),yield Lc(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function el(D,b){return tl.apply(this,arguments)}function tl(){return(tl=(0,O.Z)(function*(D,b){try{const x=yield gr(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:x,createTime:Date.now()});return yield xs(D.firebaseDependencies,F),x}catch(x){throw yield iu(D),x}})).apply(this,arguments)}function Ee(D,b){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,O.Z)(function*(D,b){const F={token:yield ma(D,b),createTime:Date.now(),subscriptionOptions:b};return yield xs(D,F),F.token})).apply(this,arguments)}function nl(D,b){return fn.apply(this,arguments)}function fn(){return(fn=(0,O.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ya(b)})})).apply(this,arguments)}function Uo(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function Bo(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Gr(D,b){if(!b.notification)return;D.notification={};const x=b.notification.title;x&&(D.notification.title=x);const F=b.notification.body;F&&(D.notification.body=F);const z=b.notification.image;z&&(D.notification.image=z)}(b,D),function rl(D,b){!b.data||(D.data=b.data)}(b,D),function il(D,b){if(!b.fcmOptions)return;D.fcmOptions={};const x=b.fcmOptions.link;x&&(D.fcmOptions.link=x);const F=b.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(b,D),b}function Vc(D){return"object"==typeof D&&!!D&&ro in D}function sl(D,b){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<b.length&&x.push(b.charAt(F));return x.join("")}function Os(D){return Tn.create("missing-app-config-values",{valueName:D})}sl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),sl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class sr{constructor(b,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function ou(D){if(!D||!D.options)throw Os("App Configuration Object");if(!D.name)throw Os("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of b)if(!x[F])throw Os(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:z,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ai(D){return au.apply(this,arguments)}function au(){return(au=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Ju,{scope:As}),D.swRegistration.update().catch(()=>{})}catch(b){throw Tn.create("failed-service-worker-registration",{browserErrorMessage:b.message})}})).apply(this,arguments)}function ks(D,b){return Di.apply(this,arguments)}function Di(){return(Di=(0,O.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield ai(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Tn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function ol(D,b){return uu.apply(this,arguments)}function uu(){return(uu=(0,O.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=jr)})).apply(this,arguments)}function al(){return(al=(0,O.Z)(function*(D,b){if(!navigator)throw Tn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Tn.create("permission-blocked");return yield ol(D,null==b?void 0:b.vapidKey),yield ks(D,null==b?void 0:b.serviceWorkerRegistration),ya(D)})).apply(this,arguments)}function _a(D,b,x){return va.apply(this,arguments)}function va(){return(va=(0,O.Z)(function*(D,b,x){const F=ul(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[ro],message_name:x[pa],message_time:x[Pc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ul(D){switch(D){case Ss.NOTIFICATION_CLICKED:return"notification_open";case Ss.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Uc(){return(Uc=(0,O.Z)(function*(D,b){const x=b.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===Ss.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Bo(x)):D.onMessageHandler.next(Bo(x)));const F=x.data;Vc(F)&&"1"===F[Pp]&&(yield _a(D,x.messageType,F))})).apply(this,arguments)}const cl="@firebase/messaging",Bc=D=>{const b=new sr(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function ll(D,b){return Uc.apply(this,arguments)}(b,x)),b},ao=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function lu(D,b){return al.apply(this,arguments)}(b,F)}};function $c(){return uo.apply(this,arguments)}function uo(){return(uo=(0,O.Z)(function*(){try{yield(0,J.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,J.hl)()&&(0,J.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function jc(){(0,oe._registerComponent)(new pe.wA("messaging",Bc,"PUBLIC")),(0,oe._registerComponent)(new pe.wA("messaging-internal",ao,"PRIVATE")),(0,oe.registerVersion)(cl,"0.9.11"),(0,oe.registerVersion)(cl,"0.9.11","esm2017")}();const hl="analytics",ny="firebase_id",wa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",cu="https://www.googletagmanager.com/gtag/js",Rn=new ie.Yd("@firebase/analytics");function Gc(D){return Promise.all(D.map(b=>b.catch(x=>x)))}function Fp(D,b){const x=document.createElement("script");x.src=`${cu}?l=${D}&id=${b}`,x.async=!0,document.head.appendChild(x)}function jo(D,b,x,F,z,X){return qc.apply(this,arguments)}function qc(){return(qc=(0,O.Z)(function*(D,b,x,F,z,X){const Ae=F[z];try{if(Ae)yield b[Ae];else{const Ze=(yield Gc(x)).find(yt=>yt.measurementId===z);Ze&&(yield b[Ze.appId])}}catch(Se){Rn.error(Se)}D("config",z,X)})).apply(this,arguments)}function pl(D,b,x,F,z){return lo.apply(this,arguments)}function lo(){return(lo=(0,O.Z)(function*(D,b,x,F,z){try{let X=[];if(z&&z.send_to){let Ae=z.send_to;Array.isArray(Ae)||(Ae=[Ae]);const Se=yield Gc(x);for(const Ze of Ae){const yt=Se.find(wt=>wt.measurementId===Ze),At=yt&&b[yt.appId];if(!At){X=[];break}X.push(At)}}0===X.length&&(X=Object.values(b)),yield Promise.all(X),D("event",F,z||{})}catch(X){Rn.error(X)}})).apply(this,arguments)}function Lp(){const D=window.document.getElementsByTagName("script");for(const b of Object.values(D))if(b.src&&b.src.includes(cu))return b;return null}const Sn=new J.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),zr=new class qr{constructor(b={},x=1e3){this.throttleMetadata=b,this.intervalMillis=x}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,x){this.throttleMetadata[b]=x}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function $o(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Wc(D){return ln.apply(this,arguments)}function ln(){return(ln=(0,O.Z)(function*(D){var b;const{appId:x,apiKey:F}=D,z={method:"GET",headers:$o(F)},X=wa.replace("{app-id}",x),Ae=yield fetch(X,z);if(200!==Ae.status&&304!==Ae.status){let Se="";try{const Ze=yield Ae.json();(null===(b=Ze.error)||void 0===b?void 0:b.message)&&(Se=Ze.error.message)}catch(Ze){}throw Sn.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:Se})}return Ae.json()})).apply(this,arguments)}function Eh(D){return bi.apply(this,arguments)}function bi(){return(bi=(0,O.Z)(function*(D,b=zr,x){const{appId:F,apiKey:z,measurementId:X}=D.options;if(!F)throw Sn.create("no-app-id");if(!z){if(X)return{measurementId:X,appId:F};throw Sn.create("no-api-key")}const Ae=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Se=new gl;return setTimeout((0,O.Z)(function*(){Se.abort()}),void 0!==x?x:6e4),du({appId:F,apiKey:z,measurementId:X},Ae,Se,b)})).apply(this,arguments)}function du(D,b,x){return ui.apply(this,arguments)}function ui(){return(ui=(0,O.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:x},F,z=zr){const{appId:X,measurementId:Ae}=D;try{yield xt(F,b)}catch(Se){if(Ae)return Rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ae} provided in the "measurementId" field in the local Firebase config. [${Se.message}]`),{appId:X,measurementId:Ae};throw Se}try{const Se=yield Wc(D);return z.deleteThrottleMetadata(X),Se}catch(Se){if(!Zc(Se)){if(z.deleteThrottleMetadata(X),Ae)return Rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ae} provided in the "measurementId" field in the local Firebase config. [${Se.message}]`),{appId:X,measurementId:Ae};throw Se}const Ze=503===Number(Se.customData.httpStatus)?(0,J.$s)(x,z.intervalMillis,30):(0,J.$s)(x,z.intervalMillis),yt={throttleEndTimeMillis:Date.now()+Ze,backoffCount:x+1};return z.setThrottleMetadata(X,yt),Rn.debug(`Calling attemptFetch again in ${Ze} millis`),du(D,yt,F,z)}})).apply(this,arguments)}function xt(D,b){return new Promise((x,F)=>{const z=Math.max(b-Date.now(),0),X=setTimeout(x,z);D.addEventListener(()=>{clearTimeout(X),F(Sn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function Zc(D){if(!(D instanceof J.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class gl{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}function Kc(){return co.apply(this,arguments)}function co(){return(co=(0,O.Z)(function*(){if(!(0,J.hl)())return Rn.warn(Sn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,J.eu)()}catch(D){return Rn.warn(Sn.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function as(){return(as=(0,O.Z)(function*(D,b,x,F,z,X,Ae){var Se;const Ze=Eh(D);Ze.then(En=>{x[En.measurementId]=En.appId,D.options.measurementId&&En.measurementId!==D.options.measurementId&&Rn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${En.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(En=>Rn.error(En)),b.push(Ze);const yt=Kc().then(En=>{if(En)return F.getId()}),[At,wt]=yield Promise.all([Ze,yt]);Lp()||Fp(X,At.measurementId),z("js",new Date);const kn=null!==(Se=null==Ae?void 0:Ae.config)&&void 0!==Se?Se:{};return kn.origin="firebase",kn.update=!0,null!=wt&&(kn[ny]=wt),z("config",At.measurementId,kn),At.measurementId})).apply(this,arguments)}class Ho{constructor(b){this.app=b}_delete(){return delete li[this.app.options.appId],Promise.resolve()}}let li={},Ls=[];const Ea={};let Vs,Ui,Vi="dataLayer",yl=!1;function Ci(D,b,x){!function Go(){const D=[];if((0,J.ru)()&&D.push("This is a browser extension environment."),(0,J.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,z)=>`(${z+1}) ${F}`).join(" "),x=Sn.create("invalid-analytics-context",{errorInfo:b});Rn.warn(x.message)}}();const F=D.options.appId;if(!F)throw Sn.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Sn.create("no-api-key");Rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=li[F])throw Sn.create("already-exists",{id:F});if(!yl){!function os(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(Vi);const{wrappedGtag:X,gtagCore:Ae}=function wh(D,b,x,F,z){let X=function(...Ae){window[F].push(arguments)};return window[z]&&"function"==typeof window[z]&&(X=window[z]),window[z]=function zc(D,b,x,F){function X(){return(X=(0,O.Z)(function*(Ae,Se,Ze){try{"event"===Ae?yield pl(D,b,x,Se,Ze):"config"===Ae?yield jo(D,b,x,F,Se,Ze):D("set",Se)}catch(yt){Rn.error(yt)}})).apply(this,arguments)}return function z(Ae,Se,Ze){return X.apply(this,arguments)}}(X,D,b,x),{gtagCore:X,wrappedGtag:window[z]}}(li,Ls,Ea,Vi,"gtag");Ui=X,Vs=Ae,yl=!0}return li[F]=function On(D,b,x,F,z,X,Ae){return as.apply(this,arguments)}(D,Ls,Ea,b,Vs,Vi,x),new Ho(D)}function Ia(){return(Ia=(0,O.Z)(function*(D,b,x,F,z){if(z&&z.global)D("event",x,F);else{const X=yield b;D("event",x,Object.assign(Object.assign({},F),{send_to:X}))}})).apply(this,arguments)}function vn(){return Us.apply(this,arguments)}function Us(){return(Us=(0,O.Z)(function*(){if((0,J.ru)()||!(0,J.zI)()||!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(D){return!1}})).apply(this,arguments)}const Bs="@firebase/analytics";!function jp(){(0,oe._registerComponent)(new pe.wA(hl,(b,{options:x})=>Ci(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,oe._registerComponent)(new pe.wA("analytics-internal",function D(b){try{const x=b.getProvider(hl).getImmediate();return{logEvent:(F,z,X)=>function Bp(D,b,x,F){D=(0,J.m9)(D),function qo(D,b,x,F,z){return Ia.apply(this,arguments)}(Ui,li[D.app.options.appId],b,x,F).catch(z=>Rn.error(z))}(x,F,z,X)}}catch(x){throw Sn.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,oe.registerVersion)(Bs,"0.7.7"),(0,oe.registerVersion)(Bs,"0.7.7","esm2017")}();var js=k(4408),hu=k(7565);const _l=new class gn extends hu.v{}(class ls extends js.o{constructor(b,x){super(b,x),this.scheduler=b,this.work=x}schedule(b,x=0){return x>0?super.schedule(b,x):(this.delay=x,this.state=b,this.scheduler.flush(this),this)}execute(b,x){return x>0||this.closed?super.execute(b,x):this._execute(b,x)}requestAsyncId(b,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,x,F):b.flush(this)}});var $p=k(4986),vl=k(8505),_r=k(9468),ci=k(5363);const wl=new g.GfV("7.3.0"),cs="__angularfire_symbol__analyticsIsSupportedValue",Si="__angularfire_symbol__analyticsIsSupported",ji="__angularfire_symbol__remoteConfigIsSupportedValue",Da="__angularfire_symbol__remoteConfigIsSupported",El="__angularfire_symbol__messagingIsSupportedValue",Il="__angularfire_symbol__messagingIsSupported";function $s(D,b,x){if(b){if(1===b.length)return b[0];const X=b.filter(Ae=>Ae.app===x);if(1===X.length)return X[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Si]||(globalThis[Si]=vn().then(D=>globalThis[cs]=D).catch(()=>globalThis[cs]=!1)),globalThis[Il]||(globalThis[Il]=$c().then(D=>globalThis[El]=D).catch(()=>globalThis[El]=!1)),globalThis[Da]||(globalThis[Da]=no().then(D=>globalThis[ji]=D).catch(()=>globalThis[ji]=!1));const Xc=(D,b)=>{const x=b?[b]:(0,K.C6)(),F=[];return x.forEach(z=>{z.container.getProvider(D).instances.forEach(Ae=>{F.includes(Ae)||F.push(Ae)})}),F};function ho(){}class fu{constructor(b,x=_l){this.zone=b,this.delegate=x}now(){return this.delegate.now()}schedule(b,x,F){const z=this.zone;return this.delegate.schedule(function(Ae){z.runGuarded(()=>{b.apply(this,[Ae])})},x,F)}}class $i{constructor(b){this.zone=b,this.task=null}call(b,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ho,{},ho,ho)),x.pipe((0,vl.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let pu=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new fu(Zone.current)),this.insideAngular=x.run(()=>new fu(Zone.current,$p.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Hi(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Cl(D){return Hi(),function fo(D){return function(x){return(x=x.lift(new $i(D.ngZone))).pipe((0,_r.R)(D.outsideAngular),(0,ci.Q)(D.insideAngular))}}(Hi())(D)}},2090:(rt,Ce,k)=>{k.d(Ce,{$s:()=>Xs,BH:()=>Te,G6:()=>ee,L:()=>ue,LL:()=>vt,Lj:()=>kt,Mn:()=>$e,Sg:()=>Re,UG:()=>we,US:()=>ie,X3:()=>ut,ZB:()=>Q,ZR:()=>se,b$:()=>De,d:()=>_e,eu:()=>te,hl:()=>q,jU:()=>Je,m9:()=>at,ne:()=>st,pd:()=>Qi,r3:()=>Zt,ru:()=>qe,tV:()=>B,uI:()=>he,vZ:()=>ws,w1:()=>ve,xO:()=>Pi,xb:()=>er,z$:()=>Pe,zI:()=>ge,zd:()=>Cr});var g=k(5861);const J=function(U){const L=[];let $=0;for(let le=0;le<U.length;le++){let Y=U.charCodeAt(le);Y<128?L[$++]=Y:Y<2048?(L[$++]=Y>>6|192,L[$++]=63&Y|128):55296==(64512&Y)&&le+1<U.length&&56320==(64512&U.charCodeAt(le+1))?(Y=65536+((1023&Y)<<10)+(1023&U.charCodeAt(++le)),L[$++]=Y>>18|240,L[$++]=Y>>12&63|128,L[$++]=Y>>6&63|128,L[$++]=63&Y|128):(L[$++]=Y>>12|224,L[$++]=Y>>6&63|128,L[$++]=63&Y|128)}return L},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,le=[];for(let Y=0;Y<U.length;Y+=3){const Le=U[Y],ht=Y+1<U.length,Gt=ht?U[Y+1]:0,fr=Y+2<U.length,Ut=fr?U[Y+2]:0;let an=(15&Gt)<<2|Ut>>6,zn=63&Ut;fr||(zn=64,ht||(an=64)),le.push($[Le>>2],$[(3&Le)<<4|Gt>>4],$[an],$[zn])}return le.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(J(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let $=0,le=0;for(;$<U.length;){const Y=U[$++];if(Y<128)L[le++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Le=U[$++];L[le++]=String.fromCharCode((31&Y)<<6|63&Le)}else if(Y>239&&Y<365){const fr=((7&Y)<<18|(63&U[$++])<<12|(63&U[$++])<<6|63&U[$++])-65536;L[le++]=String.fromCharCode(55296+(fr>>10)),L[le++]=String.fromCharCode(56320+(1023&fr))}else{const Le=U[$++],ht=U[$++];L[le++]=String.fromCharCode((15&Y)<<12|(63&Le)<<6|63&ht)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const $=L?this.charToByteMapWebSafe_:this.charToByteMap_,le=[];for(let Y=0;Y<U.length;){const Le=$[U.charAt(Y++)],Gt=Y<U.length?$[U.charAt(Y)]:0;++Y;const Ut=Y<U.length?$[U.charAt(Y)]:64;++Y;const Tt=Y<U.length?$[U.charAt(Y)]:64;if(++Y,null==Le||null==Gt||null==Ut||null==Tt)throw Error();le.push(Le<<2|Gt>>4),64!==Ut&&(le.push(Gt<<4&240|Ut>>2),64!==Tt&&le.push(Ut<<6&192|Tt))}return le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},ue=function(U){return function(U){const L=J(U);return ie.encodeByteArray(L,!0)}(U).replace(/\./g,"")},B=function(U){try{return ie.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Q(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const $ in L)!L.hasOwnProperty($)||!He($)||(U[$]=Q(U[$],L[$]));return U}function He(U){return"__proto__"!==U}class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,$)=>{this.resolve=L,this.reject=$})}wrapCallback(L){return($,le)=>{$?this.reject($):this.resolve(le),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L($):L($,le))}}}function Re(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const le=L||"demo-project",Y=U.iat||0,Le=U.sub||U.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ht=Object.assign({iss:`https://securetoken.google.com/${le}`,aud:le,iat:Y,exp:Y+3600,auth_time:Y,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(ht)),""].join(".")}function Pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function Je(){return"object"==typeof self&&self.self===self}function qe(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){return Pe().indexOf("Electron/")>=0}function ve(){const U=Pe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function $e(){return Pe().indexOf("MSAppHost/")>=0}function ee(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q(){return"object"==typeof indexedDB}function te(){return new Promise((U,L)=>{try{let $=!0;const le="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(le);Y.onsuccess=()=>{Y.result.close(),$||self.indexedDB.deleteDatabase(le),U(!0)},Y.onupgradeneeded=()=>{$=!1},Y.onerror=()=>{var Le;L((null===(Le=Y.error)||void 0===Le?void 0:Le.message)||"")}}catch($){L($)}})}function ge(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class se extends Error{constructor(L,$,le){super($),this.code=L,this.customData=le,this.name="FirebaseError",Object.setPrototypeOf(this,se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vt.prototype.create)}}class vt{constructor(L,$,le){this.service=L,this.serviceName=$,this.errors=le}create(L,...$){const le=$[0]||{},Y=`${this.service}/${L}`,Le=this.errors[L],ht=Le?function Wt(U,L){return U.replace(bn,($,le)=>{const Y=L[le];return null!=Y?String(Y):`<${le}?>`})}(Le,le):"Error";return new se(Y,`${this.serviceName}: ${ht} (${Y}).`,le)}}const bn=/\{\$([^}]+)}/g;function Zt(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function er(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function ws(U,L){if(U===L)return!0;const $=Object.keys(U),le=Object.keys(L);for(const Y of $){if(!le.includes(Y))return!1;const Le=U[Y],ht=L[Y];if(br(Le)&&br(ht)){if(!ws(Le,ht))return!1}else if(Le!==ht)return!1}for(const Y of le)if(!$.includes(Y))return!1;return!0}function br(U){return null!==U&&"object"==typeof U}function Pi(U){const L=[];for(const[$,le]of Object.entries(U))Array.isArray(le)?le.forEach(Y=>{L.push(encodeURIComponent($)+"="+encodeURIComponent(Y))}):L.push(encodeURIComponent($)+"="+encodeURIComponent(le));return L.length?"&"+L.join("&"):""}function Cr(U){const L={};return U.replace(/^\?/,"").split("&").forEach(le=>{if(le){const[Y,Le]=le.split("=");L[decodeURIComponent(Y)]=decodeURIComponent(Le)}}),L}function Qi(U){const L=U.indexOf("?");if(!L)return"";const $=U.indexOf("#",L);return U.substring(L,$>0?$:void 0)}function st(U,L){const $=new Vr(U,L);return $.subscribe.bind($)}class Vr{constructor(L,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{L(this)}).catch(le=>{this.error(le)})}next(L){this.forEachObserver($=>{$.next(L)})}error(L){this.forEachObserver($=>{$.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,$,le){let Y;if(void 0===L&&void 0===$&&void 0===le)throw new Error("Missing Observer.");Y=function Ln(U,L){if("object"!=typeof U||null===U)return!1;for(const $ of L)if($ in U&&"function"==typeof U[$])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:$,complete:le},void 0===Y.next&&(Y.next=ri),void 0===Y.error&&(Y.error=ri),void 0===Y.complete&&(Y.complete=ri);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch(ht){}}),this.observers.push(Y),Le}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,L)}sendOne(L,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{$(this.observers[L])}catch(le){"undefined"!=typeof console&&console.error&&console.error(le)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ri(){}function Xs(U,L=1e3,$=2){const le=L*Math.pow($,U),Y=Math.round(.5*le*(Math.random()-.5)*2);return Math.min(144e5,le+Y)}function at(U){return U&&U._delegate?U._delegate:U}function hr(U,L){return new Promise(($,le)=>{U.onsuccess=Y=>{$(Y.target.result)},U.onerror=Y=>{var Le;le(`${L}: ${null===(Le=Y.target.error)||void 0===Le?void 0:Le.message}`)}})}class Ot{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,$){return new ze(this._db.transaction.call(this._db,L,$))}createObjectStore(L,$){return new be(this._db.createObjectStore(L,$))}close(){this._db.close()}}class ze{constructor(L){this._transaction=L,this.complete=new Promise(($,le)=>{this._transaction.oncomplete=function(){$()},this._transaction.onerror=()=>{le(this._transaction.error)},this._transaction.onabort=()=>{le(this._transaction.error)}})}objectStore(L){return new be(this._transaction.objectStore(L))}}class be{constructor(L){this._store=L}index(L){return new We(this._store.index(L))}createIndex(L,$,le){return new We(this._store.createIndex(L,$,le))}get(L){return hr(this._store.get(L),"Error reading from IndexedDB")}put(L,$){return hr(this._store.put(L,$),"Error writing to IndexedDB")}delete(L){return hr(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return hr(this._store.clear(),"Error clearing IndexedDB object store")}}class We{constructor(L){this._index=L}get(L){return hr(this._index.get(L),"Error reading from IndexedDB")}}function ut(U,L,$){return new Promise((le,Y)=>{try{const Le=indexedDB.open(U,L);Le.onsuccess=ht=>{le(new Ot(ht.target.result))},Le.onerror=ht=>{var Gt;Y(`Error opening indexedDB: ${null===(Gt=ht.target.error)||void 0===Gt?void 0:Gt.message}`)},Le.onupgradeneeded=ht=>{$(new Ot(Le.result),ht.oldVersion,ht.newVersion,new ze(Le.transaction))}}catch(Le){Y(`Error opening indexedDB: ${Le.message}`)}})}function kt(U){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,g.Z)(function*(U){return new Promise((L,$)=>{try{const le=indexedDB.deleteDatabase(U);le.onsuccess=()=>{L()},le.onerror=Y=>{var Le;$(`Error deleting indexedDB database "${U}": ${null===(Le=Y.target.error)||void 0===Le?void 0:Le.message}`)}}catch(le){$(`Error deleting indexedDB database "${U}": ${le.message}`)}})})).apply(this,arguments)}},3673:(rt,Ce,k)=>{var g=k(5e3);let K=null;function O(){return K}const ie=new g.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ue(){return(0,g.LFG)(j)}()},providedIn:"platform"}),n})();const B=new g.OlP("Location Initialized");let j=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function He(){return new j((0,g.LFG)(ie))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Pe(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function we(n){const e=(0,g.LFG)(ie).location;return new qe((0,g.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const Je=new g.OlP("appBaseHref");let qe=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Pe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Pe(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Pe(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce),g.LFG(Je,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Pe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Pe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce),g.LFG(Je,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Re(je(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Pe(r))}normalize(t){return n.stripTrailingSlash(function $e(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pe(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pe(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Pe,n.joinWithSlash=Te,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(ce))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ve(){return new _e((0,g.LFG)(he),(0,g.LFG)(ce))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}var ge=(()=>((ge=ge||{})[ge.Format=0]="Format",ge[ge.Standalone=1]="Standalone",ge))(),ne=(()=>((ne=ne||{})[ne.Narrow=0]="Narrow",ne[ne.Abbreviated=1]="Abbreviated",ne[ne.Wide=2]="Wide",ne[ne.Short=3]="Short",ne))(),Me=(()=>((Me=Me||{})[Me.Short=0]="Short",Me[Me.Medium=1]="Medium",Me[Me.Long=2]="Long",Me[Me.Full=3]="Full",Me))(),se=(()=>((se=se||{})[se.Decimal=0]="Decimal",se[se.Group=1]="Group",se[se.List=2]="List",se[se.PercentSign=3]="PercentSign",se[se.PlusSign=4]="PlusSign",se[se.MinusSign=5]="MinusSign",se[se.Exponential=6]="Exponential",se[se.SuperscriptingExponent=7]="SuperscriptingExponent",se[se.PerMille=8]="PerMille",se[se.Infinity=9]="Infinity",se[se.NaN=10]="NaN",se[se.TimeSeparator=11]="TimeSeparator",se[se.CurrencyDecimal=12]="CurrencyDecimal",se[se.CurrencyGroup=13]="CurrencyGroup",se))();function Xt(n,e){return Gn((0,g.cg1)(n)[g.wAp.DateFormat],e)}function Yi(n,e){return Gn((0,g.cg1)(n)[g.wAp.TimeFormat],e)}function Zt(n,e){return Gn((0,g.cg1)(n)[g.wAp.DateTimeFormat],e)}function Lt(n,e){const t=(0,g.cg1)(n),r=t[g.wAp.NumberSymbols][e];if(void 0===r){if(e===se.CurrencyDecimal)return t[g.wAp.NumberSymbols][se.Decimal];if(e===se.CurrencyGroup)return t[g.wAp.NumberSymbols][se.Group]}return r}function Qi(n){if(!n[g.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[g.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Gn(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Ln(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const qn=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Es={},ca=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Vt=(()=>((Vt=Vt||{})[Vt.Short=0]="Short",Vt[Vt.ShortGMT=1]="ShortGMT",Vt[Vt.Long=2]="Long",Vt[Vt.Extended=3]="Extended",Vt))(),et=(()=>((et=et||{})[et.FullYear=0]="FullYear",et[et.Month=1]="Month",et[et.Date=2]="Date",et[et.Hours=3]="Hours",et[et.Minutes=4]="Minutes",et[et.Seconds=5]="Seconds",et[et.FractionalSeconds=6]="FractionalSeconds",et[et.Day=7]="Day",et))(),mt=(()=>((mt=mt||{})[mt.DayPeriods=0]="DayPeriods",mt[mt.Days=1]="Days",mt[mt.Months=2]="Months",mt[mt.Eras=3]="Eras",mt))();function tr(n,e,t,r){let o=function Gt(n){if(Ut(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[o,u=1,d=1]=n.split("-").map(m=>+m);return Fi(o,u-1,d)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(qn))return function fr(n){const e=new Date(0);let t=0,r=0;const o=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),o.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const d=Number(n[4]||0)-t,m=Number(n[5]||0)-r,E=Number(n[6]||0),C=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,d,m,E,C),e}(r)}const e=new Date(n);if(!Ut(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Pt(t,e)||e;let m,d=[];for(;e;){if(m=ca.exec(e),!m){d.push(e);break}{d=d.concat(m.slice(1));const M=d.pop();if(!M)break;e=M}}let E=o.getTimezoneOffset();r&&(E=Y(r,E),o=function ht(n,e,t){const r=t?-1:1,o=n.getTimezoneOffset();return function Le(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(Y(e,o)-o))}(o,r,!0));let C="";return d.forEach(M=>{const R=function le(n){if($[n])return $[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ot(mt.Eras,ne.Abbreviated);break;case"GGGG":e=Ot(mt.Eras,ne.Wide);break;case"GGGGG":e=Ot(mt.Eras,ne.Narrow);break;case"y":e=at(et.FullYear,1,0,!1,!0);break;case"yy":e=at(et.FullYear,2,0,!0,!0);break;case"yyy":e=at(et.FullYear,3,0,!1,!0);break;case"yyyy":e=at(et.FullYear,4,0,!1,!0);break;case"Y":e=L(1);break;case"YY":e=L(2,!0);break;case"YYY":e=L(3);break;case"YYYY":e=L(4);break;case"M":case"L":e=at(et.Month,1,1);break;case"MM":case"LL":e=at(et.Month,2,1);break;case"MMM":e=Ot(mt.Months,ne.Abbreviated);break;case"MMMM":e=Ot(mt.Months,ne.Wide);break;case"MMMMM":e=Ot(mt.Months,ne.Narrow);break;case"LLL":e=Ot(mt.Months,ne.Abbreviated,ge.Standalone);break;case"LLLL":e=Ot(mt.Months,ne.Wide,ge.Standalone);break;case"LLLLL":e=Ot(mt.Months,ne.Narrow,ge.Standalone);break;case"w":e=U(1);break;case"ww":e=U(2);break;case"W":e=U(1,!0);break;case"d":e=at(et.Date,1);break;case"dd":e=at(et.Date,2);break;case"c":case"cc":e=at(et.Day,1);break;case"ccc":e=Ot(mt.Days,ne.Abbreviated,ge.Standalone);break;case"cccc":e=Ot(mt.Days,ne.Wide,ge.Standalone);break;case"ccccc":e=Ot(mt.Days,ne.Narrow,ge.Standalone);break;case"cccccc":e=Ot(mt.Days,ne.Short,ge.Standalone);break;case"E":case"EE":case"EEE":e=Ot(mt.Days,ne.Abbreviated);break;case"EEEE":e=Ot(mt.Days,ne.Wide);break;case"EEEEE":e=Ot(mt.Days,ne.Narrow);break;case"EEEEEE":e=Ot(mt.Days,ne.Short);break;case"a":case"aa":case"aaa":e=Ot(mt.DayPeriods,ne.Abbreviated);break;case"aaaa":e=Ot(mt.DayPeriods,ne.Wide);break;case"aaaaa":e=Ot(mt.DayPeriods,ne.Narrow);break;case"b":case"bb":case"bbb":e=Ot(mt.DayPeriods,ne.Abbreviated,ge.Standalone,!0);break;case"bbbb":e=Ot(mt.DayPeriods,ne.Wide,ge.Standalone,!0);break;case"bbbbb":e=Ot(mt.DayPeriods,ne.Narrow,ge.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ot(mt.DayPeriods,ne.Abbreviated,ge.Format,!0);break;case"BBBB":e=Ot(mt.DayPeriods,ne.Wide,ge.Format,!0);break;case"BBBBB":e=Ot(mt.DayPeriods,ne.Narrow,ge.Format,!0);break;case"h":e=at(et.Hours,1,-12);break;case"hh":e=at(et.Hours,2,-12);break;case"H":e=at(et.Hours,1);break;case"HH":e=at(et.Hours,2);break;case"m":e=at(et.Minutes,1);break;case"mm":e=at(et.Minutes,2);break;case"s":e=at(et.Seconds,1);break;case"ss":e=at(et.Seconds,2);break;case"S":e=at(et.FractionalSeconds,1);break;case"SS":e=at(et.FractionalSeconds,2);break;case"SSS":e=at(et.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=be(Vt.Short);break;case"ZZZZZ":e=be(Vt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=be(Vt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=be(Vt.Long);break;default:return null}return $[n]=e,e}(M);C+=R?R(o,t,E):"''"===M?"'":M.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),C}function Fi(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Pt(n,e){const t=function Wt(n){return(0,g.cg1)(n)[g.wAp.LocaleId]}(n);if(Es[t]=Es[t]||{},Es[t][e])return Es[t][e];let r="";switch(e){case"shortDate":r=Xt(n,Me.Short);break;case"mediumDate":r=Xt(n,Me.Medium);break;case"longDate":r=Xt(n,Me.Long);break;case"fullDate":r=Xt(n,Me.Full);break;case"shortTime":r=Yi(n,Me.Short);break;case"mediumTime":r=Yi(n,Me.Medium);break;case"longTime":r=Yi(n,Me.Long);break;case"fullTime":r=Yi(n,Me.Full);break;case"short":const o=Pt(n,"shortTime"),u=Pt(n,"shortDate");r=Xs(Zt(n,Me.Short),[o,u]);break;case"medium":const d=Pt(n,"mediumTime"),m=Pt(n,"mediumDate");r=Xs(Zt(n,Me.Medium),[d,m]);break;case"long":const E=Pt(n,"longTime"),C=Pt(n,"longDate");r=Xs(Zt(n,Me.Long),[E,C]);break;case"full":const M=Pt(n,"fullTime"),R=Pt(n,"fullDate");r=Xs(Zt(n,Me.Full),[M,R])}return r&&(Es[t][e]=r),r}function Xs(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function dr(n,e,t="-",r,o){let u="";(n<0||o&&n<=0)&&(o?n=1-n:(n=-n,u=t));let d=String(n);for(;d.length<e;)d="0"+d;return r&&(d=d.substr(d.length-e)),u+d}function at(n,e,t=0,r=!1,o=!1){return function(u,d){let m=function hr(n,e){switch(n){case et.FullYear:return e.getFullYear();case et.Month:return e.getMonth();case et.Date:return e.getDate();case et.Hours:return e.getHours();case et.Minutes:return e.getMinutes();case et.Seconds:return e.getSeconds();case et.FractionalSeconds:return e.getMilliseconds();case et.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||m>-t)&&(m+=t),n===et.Hours)0===m&&-12===t&&(m=12);else if(n===et.FractionalSeconds)return function nr(n,e){return dr(n,3).substr(0,e)}(m,e);const E=Lt(d,se.MinusSign);return dr(m,e,E,r,o)}}function Ot(n,e,t=ge.Format,r=!1){return function(o,u){return function ze(n,e,t,r,o,u){switch(t){case mt.Months:return function dt(n,e,t){const r=(0,g.cg1)(n),u=Gn([r[g.wAp.MonthsFormat],r[g.wAp.MonthsStandalone]],e);return Gn(u,t)}(e,o,r)[n.getMonth()];case mt.Days:return function it(n,e,t){const r=(0,g.cg1)(n),u=Gn([r[g.wAp.DaysFormat],r[g.wAp.DaysStandalone]],e);return Gn(u,t)}(e,o,r)[n.getDay()];case mt.DayPeriods:const d=n.getHours(),m=n.getMinutes();if(u){const C=function Ji(n){const e=(0,g.cg1)(n);return Qi(e),(e[g.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Ln(r):[Ln(r[0]),Ln(r[1])])}(e),M=function st(n,e,t){const r=(0,g.cg1)(n);Qi(r);const u=Gn([r[g.wAp.ExtraData][0],r[g.wAp.ExtraData][1]],e)||[];return Gn(u,t)||[]}(e,o,r),R=C.findIndex(H=>{if(Array.isArray(H)){const[Z,fe]=H,Fe=d>=Z.hours&&m>=Z.minutes,tt=d<fe.hours||d===fe.hours&&m<fe.minutes;if(Z.hours<fe.hours){if(Fe&&tt)return!0}else if(Fe||tt)return!0}else if(H.hours===d&&H.minutes===m)return!0;return!1});if(-1!==R)return M[R]}return function bn(n,e,t){const r=(0,g.cg1)(n),u=Gn([r[g.wAp.DayPeriodsFormat],r[g.wAp.DayPeriodsStandalone]],e);return Gn(u,t)}(e,o,r)[d<12?0:1];case mt.Eras:return function sn(n,e){return Gn((0,g.cg1)(n)[g.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(o,u,n,e,t,r)}}function be(n){return function(e,t,r){const o=-1*r,u=Lt(t,se.MinusSign),d=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case Vt.Short:return(o>=0?"+":"")+dr(d,2,u)+dr(Math.abs(o%60),2,u);case Vt.ShortGMT:return"GMT"+(o>=0?"+":"")+dr(d,1,u);case Vt.Long:return"GMT"+(o>=0?"+":"")+dr(d,2,u)+":"+dr(Math.abs(o%60),2,u);case Vt.Extended:return 0===r?"Z":(o>=0?"+":"")+dr(d,2,u)+":"+dr(Math.abs(o%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function Nt(n){return Fi(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function U(n,e=!1){return function(t,r){let o;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,d=t.getDate();o=1+Math.floor((d+u)/7)}else{const u=Nt(t),d=function kt(n){const e=Fi(n,0,1).getDay();return Fi(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),m=u.getTime()-d.getTime();o=1+Math.round(m/6048e5)}return dr(o,n,Lt(r,se.MinusSign))}}function L(n,e=!1){return function(t,r){return dr(Nt(t).getFullYear(),n,Lt(r,se.MinusSign),e)}}const $={};function Y(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Ut(n){return n instanceof Date&&!isNaN(n.valueOf())}class bs{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new bs(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),es(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{es(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function es(n,e){n.context.$implicit=e.item}let Ur=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new tn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){qa("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){qa("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class tn{constructor(){this.$implicit=null,this.ngIf=null}}function qa(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let Zu=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(t.ngTemplateOutlet){const r=this._viewContainerRef;this._viewRef&&r.remove(r.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?r.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[g.TTD]}),n})();function Nn(n,e){return new g.vHH(2100,"")}class Oc{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Np{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const ns=new Np,Rp=new Oc;let Ku=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,g.QGY)(t))return ns;if((0,g.F4k)(t))return Rp;throw Nn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.sBO,16))},n.\u0275pipe=g.Yjl({name:"async",type:n,pure:!1}),n})(),Qu=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw Nn();return t.toUpperCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=g.Yjl({name:"uppercase",type:n,pure:!0}),n})();const kp=new g.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let yh=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",o,u){var d;if(null==t||""===t||t!=t)return null;try{return tr(t,r,u||this.locale,null!==(d=null!=o?o:this.defaultTimezone)&&void 0!==d?d:void 0)}catch(m){throw Nn()}}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.soG,16),g.Y36(kp,24))},n.\u0275pipe=g.Yjl({name:"date",type:n,pure:!0}),n})(),Tr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function ir(n){return"server"===n}let Xa=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new eu((0,g.LFG)(ie),window)}),n})();class eu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ga(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=rs(this.window.history)||rs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function rs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class xs extends class Vo extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function J(n){K||(K=n)}(new xs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Lc(){return nn=nn||document.querySelector("base"),nn?nn.getAttribute("href"):null}();return null==t?null:function so(n){io=io||document.createElement("a"),io.setAttribute("href",n);const e=io.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){nn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Po(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let io,nn=null;const pr=new g.OlP("TRANSITION_ID"),ma=[{provide:g.ip1,useFactory:function Tn(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[pr,ie,g.zs3],multi:!0}];class Ii{static init(){(0,g.VLi)(new Ii)}addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(E){d=d||E,u--,0==u&&r(d)};o.forEach(function(E){E.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let gr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Ms=new g.OlP("EventManagerPlugins");let is=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ms),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class tu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Hr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ns=(()=>{class n extends Hr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Rs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Rs))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Rs(n){O().remove(n)}const lt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},nu=/%COMP%/g;function Ee(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Ee(n,o,t):(o=o.replace(nu,n),t.push(o))}return t}function Rt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let fn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Uo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new rl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new il(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Ee(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(is),g.LFG(Ns),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Uo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(lt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=lt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=lt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Rt(r)):this.eventManager.addEventListener(e,t,Rt(r))}}class rl extends Uo{constructor(e,t,r,o){super(e),this.component=r;const u=Ee(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function el(n){return"_ngcontent-%COMP%".replace(nu,n)}(o+"-"+r.id),this.hostAttr=function tl(n){return"_nghost-%COMP%".replace(nu,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class il extends Uo{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ee(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Vc=(()=>{class n extends tu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const sl=["alt","control","meta","shift"],Os={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ai={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let au=(()=>{class n extends tu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(sl.forEach(E=>{const C=r.indexOf(E);C>-1&&(r.splice(C,1),d+=E+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function ks(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&sr.hasOwnProperty(e)&&(e=sr[e]))}return Os[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),sl.forEach(u=>{u!=o&&ai[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const al=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function Di(){xs.makeCurrent(),Ii.init()},multi:!0},{provide:ie,useFactory:function uu(){return(0,g.RDi)(document),document},deps:[]}]),_a=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function ol(){return new g.qLn},deps:[]},{provide:Ms,useClass:Vc,multi:!0,deps:[ie,g.R0b,g.Lbi]},{provide:Ms,useClass:au,multi:!0,deps:[ie]},{provide:fn,useClass:fn,deps:[is,Ns,g.AFp]},{provide:g.FYo,useExisting:fn},{provide:Hr,useExisting:Ns},{provide:Ns,useClass:Ns,deps:[ie]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:is,useClass:is,deps:[Ms,g.R0b]},{provide:class dn{},useClass:gr,deps:[]}];let va=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:pr,useExisting:g.AFp},ma]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:_a,imports:[Tr,g.hGG]}),n})();"undefined"!=typeof window&&window;var An=k(8996),Sn=k(7669);function ft(...n){const e=(0,Sn.yG)(n);return(0,An.D)(n,e)}var Zn=k(7579);class qr extends Zn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var zr=k(8306);const{isArray:$o}=Array,{getPrototypeOf:Wc,prototype:ln,keys:Eh}=Object;function bi(n){if(1===n.length){const e=n[0];if($o(e))return{args:e,keys:null};if(function du(n){return n&&"object"==typeof n&&Wc(n)===ln}(e)){const t=Eh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ui=k(4671),xt=k(4004);const{isArray:Zc}=Array;function Kc(n){return(0,xt.U)(e=>function gl(n,e){return Zc(e)?n(...e):n(e)}(n,e))}function co(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var On=k(5403),as=k(9672);function Ls(n,e,t){n?(0,as.f)(t,n,e):e()}var Ea=k(576);function Vi(n,e){const t=(0,Ea.m)(n)?n:()=>n,r=o=>o.error(t());return new zr.y(e?o=>e.schedule(r,0,o):r)}const Vs=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ui=k(8189);function Yc(...n){return function yl(){return(0,Ui.J)(1)}()((0,An.D)(n,(0,Sn.yG)(n)))}var Go=k(8421);function Ci(n){return new zr.y(e=>{(0,Go.Xf)(n()).subscribe(e)})}var qo=k(515),Ia=k(727),Ar=k(4482);function Ti(){return(0,Ar.e)((n,e)=>{let t=null;n._refCount++;const r=(0,On.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Qc extends zr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ar.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ia.w0;const t=this.getSubject();e.add(this.source.subscribe((0,On.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ia.w0.EMPTY)}return e}refCount(){return Ti()(this)}}function xn(n,e){return(0,Ar.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,On.x)(r,E=>{null==o||o.unsubscribe();let C=0;const M=u++;(0,Go.Xf)(n(E,M)).subscribe(o=(0,On.x)(r,R=>r.next(e?e(E,R,M,C++):R),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var zo=k(5698);function Ai(...n){const e=(0,Sn.yG)(n);return(0,Ar.e)((t,r)=>{(e?Yc(n,t,e):Yc(n,t)).subscribe(r)})}function Wo(n,e,t,r,o){return(u,d)=>{let m=t,E=e,C=0;u.subscribe((0,On.x)(d,M=>{const R=C++;E=m?n(E,M,R):(m=!0,M),r&&d.next(E)},o&&(()=>{m&&d.next(E),d.complete()})))}}function yr(n,e){return(0,Ar.e)(Wo(n,e,arguments.length>=2,!0))}function us(n,e){return(0,Ar.e)((t,r)=>{let o=0;t.subscribe((0,On.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function Bi(n){return(0,Ar.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,On.x)(t,void 0,void 0,d=>{u=(0,Go.Xf)(n(d,Bi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var vn=k(5577);function Us(n,e){return(0,Ea.m)(e)?(0,vn.z)(n,e,1):(0,vn.z)(n,1)}function Jc(n){return n<=0?()=>qo.E:(0,Ar.e)((e,t)=>{let r=[];e.subscribe((0,On.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function wn(n=Vp){return(0,Ar.e)((e,t)=>{let r=!1;e.subscribe((0,On.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Vp(){return new Vs}function Up(n){return(0,Ar.e)((e,t)=>{let r=!1;e.subscribe((0,On.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Bs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?us((o,u)=>n(o,u,r)):ui.y,(0,zo.q)(1),t?Up(e):wn(()=>new Vs))}var Wr=k(8505);class js{constructor(e,t){this.id=e,this.url=t}}class ls extends js{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hu extends js{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gn extends js{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _l extends js{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Zo extends js{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $p extends js{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vl extends js{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _r extends js{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ci extends js{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wl{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cs{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Si{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ji{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Da{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class El{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Il{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Mt="primary";class Dl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Un(n){return new Dl(n)}const bl="ngNavigationCancelingError";function $s(n){const e=Error("NavigationCancelingError: "+n);return e[bl]=!0,e}function ho(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function $i(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!pu(n[o],e[o]))return!1;return!0}function pu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Hi(n){return Array.prototype.concat.apply([],n)}function ed(n){return n.length>0?n[n.length-1]:null}function Bn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function di(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,An.D)(Promise.resolve(n)):ft(n)}const fo={exact:function b(n,e,t){if(!At(n.segments,e.segments)||!X(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!b(n.children[r],e.children[r],t))return!1;return!0},subset:F},Ko={exact:function D(n,e){return $i(n,e)},subset:function x(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>pu(n[t],e[t]))},ignored:()=>!0};function gu(n,e,t){return fo[t.paths](n.root,e.root,t.matrixParams)&&Ko[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function F(n,e,t){return z(n,e,e.segments,t)}function z(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!At(o,t)||e.hasChildren()||!X(o,t,r))}if(n.segments.length===t.length){if(!At(n.segments,t)||!X(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!F(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(At(n.segments,o)&&X(n.segments,o,r)&&n.children[Mt])&&z(n.children[Mt],e,u,r)}}function X(n,e,t){return e.every((r,o)=>Ko[t](n[o].parameters,r.parameters))}class Ae{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Un(this.queryParams)),this._queryParamMap}toString(){return Yo.serialize(this)}}class Se{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Bn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return po(this)}}class Ze{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Un(this.parameters)),this._parameterMap}toString(){return ba(this)}}function At(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class kn{}class En{parse(e){const t=new nd(e);return new Ae(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Sr(e.root,!0)}`,r=function ry(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${xi(t)}=${xi(o)}`).join("&"):`${xi(t)}=${xi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function go(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Yo=new En;function po(n){return n.segments.map(e=>ba(e)).join("/")}function Sr(n,e){if(!n.hasChildren())return po(n);if(e){const t=n.children[Mt]?Sr(n.children[Mt],!1):"",r=[];return Bn(n.children,(o,u)=>{u!==Mt&&r.push(`${u}:${Sr(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function wt(n,e){let t=[];return Bn(n.children,(r,o)=>{o===Mt&&(t=t.concat(e(r,o)))}),Bn(n.children,(r,o)=>{o!==Mt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Mt?[Sr(n.children[Mt],!1)]:[`${o}:${Sr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Mt]?`${po(n)}/${t[0]}`:`${po(n)}/(${t.join("//")})`}}function hi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xi(n){return hi(n).replace(/%3B/gi,";")}function td(n){return hi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tl(n){return decodeURIComponent(n)}function Al(n){return Tl(n.replace(/\+/g,"%20"))}function ba(n){return`${td(n.path)}${function Hp(n){return Object.keys(n).map(e=>`;${td(e)}=${td(n[e])}`).join("")}(n.parameters)}`}const iy=/^[^\/()?;=#]+/;function ds(n){const e=n.match(iy);return e?e[0]:""}const Sl=/^[^=?&#]+/,oy=/^[^&#]+/;class nd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Se([],{}):new Se([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Mt]=new Se(e,t)),r}parseSegment(){const e=ds(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ze(Tl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ds(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=ds(this.remaining);o&&(r=o,this.capture(r))}e[Tl(t)]=Tl(r)}parseQueryParam(e){const t=function sy(n){const e=n.match(Sl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function Gp(n){const e=n.match(oy);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=Al(t),u=Al(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ds(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Mt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Mt]:new Se([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ay{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ih(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Ih(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Dh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Dh(e,this._root).map(t=>t.value)}}function Ih(n,e){if(n===e.value)return e;for(const t of e.children){const r=Ih(n,t);if(r)return r}return null}function Dh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Dh(n,t);if(r.length)return r.unshift(e),r}return[]}class mo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function yo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class rd extends ay{constructor(e,t){super(e),this.snapshot=t,sd(this,e)}toString(){return this.snapshot.toString()}}function Ca(n,e){const t=function uy(n,e){const d=new mu([],{},{},"",{},Mt,e,null,n.root,-1,{});return new bh("",new mo(d,[]))}(n,e),r=new qr([new Ze("",{})]),o=new qr({}),u=new qr({}),d=new qr({}),m=new qr(""),E=new Qo(r,o,d,m,u,Mt,e,t.root);return E.snapshot=t.root,new rd(new mo(E,[]),t)}class Qo{constructor(e,t,r,o,u,d,m,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,xt.U)(e=>Un(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,xt.U)(e=>Un(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ly(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function id(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class mu{constructor(e,t,r,o,u,d,m,E,C,M,R){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=E,this._urlSegment=C,this._lastPathIndex=M,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Un(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Un(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class bh extends ay{constructor(e,t){super(t),this.url=e,sd(this,t)}toString(){return od(this._root)}}function sd(n,e){e.value._routerState=n,e.children.forEach(t=>sd(n,t))}function od(n){const e=n.children.length>0?` { ${n.children.map(od).join(", ")} } `:"";return`${n.value}${e}`}function ad(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,$i(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),$i(e.params,t.params)||n.params.next(t.params),function fu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!$i(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),$i(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ch(n,e){const t=$i(n.params,e.params)&&function yt(n,e){return At(n,e)&&n.every((t,r)=>$i(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ch(n.parent,e.parent))}function xl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Th(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return xl(n,r,o);return xl(n,r)})}(n,e,t);return new mo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>xl(n,m)),d}}const r=function dy(n){return new Qo(new qr(n.url),new qr(n.params),new qr(n.queryParams),new qr(n.fragment),new qr(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>xl(n,u));return new mo(r,o)}}function Jo(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function yu(n){return"object"==typeof n&&null!=n&&n.outlets}function qp(n,e,t,r,o){let u={};if(r&&Bn(r,(m,E)=>{u[E]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new Ae(t,u,o);const d=Ah(n,e,t);return new Ae(d,u,o)}function Ah(n,e,t){const r={};return Bn(n.children,(o,u)=>{r[u]=o===e?t:Ah(o,e,t)}),new Se(n.segments,r)}class hy{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Jo(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(yu);if(o&&o!==ed(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Sh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function my(n,e,t){if(n||(n=new Se([],{})),0===n.segments.length&&n.hasChildren())return Gs(n,e,t);const r=function y0(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(yu(m))break;const E=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&C&&"object"==typeof C&&void 0===C.outlets){if(!Mi(E,C,d))return u;r+=2}else{if(!Mi(E,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Se(n.segments.slice(0,r.pathIndex),{});return u.children[Mt]=new Se(n.segments.slice(r.pathIndex),n.children),Gs(u,0,o)}return r.match&&0===o.length?new Se(n.segments,{}):r.match&&!n.hasChildren()?xh(n,e,t):r.match?Gs(n,0,o):xh(n,e,t)}function Gs(n,e,t){if(0===t.length)return new Se(n.segments,{});{const r=function gy(n){return yu(n[0])?n[0].outlets:{[Mt]:n}}(t),o={};return Bn(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=my(n.children[d],e,u))}),Bn(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Se(n.segments,o)}}function xh(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(yu(u)){const E=_u(u.outlets);return new Se(r,E)}if(0===o&&Jo(t[0])){r.push(new Ze(n.segments[e].path,Mh(t[0]))),o++;continue}const d=yu(u)?u.outlets[Mt]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&Jo(m)?(r.push(new Ze(d,Mh(m))),o+=2):(r.push(new Ze(d,{})),o++)}return new Se(r,{})}function _u(n){const e={};return Bn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=xh(new Se([],{}),0,t))}),e}function Mh(n){const e={};return Bn(n,(t,r)=>e[r]=`${t}`),e}function Mi(n,e,t){return n==t.path&&$i(e,t.parameters)}class Wp{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ad(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=yo(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Bn(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=yo(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=yo(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=yo(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new El(u.value.snapshot))}),e.children.length&&this.forwardEvent(new ji(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(ad(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),ad(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function ud(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),E=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=E,d.outlet&&d.outlet.activateWith(o,E),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class ld{constructor(e,t){this.routes=e,this.module=t}}function Ta(n){return"function"==typeof n}function vu(n){return n instanceof Ae}const Nl=Symbol("INITIAL_VALUE");function Xo(){return xn(n=>function Ho(...n){const e=(0,Sn.yG)(n),t=(0,Sn.jO)(n),{args:r,keys:o}=bi(n);if(0===r.length)return(0,An.D)([],e);const u=new zr.y(function li(n,e,t=ui.y){return r=>{Ls(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let E=0;E<o;E++)Ls(e,()=>{const C=(0,An.D)(n[E],e);let M=!1;C.subscribe((0,On.x)(r,R=>{u[E]=R,M||(M=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>co(o,d):ui.y));return t?u.pipe(Kc(t)):u}(n.map(e=>e.pipe((0,zo.q)(1),Ai(Nl)))).pipe(yr((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==Nl?o:(u===Nl&&(r=!0),r||!1!==u&&d!==t.length-1&&!vu(u)?o:u),e)},Nl),us(e=>e!==Nl),(0,xt.U)(e=>vu(e)?e:!0===e),(0,zo.q)(1)))}class yy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Rl,this.attachRef=null}}class Rl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new yy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Ol=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=u||Mt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,E=new kh(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,E),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Rl),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class kh{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Qo?this.route:e===Rl?this.childContexts:this.parent.get(e,t)}}let Ph=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[Ol],encapsulation:2}),n})();function kl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];cd(r,Fh(e,r))}}function cd(n,e){n.children&&kl(n.children,e)}function Fh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Lh(n){const e=n.children&&n.children.map(Lh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Mt&&(t.component=Ph),t}function Yt(n){return n.outlet||Mt}function Vh(n,e){const t=n.filter(r=>Yt(r)===e);return t.push(...n.filter(r=>Yt(r)!==e)),t}const Kp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Kp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||ho)(t,n,e);if(!u)return Object.assign({},Kp);const d={};Bn(u.posParams,(E,C)=>{d[C]=E.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Pl(n,e,t,r,o="corrected"){if(t.length>0&&function vy(n,e,t){return t.some(r=>hd(n,e,r)&&Yt(r)!==Mt)}(n,t,r)){const d=new Se(e,function dd(n,e,t,r){const o={};o[Mt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Yt(u)!==Mt){const d=new Se([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Yt(u)]=d}return o}(n,e,r,new Se(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Yp(n,e,t){return t.some(r=>hd(n,e,r))}(n,t,r)){const d=new Se(n.segments,function _y(n,e,t,r,o,u){const d={};for(const m of r)if(hd(n,t,m)&&!o[Yt(m)]){const E=new Se([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Yt(m)]=E}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Se(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function hd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function wy(n,e,t,r){return!!(Yt(n)===r||r!==Mt&&hd(e,t,n))&&("**"===n.path||wu(e,n,t).matched)}function Ey(n,e,t){return 0===e.length&&!n.children[t]}class ea{constructor(e){this.segmentGroup=e||null}}class vr{constructor(e){this.urlTree=e}}function _o(n){return Vi(new ea(n))}function Fl(n){return Vi(new vr(n))}class Bh{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=Pl(this.urlTree.root,[],[],this.config).segmentGroup,t=new Se(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Mt).pipe((0,xt.U)(u=>this.createUrlTree(Sa(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Bi(u=>{if(u instanceof vr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ea?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Mt).pipe((0,xt.U)(o=>this.createUrlTree(Sa(o),e.queryParams,e.fragment))).pipe(Bi(o=>{throw o instanceof ea?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Se([],{[Mt]:e}):e;return new Ae(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,xt.U)(u=>new Se([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,An.D)(o).pipe(Us(u=>{const d=r.children[u],m=Vh(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,xt.U)(E=>({segment:E,outlet:u})))}),yr((u,d)=>(u[d.outlet]=d.segment,u),{}),function Bp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?us((o,u)=>n(o,u,r)):ui.y,Jc(1),t?Up(e):wn(()=>new Vs))}())}expandSegment(e,t,r,o,u,d){return(0,An.D)(r).pipe(Us(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(Bi(C=>{if(C instanceof ea)return ft(null);throw C}))),Bs(m=>!!m),Bi((m,E)=>{if(m instanceof Vs||"EmptyError"===m.name)return Ey(t,o,u)?ft(new Se([],{})):_o(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return wy(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):_o(t):_o(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Fl(u):this.lineralizeSegments(r,u).pipe((0,vn.z)(d=>{const m=new Se(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:E,remainingSegments:C,positionalParamSegments:M}=wu(t,o,u);if(!m)return _o(t);const R=this.applyRedirectCommands(E,o.redirectTo,M);return o.redirectTo.startsWith("/")?Fl(R):this.lineralizeSegments(o,R).pipe((0,vn.z)(H=>this.expandSegment(e,t,r,H.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ft(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,xt.U)(R=>(r._loadedConfig=R,new Se(o,{})))):ft(new Se(o,{}));const{matched:d,consumedSegments:m,remainingSegments:E}=wu(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,vn.z)(M=>{const R=M.module,H=M.routes,{segmentGroup:Z,slicedSegments:fe}=Pl(t,m,E,H),Fe=new Se(Z.segments,Z.children);if(0===fe.length&&Fe.hasChildren())return this.expandChildren(R,H,Fe).pipe((0,xt.U)(mn=>new Se(m,mn)));if(0===H.length&&0===fe.length)return ft(new Se(m,{}));const tt=Yt(r)===u;return this.expandSegment(R,Fe,H,fe,tt?Mt:u,!0).pipe((0,xt.U)(ct=>new Se(m.concat(ct.segments),ct.children)))})):_o(t)}getChildConfig(e,t,r){return t.children?ft(new ld(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ft(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,vn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,xt.U)(u=>(t._loadedConfig=u,u))):function xr(n){return Vi($s(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ft(new ld([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?ft(o.map(d=>{const m=e.get(d);let E;if(function Nh(n){return n&&Ta(n.canLoad)}(m))E=m.canLoad(t,r);else{if(!Ta(m))throw new Error("Invalid CanLoad guard");E=m(t,r)}return di(E)})).pipe(Xo(),(0,Wr.b)(d=>{if(!vu(d))return;const m=$s(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,xt.U)(d=>!0===d)):ft(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ft(r);if(o.numberOfChildren>1||!o.children[Mt])return Vi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[Mt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Ae(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Bn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Bn(t.children,(m,E)=>{d[E]=this.createSegmentGroup(e,m,r,o)}),new Se(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Sa(n){const e={};for(const r of Object.keys(n.children)){const u=Sa(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Ni(n){if(1===n.numberOfChildren&&n.children[Mt]){const e=n.children[Mt];return new Se(n.segments.concat(e.segments),e.children)}return n}(new Se(n.segments,e))}class Qp{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class xa{constructor(e,t){this.component=e,this.route=t}}function $h(n,e,t){const r=n._root;return fi(r,e?e._root:null,t,[r.value])}function Ll(n,e,t){const r=function Iy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function fi(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=yo(e);return n.children.forEach(d=>{(function Xp(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const E=function Dy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!At(n.url,e.url);case"pathParamsOrQueryParamsChange":return!At(n.url,e.url)||!$i(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ch(n,e)||!$i(n.queryParams,e.queryParams);default:return!Ch(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new Qp(r)):(u.data=d.data,u._resolvedData=d._resolvedData),fi(n,e,u.component?m?m.children:null:t,r,o),E&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new xa(m.outlet.component,d))}else d&&Ma(e,m,o),o.canActivateChecks.push(new Qp(r)),fi(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Bn(u,(d,m)=>Ma(d,t.getContext(m),o)),o}function Ma(n,e,t){const r=yo(n),o=n.value;Bn(r,(u,d)=>{Ma(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new xa(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class qh{}function zh(n){return new zr.y(e=>e.error(n))}class Wh{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=Pl(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Mt);if(null===t)return null;const r=new mu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Mt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new mo(r,t),u=new bh(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=ly(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=Vh(e,u),E=this.processSegmentGroup(m,d,u);if(null===E)return null;r.push(...E)}const o=tg(r);return function Ay(n){n.sort((e,t)=>e.value.outlet===Mt?-1:t.value.outlet===Mt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return Ey(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!wy(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const Z=r.length>0?ed(r).parameters:{};u=new mu(r,Z,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Yt(e),e.component,e,h(t),p(t)+r.length,T(e))}else{const Z=wu(t,e,r);if(!Z.matched)return null;d=Z.consumedSegments,m=Z.remainingSegments,u=new mu(d,Z.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Yt(e),e.component,e,h(t),p(t)+d.length,T(e))}const E=function Sy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:M}=Pl(t,d,m,E.filter(Z=>void 0===Z.redirectTo),this.relativeLinkResolution);if(0===M.length&&C.hasChildren()){const Z=this.processChildren(E,C);return null===Z?null:[new mo(u,Z)]}if(0===E.length&&0===M.length)return[new mo(u,[])];const R=Yt(e)===o,H=this.processSegment(E,C,M,R?Mt:o);return null===H?null:[new mo(u,H)]}}function xy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function tg(n){const e=[],t=new Set;for(const r of n){if(!xy(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=tg(r.children);e.push(new mo(r.value,o))}return e.filter(r=>!t.has(r))}function h(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function p(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function v(n){return n.data||{}}function T(n){return n.resolve||{}}function Ke(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function nt(n){return xn(e=>{const t=n(e);return t?(0,An.D)(t).pipe((0,xt.U)(()=>e)):ft(e)})}class Ul extends class qi{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Eu=new g.OlP("ROUTES");class Iu{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,xt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new ld(Hi(d.injector.get(Eu,void 0,g.XFs.Self|g.XFs.Optional)).map(Lh),d)}),Bi(u=>{throw t._loader$=void 0,u}));return t._loader$=new Qc(o,()=>new Zn.x).pipe(Ti()),t._loader$}loadModuleFactory(e){return di(e()).pipe((0,vn.z)(t=>t instanceof g.YKP?ft(t):(0,An.D)(this.compiler.compileModuleAsync(t))))}}class My{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ta(n){throw n}function fd(n,e,t){return e.parse("/")}function pd(n,e){return ft(null)}const Kh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Zr=(()=>{class n{constructor(t,r,o,u,d,m,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Zn.x,this.errorHandler=ta,this.malformedUriErrorHandler=fd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:pd,afterPreactivation:pd},this.urlHandlingStrategy=new My,this.routeReuseStrategy=new Ul,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(g.h0i),this.console=d.get(g.c2e);const R=d.get(g.R0b);this.isNgZoneEnabled=R instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=function Cl(){return new Ae(new Se([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Iu(d,m,H=>this.triggerEvent(new wl(H)),H=>this.triggerEvent(new cs(H))),this.routerState=Ca(this.currentUrlTree,this.rootComponentType),this.transitions=new qr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(us(o=>0!==o.id),(0,xt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),xn(o=>{let u=!1,d=!1;return ft(o).pipe((0,Wr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),xn(m=>{const E=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return ng(m.source)&&(this.browserUrlTree=m.extractedUrl),ft(m).pipe(xn(R=>{const H=this.transitions.getValue();return r.next(new ls(R.id,this.serializeUrl(R.extractedUrl),R.source,R.restoredState)),H!==this.transitions.getValue()?qo.E:Promise.resolve(R)}),function jh(n,e,t,r){return xn(o=>function Aa(n,e,t,r,o){return new Bh(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,xt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Wr.b)(R=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:R.urlAfterRedirects})}),function N(n,e,t,r,o){return(0,vn.z)(u=>function Ty(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new Wh(n,e,t,r,o,u).recognize();return null===d?zh(new qh):ft(d)}catch(d){return zh(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,xt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,R=>this.serializeUrl(R),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Wr.b)(R=>{if("eager"===this.urlUpdateStrategy){if(!R.extras.skipLocationChange){const Z=this.urlHandlingStrategy.merge(R.urlAfterRedirects,R.rawUrl);this.setBrowserUrl(Z,R)}this.browserUrlTree=R.urlAfterRedirects}const H=new Zo(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(R.urlAfterRedirects),R.targetSnapshot);r.next(H)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:Z,source:fe,restoredState:Fe,extras:tt}=m,zt=new ls(H,this.serializeUrl(Z),fe,Fe);r.next(zt);const ct=Ca(Z,this.rootComponentType).snapshot;return ft(Object.assign(Object.assign({},m),{targetSnapshot:ct,urlAfterRedirects:Z,extras:Object.assign(Object.assign({},tt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),qo.E}),nt(m=>{const{targetSnapshot:E,id:C,extractedUrl:M,rawUrl:R,extras:{skipLocationChange:H,replaceUrl:Z}}=m;return this.hooks.beforePreactivation(E,{navigationId:C,appliedUrlTree:M,rawUrlTree:R,skipLocationChange:!!H,replaceUrl:!!Z})}),(0,Wr.b)(m=>{const E=new $p(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(E)}),(0,xt.U)(m=>Object.assign(Object.assign({},m),{guards:$h(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function by(n,e){return(0,vn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?ft(Object.assign(Object.assign({},t),{guardsResult:!0})):function eg(n,e,t,r){return(0,An.D)(n).pipe((0,vn.z)(o=>function Vl(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ft(u.map(m=>{const E=Ll(m,e,o);let C;if(function _0(n){return n&&Ta(n.canDeactivate)}(E))C=di(E.canDeactivate(n,e,t,r));else{if(!Ta(E))throw new Error("Invalid CanDeactivate guard");C=di(E(n,e,t,r))}return C.pipe(Bs())})).pipe(Xo()):ft(!0)}(o.component,o.route,t,e,r)),Bs(o=>!0!==o,!0))}(d,r,o,n).pipe((0,vn.z)(m=>m&&function Zp(n){return"boolean"==typeof n}(m)?function wr(n,e,t,r){return(0,An.D)(e).pipe(Us(o=>Yc(function Gh(n,e){return null!==n&&e&&e(new Si(n)),ft(!0)}(o.route.parent,r),function Hh(n,e){return null!==n&&e&&e(new Da(n)),ft(!0)}(o.route,r),function vo(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function Jp(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Ci(()=>ft(d.guards.map(E=>{const C=Ll(E,d.node,t);let M;if(function Oh(n){return n&&Ta(n.canActivateChild)}(C))M=di(C.canActivateChild(r,n));else{if(!Ta(C))throw new Error("Invalid CanActivateChild guard");M=di(C(r,n))}return M.pipe(Bs())})).pipe(Xo())));return ft(u).pipe(Xo())}(n,o.path,t),function Cy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ft(!0);const o=r.map(u=>Ci(()=>{const d=Ll(u,e,t);let m;if(function Rh(n){return n&&Ta(n.canActivate)}(d))m=di(d.canActivate(e,n));else{if(!Ta(d))throw new Error("Invalid CanActivate guard");m=di(d(e,n))}return m.pipe(Bs())}));return ft(o).pipe(Xo())}(n,o.route,t))),Bs(o=>!0!==o,!0))}(r,u,n,e):ft(m)),(0,xt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Wr.b)(m=>{if(vu(m.guardsResult)){const C=$s(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const E=new vl(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(E)}),us(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),nt(m=>{if(m.guards.canActivateChecks.length)return ft(m).pipe((0,Wr.b)(E=>{const C=new _r(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}),xn(E=>{let C=!1;return ft(E).pipe(function G(n,e){return(0,vn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return ft(t);let u=0;return(0,An.D)(o).pipe(Us(d=>function re(n,e,t,r){return function Ve(n,e,t,r){const o=Ke(n);if(0===o.length)return ft({});const u={};return(0,An.D)(o).pipe((0,vn.z)(d=>function pt(n,e,t,r){const o=Ll(n,e,r);return di(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,Wr.b)(m=>{u[d]=m}))),Jc(1),(0,vn.z)(()=>Ke(u).length===o.length?ft(u):qo.E))}(n._resolve,n,e,r).pipe((0,xt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),ly(n,t).resolve),null)))}(d.route,r,n,e)),(0,Wr.b)(()=>u++),Jc(1),(0,vn.z)(d=>u===o.length?ft(t):qo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Wr.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,Wr.b)(E=>{const C=new ci(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}))}),nt(m=>{const{targetSnapshot:E,id:C,extractedUrl:M,rawUrl:R,extras:{skipLocationChange:H,replaceUrl:Z}}=m;return this.hooks.afterPreactivation(E,{navigationId:C,appliedUrlTree:M,rawUrlTree:R,skipLocationChange:!!H,replaceUrl:!!Z})}),(0,xt.U)(m=>{const E=function cy(n,e,t){const r=xl(n,e._root,t?t._root:void 0);return new rd(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:E})}),(0,Wr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,xt.U)(r=>(new Wp(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Wr.b)({next(){u=!0},complete(){u=!0}}),function jp(n){return(0,Ar.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),Bi(m=>{if(d=!0,function Xc(n){return n&&n[bl]}(m)){const E=vu(m.url);E||(this.navigated=!0,this.restoreHistory(o,!0));const C=new gn(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),E?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),R={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ng(o.source)};this.scheduleNavigation(M,"imperative",null,R,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const E=new _l(o.id,this.serializeUrl(o.extractedUrl),m);r.next(E);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return qo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const E=Object.assign({},d);delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(u.state=E)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){kl(t),this.config=t.map(Lh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:E}=r,C=o||this.routerState.root,M=E?this.currentUrlTree.fragment:d;let R=null;switch(m){case"merge":R=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":R=this.currentUrlTree.queryParams;break;default:R=u||null}return null!==R&&(R=this.removeEmptyProps(R)),function Hs(n,e,t,r,o){if(0===t.length)return qp(e.root,e.root,e.root,r,o);const u=function fy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new hy(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Bn(u.outlets,(E,C)=>{m[C]="string"==typeof E?E.split("/"):E}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,E)=>{0==E&&"."===m||(0==E&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new hy(t,e,r)}(t);if(u.toRoot())return qp(e.root,e.root,new Se([],{}),r,o);const d=function zp(n,e,t){if(n.isAbsolute)return new Sh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Sh(u,u===e.root,0)}const r=Jo(n.commands[0])?0:1;return function py(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Sh(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?Gs(d.segmentGroup,d.index,u.commands):my(d.segmentGroup,d.index,u.commands);return qp(e.root,d.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,R,null!=M?M:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=vu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Yh(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},Kh):!1===r?Object.assign({},gd):r,vu(t))return gu(this.currentUrlTree,t,o);const u=this.parseUrl(t);return gu(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new hu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var m,E;if(this.disposed)return Promise.resolve(!1);let C,M,R;d?(C=d.resolve,M=d.reject,R=d.promise):R=new Promise((fe,Fe)=>{C=fe,M=Fe});const H=++this.navigationId;let Z;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Z=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):Z=0,this.setTransition({id:H,targetPageId:Z,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:C,reject:M,promise:R,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),R.catch(fe=>Promise.reject(fe))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new gn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function ng(n){return"imperative"!==n}let rg=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this.commands=null,this.onChanges=new Zn.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:md(this.skipLocationChange),replaceUrl:md(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:md(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Zr),g.Y36(Qo),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&g.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),n})(),ig=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new Zn.x,this.subscription=t.events.subscribe(u=>{u instanceof hu&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){if(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:md(this.skipLocationChange),replaceUrl:md(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:md(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Zr),g.Y36(Qo),g.Y36(he))},n.\u0275dir=g.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&g.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&g.uIk("target",r.target)("href",r.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),n})();function md(n){return""===n||!!n}class Ry{}class w0{preload(e,t){return ft(null)}}let E0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new Iu(o,r,E=>t.triggerEvent(new wl(E)),E=>t.triggerEvent(new cs(E)))}setUpPreloading(){this.subscription=this.router.events.pipe(us(t=>t instanceof hu),Us(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,An.D)(o).pipe((0,Ui.J)(),(0,xt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ft(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,vn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Zr),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(Ry))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),sg=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ls?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof hu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Il&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Il(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const hs=new g.OlP("ROUTER_CONFIGURATION"),ky=new g.OlP("ROUTER_FORROOT_GUARD"),I0=[_e,{provide:kn,useClass:En},{provide:Zr,useFactory:function Fy(n,e,t,r,o,u,d={},m,E){const C=new Zr(null,n,e,t,r,o,Hi(u));return m&&(C.urlHandlingStrategy=m),E&&(C.routeReuseStrategy=E),function C0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,C),d.enableTracing&&C.events.subscribe(M=>{var R,H;null===(R=console.group)||void 0===R||R.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===(H=console.groupEnd)||void 0===H||H.call(console)}),C},deps:[kn,Rl,_e,g.zs3,g.Sil,Eu,hs,[class Zh{},new g.FiY],[class In{},new g.FiY]]},Rl,{provide:Qo,useFactory:function og(n){return n.routerState.root},deps:[Zr]},E0,w0,class Oy{preload(e,t){return t().pipe(Bi(()=>ft(null)))}},{provide:hs,useValue:{enableTracing:!1}}];function XI(){return new g.PXZ("Router",Zr)}let wo=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[I0,Py(t),{provide:ky,useFactory:b0,deps:[[Zr,new g.FiY,new g.tp0]]},{provide:hs,useValue:r||{}},{provide:he,useFactory:D0,deps:[ce,[new g.tBr(Je),new g.FiY],hs]},{provide:sg,useFactory:eD,deps:[Zr,Xa,hs]},{provide:Ry,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:w0},{provide:g.PXZ,multi:!0,useFactory:XI},[yd,{provide:g.ip1,multi:!0,useFactory:T0,deps:[yd]},{provide:Vy,useFactory:Ly,deps:[yd]},{provide:g.tb,multi:!0,useExisting:Vy}]]}}static forChild(t){return{ngModule:n,providers:[Py(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ky,8),g.LFG(Zr,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function eD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new sg(n,e,t)}function D0(n,e,t={}){return t.useHash?new De(n,e):new qe(n,e)}function b0(n){return"guarded"}function Py(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:Eu,multi:!0,useValue:n}]}let yd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Zn.x}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(Zr),d=this.injector.get(hs);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?ft(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(hs),o=this.injector.get(E0),u=this.injector.get(sg),d=this.injector.get(Zr),m=this.injector.get(g.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function T0(n){return n.appInitializer.bind(n)}function Ly(n){return n.bootstrapListener.bind(n)}const Vy=new g.OlP("Router Initializer");let A0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["lib-images"]],decls:9,vars:0,consts:[[1,"container","py-5"],[1,"row","mt-5"],[1,"card-group"],[1,"card","ms-5"],["src","https://images.unsplash.com/photo-1511467687858-23d96c32e4ae?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","alt","","height","300px","weight","300px",1,"card-img-top"],["src","https://images.unsplash.com/photo-1485125457414-5f3aa5b0d208?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1134&q=80","alt","","height","300px","weight","300px",1,"card-img-top"],["src","https://images.unsplash.com/photo-1571974096020-5c2775ac5d47?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","alt","","height","300px","weight","300px",1,"card-img-top"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),g._UZ(4,"img",4),g.qZA(),g.TgZ(5,"div",3),g._UZ(6,"img",5),g.qZA(),g.TgZ(7,"div",3),g._UZ(8,"img",6),g.qZA()()()())},encapsulation:2,changeDetection:0}),n})(),S0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-home-page"]],decls:12,vars:0,consts:[[1,"container"],[1,"container-flex","h-50","text-center","pt-5"],[1,"fw-bold"],["routerLink","/atask",1,"btn","text-white","my-5",2,"background-color","#7749F8"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),g._uU(3,"Get a clear view of the day ahead"),g.qZA(),g.TgZ(4,"h3",2),g._uU(5,"All your tasks that are due today will show up here"),g.qZA(),g.TgZ(6,"a",3),g._uU(7,"Add task"),g.qZA()()(),g._UZ(8,"br")(9,"br")(10,"br")(11,"lib-images"))},directives:[ig,A0],encapsulation:2,changeDetection:0}),n})(),x0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[],imports:[[Tr]]}),n})(),tD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[],imports:[[Tr,wo.forChild([{path:"",component:S0}]),x0]]}),n})(),ug=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),Du=(()=>{class n extends ug{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Na=new g.OlP("NgValueAccessor"),O0={provide:Na,useExisting:(0,g.Gpc)(()=>zi),multi:!0},rD=new g.OlP("CompositionEventMode");let zi=(()=>{class n extends ug{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function nD(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(rD,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([O0]),g.qOj]}),n})();const pi=new g.OlP("NgValidators"),Cu=new g.OlP("NgAsyncValidators");function P0(n){return function bu(n){return null==n||0===n.length}(n.value)?{required:!0}:null}function Bl(n){return null}function qs(n){return null!=n}function qy(n){const e=(0,g.QGY)(n)?(0,An.D)(n):n;return(0,g.CqO)(e),e}function L0(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function lg(n,e){return e.map(t=>t(n))}function cg(n){return n.map(e=>function Ra(n){return!n.validate}(e)?e:t=>e.validate(t))}function Qh(n){return null!=n?function zy(n){if(!n)return null;const e=n.filter(qs);return 0==e.length?null:function(t){return L0(lg(t,e))}}(cg(n)):null}function dg(n){return null!=n?function sD(n){if(!n)return null;const e=n.filter(qs);return 0==e.length?null:function(t){return function M0(...n){const e=(0,Sn.jO)(n),{args:t,keys:r}=bi(n),o=new zr.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let E=d,C=d;for(let M=0;M<d;M++){let R=!1;(0,Go.Xf)(t[M]).subscribe((0,On.x)(u,H=>{R||(R=!0,C--),m[M]=H},()=>E--,void 0,()=>{(!E||!R)&&(C||u.next(r?co(r,m):m),u.complete())}))}});return e?o.pipe(Kc(e)):o}(lg(t,e).map(qy)).pipe((0,xt.U)(L0))}}(cg(n)):null}function oD(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Jh(n){return n._rawValidators}function Xh(n){return n._rawAsyncValidators}function ef(n){return n?Array.isArray(n)?n:[n]:[]}function _d(n,e){return Array.isArray(n)?n.includes(e):n===e}function hg(n,e){const t=ef(e);return ef(n).forEach(o=>{_d(t,o)||t.push(o)}),t}function aD(n,e){return ef(e).filter(t=>!_d(n,t))}class V0{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Qh(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=dg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Tu extends V0{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ri extends V0{get formDirective(){return null}get path(){return null}}class U0{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let B0=(()=>{class n extends U0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Tu,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[g.qOj]}),n})(),lD=(()=>{class n extends U0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ri,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[g.qOj]}),n})();function vd(n,e){Ky(n,e),e.valueAccessor.writeValue(n.value),function j0(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&gg(n,e)})}(n,e),function fD(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function hD(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&gg(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Zy(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function wd(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Eo(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function rf(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ky(n,e){const t=Jh(n);null!==e.validator?n.setValidators(oD(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Xh(n);null!==e.asyncValidator?n.setAsyncValidators(oD(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();rf(e._rawValidators,o),rf(e._rawAsyncValidators,o)}function Eo(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Jh(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=Xh(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return rf(e._rawValidators,r),rf(e._rawAsyncValidators,r),t}function gg(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function mg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Hl="VALID",uf="INVALID",Oa="PENDING",lf="DISABLED";function G0(n){return(cf(n)?n.validators:n)||null}function Jy(n){return Array.isArray(n)?Qh(n):n||null}function yg(n,e){return(cf(e)?e.asyncValidators:n)||null}function q0(n){return Array.isArray(n)?dg(n):n||null}function cf(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const z0=n=>n instanceof df,Xy=n=>n instanceof _g;function W0(n){return z0(n)?n.value:n.getRawValue()}function Z0(n,e){const t=Xy(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[e])throw new g.vHH(1001,"")}function mD(n,e){Xy(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new g.vHH(1002,"")})}class K0{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Jy(this._rawValidators),this._composedAsyncValidatorFn=q0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Hl}get invalid(){return this.status===uf}get pending(){return this.status==Oa}get disabled(){return this.status===lf}get enabled(){return this.status!==lf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Jy(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=q0(e)}addValidators(e){this.setValidators(hg(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(hg(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(aD(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(aD(e,this._rawAsyncValidators))}hasValidator(e){return _d(this._rawValidators,e)}hasAsyncValidator(e){return _d(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Oa,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lf,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Hl,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Hl||this.status===Oa)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lf:Hl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Oa,this._hasOwnPendingAsyncValidator=!0;const t=qy(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function H0(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=Xy(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof yD)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?lf:this.errors?uf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Oa)?Oa:this._anyControlsHaveStatus(uf)?uf:Hl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){cf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class df extends K0{constructor(e=null,t,r){super(G0(t),yg(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),cf(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){mg(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){mg(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class _g extends K0{constructor(e,t,r){super(G0(t),yg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){mD(this,e),Object.keys(e).forEach(r=>{Z0(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=W0(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class yD extends K0{constructor(e,t,r){super(G0(t),yg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){mD(this,e),e.forEach((r,o)=>{Z0(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>W0(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let Io=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),i_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const s_=new g.OlP("NgModelWithFormControlWarning"),o_={provide:Ri,useExisting:(0,g.Gpc)(()=>wg)};let wg=(()=>{class n extends Ri{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Eo(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return vd(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){wd(t.control||null,t,!1),mg(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function $l(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(wd(r||null,t),z0(o)&&(vd(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Yy(n,e){Ky(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function pD(n,e){return Eo(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ky(this.form,this),this._oldForm&&Eo(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(pi,10),g.Y36(Cu,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([o_]),g.qOj,g.TTD]}),n})();const l_={provide:Tu,useExisting:(0,g.Gpc)(()=>iw)};let iw=(()=>{class n extends Tu{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Qy(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===zi?t=u:function of(n){return Object.getPrototypeOf(n.constructor)===Du}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Su(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function pg(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(g.Y36(Ri,13),g.Y36(pi,10),g.Y36(Cu,10),g.Y36(Na,10),g.Y36(s_,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([l_]),g.qOj,g.TTD]}),n})(),Do=(()=>{class n{constructor(){this._validator=Bl}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Bl,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,features:[g.TTD]}),n})();const cw={provide:pi,useExisting:(0,g.Gpc)(()=>Id),multi:!0};let Id=(()=>{class n extends Do{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function uw(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>P0}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&g.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[g._Bn([cw]),g.qOj]}),n})(),ra=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[i_]]}),n})(),gw=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:s_,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[ra]}),n})();const g_=new g.OlP("ADDS_TASK_DTO");let mw=(()=>{class n{constructor(t,r){this._addsTaskDto=t,this._router=r,this.addTask=new _g({text:new df})}onAddTaskClicked(t){var r;this._addsTaskDto.add({text:null===(r=t.get("text"))||void 0===r?void 0:r.value,created_at:Date.now()})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g_),g.Y36(Zr))},n.\u0275cmp=g.Xpm({type:n,selectors:[["lib-add-task"]],decls:10,vars:2,consts:[[1,"container","my-5"],[1,"row"],[1,"col-8"],[3,"formGroup"],["type","text","formControlName","text","placeholder","Write a new task here:","required","",1,"rounded",2,"width","400px","height","120px","border","1px solid #7749F8"],["value","Submit","routerLink","/list","type","submit",1,"btn","me-4","mt-4","text-white",2,"background-color","#7749F8","border","1px solid #7749F8",3,"disabled","click"],["type","submit","routerLink","",1,"btn","mt-4","btn-outline-dark","border-1"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),g._UZ(4,"input",4)(5,"br"),g.TgZ(6,"button",5),g.NdJ("click",function(){return r.onAddTaskClicked(r.addTask)}),g._uU(7,"Add task "),g.qZA(),g.TgZ(8,"button",6),g._uU(9,"Cancel"),g.qZA()()()()()),2&t&&(g.xp6(3),g.Q6J("formGroup",r.addTask),g.xp6(3),g.Q6J("disabled",r.addTask.invalid))},directives:[Io,lD,wg,zi,B0,iw,Id,rg],encapsulation:2,changeDetection:0}),n})(),OD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-add-task-page"]],decls:2,vars:0,template:function(t,r){1&t&&g._UZ(0,"lib-add-task")(1,"lib-images")},directives:[mw,A0],encapsulation:2,changeDetection:0}),n})();var kD=k(4986),Mr=k(5813);function yw(){return(0,Ar.e)((n,e)=>{let t,r=!1;n.subscribe((0,On.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function PD(n,e){return n===e}var Xe,bo=k(2011),dA=(k(4087),k(3942)),ye=k(5861),Gl=k(9681),pf=k(4859),ka=k(1877),jt=k(2090),Co="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},xu={},Tg=Tg||{},It=Co||self;function gf(){}function m_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ag(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var mf="closure_uid_"+(1e9*Math.random()>>>0),FD=0;function y_(n,e,t){return n.call.apply(n.bind,arguments)}function LD(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Kr(n,e,t){return(Kr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y_:LD).apply(null,arguments)}function Sg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Yr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Mu(){this.s=this.s,this.o=this.o}var xg={};Mu.prototype.s=!1,Mu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function vw(n){return Object.prototype.hasOwnProperty.call(n,mf)&&n[mf]||(n[mf]=++FD)}(this);delete xg[n]}},Mu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ql=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},ww=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function Ew(n){return Array.prototype.concat.apply([],arguments)}function __(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Cd(n){return/^[\s\xa0]*$/.test(n)}var Kn,To=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Er(n,e){return-1!=n.indexOf(e)}function Nr(n,e){return n<e?-1:n>e?1:0}e:{var _f=It.navigator;if(_f){var ps=_f.userAgent;if(ps){Kn=ps;break e}}Kn=""}function vf(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function zl(n){const e={};for(const t in n)e[t]=n[t];return e}var Wl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zl(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Wl.length;u++)t=Wl[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Nu(n){return Nu[" "](n),n}Nu[" "]=gf;var wf,n,Ad=Er(Kn,"Opera"),Ao=Er(Kn,"Trident")||Er(Kn,"MSIE"),Kl=Er(Kn,"Edge"),Ru=Kl||Ao,v_=Er(Kn,"Gecko")&&!(Er(Kn.toLowerCase(),"webkit")&&!Er(Kn,"Edge"))&&!(Er(Kn,"Trident")||Er(Kn,"MSIE"))&&!Er(Kn,"Edge"),Iw=Er(Kn.toLowerCase(),"webkit")&&!Er(Kn,"Edge");function w_(){var n=It.document;return n?n.documentMode:void 0}e:{var Mg="",Ng=(n=Kn,v_?/rv:([^\);]+)(\)|;)/.exec(n):Kl?/Edge\/([\d\.]+)/.exec(n):Ao?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Iw?/WebKit\/(\S+)/.exec(n):Ad?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ng&&(Mg=Ng?Ng[1]:""),Ao){var Rg=w_();if(null!=Rg&&Rg>parseFloat(Mg)){wf=String(Rg);break e}}wf=Mg}var Dw={};var UD=It.document&&Ao&&(w_()||parseInt(wf,10))||void 0,Cw=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{It.addEventListener("test",gf,e),It.removeEventListener("test",gf,e)}catch(t){}return n}();function Qr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Ef(n,e){if(Qr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(v_){e:{try{Nu(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:BD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ef.Z.h.call(this)}}Qr.prototype.h=function(){this.defaultPrevented=!0},Yr(Ef,Qr);var BD={2:"touch",3:"pen",4:"mouse"};Ef.prototype.h=function(){Ef.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Sd="closure_listenable_"+(1e6*Math.random()|0),jD=0;function Tw(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++jD,this.ca=this.fa=!1}function Og(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function kg(n){this.src=n,this.g={},this.h=0}function Aw(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=ql(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Og(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function D_(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}kg.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=D_(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new Tw(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var If="closure_lm_"+(1e6*Math.random()|0),Df={};function Sw(n,e,t,r,o){if(r&&r.once)return HD(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Sw(n,e[u],t,r,o);return null}return t=Fg(t),n&&n[Sd]?n.N(e,t,Ag(r)?!!r.capture:!!r,o):$D(n,e,t,!1,r,o)}function $D(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Ag(o)?!!o.capture:!!o,m=Ou(n);if(m||(n[If]=m=new kg(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function hA(){var e=qD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Cw||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(GD(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function HD(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)HD(n,e[u],t,r,o);return null}return t=Fg(t),n&&n[Sd]?n.O(e,t,Ag(r)?!!r.capture:!!r,o):$D(n,e,t,!0,r,o)}function xw(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)xw(n,e[u],t,r,o);else r=Ag(r)?!!r.capture:!!r,t=Fg(t),n&&n[Sd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=D_(u=n.g[e],t,r,o))&&(Og(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Ou(n))&&(e=n.g[e.toString()],n=-1,e&&(n=D_(e,t,r,o)),(t=-1<n?e[n]:null)&&Pg(t))}function Pg(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Sd])Aw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(GD(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ou(e))?(Aw(t,n),0==t.h&&(t.src=null,e[If]=null)):Og(n)}}}function GD(n){return n in Df?Df[n]:Df[n]="on"+n}function qD(n,e){if(n.ca)n=!0;else{e=new Ef(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Pg(n),n=t.call(r,e)}return n}function Ou(n){return(n=n[If])instanceof kg?n:null}var b_="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fg(n){return"function"==typeof n?n:(n[b_]||(n[b_]=function(e){return n.handleEvent(e)}),n[b_])}function Rr(){Mu.call(this),this.i=new kg(this),this.P=this,this.I=null}function Or(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Qr(e,n);else if(e instanceof Qr)e.target=e.target||n;else{var o=e;Zl(e=new Qr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Yl(d,r,!0,e)&&o}if(o=Yl(d=e.g=n,r,!0,e)&&o,o=Yl(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Yl(d=e.g=t[u],r,!1,e)&&o}function Yl(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,E=d.ia||d.src;d.fa&&Aw(n.i,d),o=!1!==m.call(E,r)&&o}}return o&&!r.defaultPrevented}Yr(Rr,Mu),Rr.prototype[Sd]=!0,Rr.prototype.removeEventListener=function(n,e,t,r){xw(this,n,e,t,r)},Rr.prototype.M=function(){if(Rr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Og(t[r]);delete n.g[e],n.h--}}this.I=null},Rr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Rr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var C_=It.JSON.stringify;function Mw(){var n=A_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Lg,Nw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new WD,n=>n.reset());class WD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ZD(n){It.setTimeout(()=>{throw n},0)}function T_(n,e){Lg||function KD(){var n=It.Promise.resolve(void 0);Lg=function(){n.then(S_)}}(),Vg||(Lg(),Vg=!0),A_.add(n,e)}var Vg=!1,A_=new class zD{constructor(){this.h=this.g=null}add(e,t){const r=Nw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function S_(){for(var n;n=Mw();){try{n.h.call(n.g)}catch(t){ZD(t)}var e=Nw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Vg=!1}function x_(n,e){Rr.call(this),this.h=n||1,this.g=e||It,this.j=Kr(this.kb,this),this.l=Date.now()}function bf(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function M_(n,e,t){if("function"==typeof n)t&&(n=Kr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Kr(n.handleEvent,n)}return 2147483647<Number(e)?-1:It.setTimeout(n,e||0)}function YD(n){n.g=M_(()=>{n.g=null,n.i&&(n.i=!1,YD(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Yr(x_,Rr),(Xe=x_.prototype).da=!1,Xe.S=null,Xe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Or(this,"tick"),this.da&&(bf(this),this.start()))}},Xe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.M=function(){x_.Z.M.call(this),bf(this),delete this.g};class Cf extends Mu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:YD(this)}M(){super.M(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xd(n){Mu.call(this),this.h=n,this.g={}}Yr(xd,Mu);var Ug=[];function Bg(n,e,t,r){Array.isArray(t)||(t&&(Ug[0]=t.toString()),t=Ug);for(var o=0;o<t.length;o++){var u=Sw(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Rw(n){vf(n.g,function(e,t){this.g.hasOwnProperty(t)&&Pg(e)},n),n.g={}}function Ql(){this.g=!0}function Tf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function R_(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return C_(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}xd.prototype.M=function(){xd.Z.M.call(this),Rw(this)},xd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ql.prototype.Aa=function(){this.g=!1},Ql.prototype.info=function(){};var Pa={},$g=null;function Af(){return $g=$g||new Rr}function Hg(n){Qr.call(this,Pa.Ma,n)}function Md(n){const e=Af();Or(e,new Hg(e,n))}function O_(n,e){Qr.call(this,Pa.STAT_EVENT,n),this.stat=e}function Jr(n){const e=Af();Or(e,new O_(e,n))}function k_(n,e){Qr.call(this,Pa.Na,n),this.size=e}function Sf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){n()},e)}Pa.Ma="serverreachability",Yr(Hg,Qr),Pa.STAT_EVENT="statevent",Yr(O_,Qr),Pa.Na="timingevent",Yr(k_,Qr);var xf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},P_={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Mf(){}function Ow(){}Mf.prototype.h=null;var Nd,Nf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function L_(){Qr.call(this,"d")}function Rf(){Qr.call(this,"c")}function Of(){}function Rd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new xd(this),this.P=kw,this.W=new x_(n=Ru?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new V_}function V_(){this.i=null,this.g="",this.h=!1}Yr(L_,Qr),Yr(Rf,Qr),Yr(Of,Mf),Of.prototype.g=function(){return new XMLHttpRequest},Of.prototype.i=function(){return{}},Nd=new Of;var kw=45e3,Gg={},kf={};function qg(n,e,t){n.K=1,n.v=Zg(Fa(e)),n.s=t,n.U=!0,U_(n,null)}function U_(n,e){n.F=Date.now(),Od(n),n.A=Fa(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),jw(t.h,"t",r),n.C=0,t=n.l.H,n.h=new V_,n.g=Wf(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Cf(Kr(n.Ia,n,n.g),n.O)),Bg(n.V,n.g,"readystatechange",n.gb),e=n.H?zl(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Md(1),function jg(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),E=0;E<m.length;E++){var C=m[E].split("=");if(1<C.length){var M=C[0];C=C[1];var R=M.split("_");d=2<=R.length&&"type"==R[1]?d+(M+"=")+C+"&":d+(M+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function JD(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Pw(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=XD(n,t),o==kf){4==e&&(n.o=4,Jr(14),r=!1),Tf(n.j,n.m,null,"[Incomplete Response]");break}if(o==Gg){n.o=4,Jr(15),Tf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Tf(n.j,n.m,o,null),B_(n,o)}JD(n)&&o!=kf&&o!=Gg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Jr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),nE(e),e.L=!0,Jr(11))):(Tf(n.j,n.m,t,"[Invalid Chunked Response]"),Jl(n),kd(n))}function XD(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?kf:(t=Number(e.substring(t,r)),isNaN(t)?Gg:(r+=1)+t>e.length?kf:(e=e.substr(r,t),n.C=r+t,e))}function Od(n){n.Y=Date.now()+n.P,Fw(n,n.P)}function Fw(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Sf(Kr(n.eb,n),e)}function jn(n){n.B&&(It.clearTimeout(n.B),n.B=null)}function kd(n){0==n.l.G||n.I||hb(n.l,n)}function Jl(n){jn(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,bf(n.W),Rw(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function B_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Pd(t.i,n)))if(t.I=n.N,!n.J&&Pd(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Sf(Kr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;zf(t),$f(t)}qf(t),Jr(18)}if(1>=Yg(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else ic(t,11)}else if((n.J||t.g==n)&&zf(t),!Cd(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const M=C[3];null!=M&&(t.ma=M,t.h.info("VER="+t.ma));const R=C[4];null!=R&&(t.za=R,t.h.info("SVER="+t.za));const H=C[5];null!=H&&"number"==typeof H&&0<H&&(t.K=r=1.5*H,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Z=n.g;if(Z){const fe=Z.g?Z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fe){var u=r.i;!u.g&&(Er(fe,"spdy")||Er(fe,"quic")||Er(fe,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Lf(u,u.h),u.h=null))}if(r.D){const Fe=Z.g?Z.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.sa=Fe,Qt(r.F,r.D,Fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=iE(r,r.H?r.la:null,r.W),d.J){z_(r.i,d);var m=d,E=r.K;E&&m.setTimeout(E),m.B&&(jn(m),Od(m)),r.g=d}else db(r);0<t.l.length&&Hf(t)}else"stop"!=C[0]&&"close"!=C[0]||ic(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?ic(t,7):tm(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Md(4)}catch(C){}}function j_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(m_(n)||"string"==typeof n)ww(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(m_(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function Lw(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(m_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Xl(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Xl)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function zg(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];zs(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)zs(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function zs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Xe=Rd.prototype).setTimeout=function(n){this.P=n},Xe.gb=function(n){n=n.target;const e=this.L;e&&3==sa(n)?e.l():this.Ia(n)},Xe.Ia=function(n){try{if(n==this.g)e:{const M=sa(this.g);var e=this.g.Da();const R=this.g.ba();if(!(3>M)&&(3!=M||Ru||this.g&&(this.h.h||this.g.ga()||K_(this.g)))){this.I||4!=M||7==e||Md(8==e||0>=R?3:2),jn(this);var t=this.g.ba();this.N=t;t:if(JD(this)){var r=K_(this.g);n="";var o=r.length,u=4==sa(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Jl(this),kd(this);var d="";break t}this.h.i=new It.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function N_(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,M,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,E=this.g;if((m=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cd(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Jr(12),Jl(this),kd(this);break e}Tf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,B_(this,t)}this.U?(Pw(this,M,d),Ru&&this.i&&3==M&&(Bg(this.V,this.W,"tick",this.fb),this.W.start())):(Tf(this.j,this.m,d,null),B_(this,d)),4==M&&Jl(this),this.i&&!this.I&&(4==M?hb(this.l,this):(this.i=!1,Od(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Jr(12)):(this.o=0,Jr(13)),Jl(this),kd(this)}}}catch(M){}},Xe.fb=function(){if(this.g){var n=sa(this.g),e=this.g.ga();this.C<e.length&&(jn(this),Pw(this,n,e),this.i&&4!=n&&Od(this))}},Xe.cancel=function(){this.I=!0,Jl(this)},Xe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function QD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Md(3),Jr(17)),Jl(this),this.o=2,kd(this)):Fw(this,this.Y-n)},(Xe=Xl.prototype).R=function(){zg(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Xe.T=function(){return zg(this),this.g.concat()},Xe.get=function(n,e){return zs(this.h,n)?this.h[n]:e},Xe.set=function(n,e){zs(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Xe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var Vw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ku(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof ku){this.g=void 0!==e?e:n.g,Pf(this,n.j),this.s=n.s,$_(this,n.i),Ff(this,n.m),this.l=n.l,e=n.h;var t=new ec;t.i=e.i,e.g&&(t.g=new Xl(e.g),t.h=e.h),Wg(this,t),this.o=n.o}else n&&(t=String(n).match(Vw))?(this.g=!!e,Pf(this,t[1]||"",!0),this.s=Oi(t[2]||""),$_(this,t[3]||"",!0),Ff(this,t[4]),this.l=Oi(t[5]||"",!0),Wg(this,t[6]||"",!0),this.o=Oi(t[7]||"")):(this.g=!!e,this.h=new ec(null,this.g))}function Fa(n){return new ku(n)}function Pf(n,e,t){n.j=t?Oi(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function $_(n,e,t){n.i=t?Oi(e,!0):e}function Ff(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Wg(n,e,t){e instanceof ec?(n.h=e,function $w(n,e){e&&!n.j&&(Ws(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Bw(this,r),jw(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=ki(e,ib)),n.h=new ec(e,n.g))}function Qt(n,e,t){n.h.set(e,t)}function Zg(n){return Qt(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Oi(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ki(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Uw),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Uw(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ku.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ki(e,H_,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ki(e,H_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(ki(t,"/"==t.charAt(0)?rb:nb,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ki(t,sb)),n.join("")};var H_=/[#\/\?@]/g,nb=/[#\?:]/g,rb=/[#\?]/g,ib=/[#\?@]/g,sb=/#/g;function ec(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ws(n){n.g||(n.g=new Xl,n.h=0,n.i&&function eb(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Bw(n,e){Ws(n),e=tc(n,e),zs(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,zs((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&zg(n)))}function G_(n,e){return Ws(n),e=tc(n,e),zs(n.g.h,e)}function jw(n,e,t){Bw(n,e),0<t.length&&(n.i=null,n.g.set(tc(n,e),__(t)),n.h+=t.length)}function tc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Hw(n){this.l=n||Gw,n=It.PerformanceNavigationTiming?0<(n=It.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(It.g&&It.g.Ea&&It.g.Ea()&&It.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=ec.prototype).add=function(n,e){Ws(this),this.i=null,n=tc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){Ws(this),this.g.forEach(function(t,r){ww(t,function(o){n.call(e,o,r,this)},this)},this)},Xe.T=function(){Ws(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Xe.R=function(n){Ws(this);var e=[];if("string"==typeof n)G_(this,n)&&(e=Ew(e,this.g.get(tc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Ew(e,n[t])}return e},Xe.set=function(n,e){return Ws(this),this.i=null,G_(this,n=tc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var Gw=10;function q_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Yg(n){return n.h?1:n.g?n.g.size:0}function Pd(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Lf(n,e){n.g?n.g.add(e):n.h=e}function z_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function W_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return __(n.i)}function Qg(){}function qw(){this.g=new Qg}function zw(n,e,t){const r=t||"";try{j_(n,function(o,u){let d=o;Ag(o)&&(d=C_(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Vf(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Uf(n){this.l=n.$b||null,this.j=n.ib||!1}function Jg(n,e){Rr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Z_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Hw.prototype.cancel=function(){if(this.i=W_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Qg.prototype.stringify=function(n){return It.JSON.stringify(n,void 0)},Qg.prototype.parse=function(n){return It.JSON.parse(n,void 0)},Yr(Uf,Mf),Uf.prototype.g=function(){return new Jg(this.l,this.j)},Uf.prototype.i=function(n){return function(){return n}}({}),Yr(Jg,Rr);var Z_=0;function Zw(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Bf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,jf(n)}function jf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=Jg.prototype).open=function(n,e){if(this.readyState!=Z_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,jf(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||It).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bf(this)),this.readyState=Z_},Xe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,jf(this)),this.g&&(this.readyState=3,jf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==It.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zw(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Xe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Bf(this):jf(this),3==this.readyState&&Zw(this)}},Xe.Ua=function(n){this.g&&(this.response=this.responseText=n,Bf(this))},Xe.Ta=function(n){this.g&&(this.response=n,Bf(this))},Xe.ha=function(){this.g&&Bf(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Jg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ob=It.JSON.parse;function or(n){Rr.call(this),this.headers=new Xl,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Kw,this.K=this.L=!1}Yr(or,Rr);var Kw="",ab=/^https?$/i,ub=["POST","PUT"];function cb(n){return"content-type"==n.toLowerCase()}function Yw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Qw(n),Xg(n)}function Qw(n){n.D||(n.D=!0,Or(n,"complete"),Or(n,"error"))}function Jw(n){if(n.h&&void 0!==Tg&&(!n.C[1]||4!=sa(n)||2!=n.ba()))if(n.v&&4==sa(n))M_(n.Fa,0,n);else if(Or(n,"readystatechange"),4==sa(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(Vw)[1]||null;if(!o&&It.self&&It.self.location){var u=It.self.location.protocol;o=u.substr(0,u.length-1)}r=!ab.test(o?o.toLowerCase():"")}t=r}if(t)Or(n,"complete"),Or(n,"success");else{n.m=6;try{var d=2<sa(n)?n.g.statusText:""}catch(E){d=""}n.j=d+" ["+n.ba()+"]",Qw(n)}}finally{Xg(n)}}}function Xg(n,e){if(n.g){Xw(n);const t=n.g,r=n.C[0]?gf:null;n.g=null,n.C=null,e||Or(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function Xw(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(It.clearTimeout(n.A),n.A=null)}function sa(n){return n.g?n.g.readyState:0}function K_(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Kw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function em(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function eE(n){let e="";return vf(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Qt(n,e,t))}function Fd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Y_(n){this.za=0,this.l=[],this.h=new Ql,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Fd("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Fd("baseRetryDelayMs",5e3,n),this.$a=Fd("retryDelaySeedMs",1e4,n),this.Ya=Fd("forwardChannelMaxRetries",2,n),this.ra=Fd("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Hw(n&&n.concurrentRequestLimit),this.Ca=new qw,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function tm(n){if(Q_(n),3==n.G){var e=n.V++,t=Fa(n.F);Qt(t,"SID",n.J),Qt(t,"RID",e),Qt(t,"TYPE","terminate"),Gf(n,t),(e=new Rd(n,n.h,e,void 0)).K=2,e.v=Zg(Fa(t)),t=!1,It.navigator&&It.navigator.sendBeacon&&(t=It.navigator.sendBeacon(e.v.toString(),"")),!t&&It.Image&&((new Image).src=e.v,t=!0),t||(e.g=Wf(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Od(e)}rE(n)}function $f(n){n.g&&(nE(n),n.g.cancel(),n.g=null)}function Q_(n){$f(n),n.u&&(It.clearTimeout(n.u),n.u=null),zf(n),n.i.cancel(),n.m&&("number"==typeof n.m&&It.clearTimeout(n.m),n.m=null)}function nm(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Hf(n)}function Hf(n){q_(n.i)||n.m||(n.m=!0,T_(n.Ha,n),n.C=0)}function tE(n,e){var t;t=e?e.m:n.V++;const r=Fa(n.F);Qt(r,"SID",n.J),Qt(r,"RID",t),Qt(r,"AID",n.U),Gf(n,r),n.o&&n.s&&em(r,n.o,n.s),t=new Rd(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=rc(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Lf(n.i,t),qg(t,r,e)}function Gf(n,e){n.j&&j_({},function(t,r){Qt(e,r,t)})}function rc(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Kr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let E=0;E<t;E++){let C=o[E].h;const M=o[E].g;if(C-=u,0>C)u=Math.max(0,o[E].h-100),m=!1;else try{zw(M,d,"req"+C+"_")}catch(R){r&&r(M)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function db(n){n.g||n.u||(n.Y=1,T_(n.Ga,n),n.A=0)}function qf(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Sf(Kr(n.Ga,n),gt(n,n.A)),n.A++,0))}function nE(n){null!=n.B&&(It.clearTimeout(n.B),n.B=null)}function J_(n){n.g=new Rd(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Fa(n.oa);Qt(e,"RID","rpc"),Qt(e,"SID",n.J),Qt(e,"CI",n.N?"0":"1"),Qt(e,"AID",n.U),Gf(n,e),Qt(e,"TYPE","xmlhttp"),n.o&&n.s&&em(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Zg(Fa(e)),t.s=null,t.U=!0,U_(t,n)}function zf(n){null!=n.v&&(It.clearTimeout(n.v),n.v=null)}function hb(n,e){var t=null;if(n.g==e){zf(n),nE(n),n.g=null;var r=2}else{if(!Pd(n.i,e))return;t=e.D,z_(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Or(r=Af(),new k_(r,t,e,o)),Hf(n)}else db(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function nc(n,e){return!(Yg(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Sf(Kr(n.Ha,n,e),gt(n,n.C)),n.C++,0)))}(n,e)||2==r&&qf(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:ic(n,5);break;case 4:ic(n,10);break;case 3:ic(n,6);break;default:ic(n,2)}}function gt(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ic(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Kr(n.jb,n);t||(t=new ku("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||Pf(t,"https"),Zg(t)),function Ww(n,e){const t=new Ql;if(It.Image){const r=new Image;r.onload=Sg(Vf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Sg(Vf,t,r,"TestLoadImage: error",!1,e),r.onabort=Sg(Vf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Sg(Vf,t,r,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Jr(2);n.G=0,n.j&&n.j.va(e),rE(n),Q_(n)}function rE(n){n.G=0,n.I=-1,n.j&&((0!=W_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,__(n.l),n.l.length=0),n.j.ua())}function iE(n,e,t){let r=function tb(n){return n instanceof ku?Fa(n):new ku(n,void 0)}(t);if(""!=r.i)e&&$_(r,e+"."+r.i),Ff(r,r.m);else{const o=It.location;r=function ia(n,e,t,r){var o=new ku(null,void 0);return n&&Pf(o,n),e&&$_(o,e),t&&Ff(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&vf(n.aa,function(o,u){Qt(r,u,o)}),t=n.sa,(e=n.D)&&t&&Qt(r,e,t),Qt(r,"VER",n.ma),Gf(n,r),r}function Wf(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new or(t&&n.Ba&&!n.qa?new Uf({ib:!0}):n.qa)).L=n.H,e}function sE(){}function sc(){if(Ao&&!(10<=Number(UD)))throw Error("Environmental error: no available transport.")}function gi(n,e){Rr.call(this),this.g=new Y_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Cd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Cd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new oc(this)}function Pn(n){L_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function fb(){Rf.call(this),this.status=1}function oc(n){this.g=n}(Xe=or.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Nd.g(),this.C=function F_(n){return n.h||(n.h=n.i())}(this.u?this.u:Nd),this.g.onreadystatechange=Kr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Yw(this,u)}n=t||"";const o=new Xl(this.headers);r&&j_(r,function(u,d){o.set(d,u)}),r=function yf(n){e:{var e=cb;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=It.FormData&&n instanceof It.FormData,!(0<=ql(ub,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Xw(this),0<this.B&&((this.K=function lb(n){return Ao&&function bw(){return function Td(n){var e=Dw;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=To(String(wf)).split("."),t=To("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Nr(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Nr(0==o[2].length,0==u[2].length)||Nr(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Kr(this.pa,this)):this.A=M_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Yw(this,u)}},Xe.pa=function(){void 0!==Tg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Or(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Or(this,"complete"),Or(this,"abort"),Xg(this))},Xe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xg(this,!0)),or.Z.M.call(this)},Xe.Fa=function(){this.s||(this.F||this.v||this.l?Jw(this):this.cb())},Xe.cb=function(){Jw(this)},Xe.ba=function(){try{return 2<sa(this)?this.g.status:-1}catch(n){return-1}},Xe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Xe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ob(e)}},Xe.Da=function(){return this.m},Xe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=Y_.prototype).ma=8,Xe.G=1,Xe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Xe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Rd(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=zl(u),Zl(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=rc(this,o,e),Qt(t=Fa(this.F),"RID",n),Qt(t,"CVER",22),this.D&&Qt(t,"X-HTTP-Session-Id",this.D),Gf(this,t),this.o&&u&&em(t,this.o,u),Lf(this.i,o),this.Ra&&Qt(t,"TYPE","init"),this.ja?(Qt(t,"$req",e),Qt(t,"SID","null"),o.$=!0,qg(o,t,null)):qg(o,t,e),this.G=2}}else 3==this.G&&(n?tE(this,n):0==this.l.length||q_(this.i)||tE(this))},Xe.Ga=function(){if(this.u=null,J_(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Sf(Kr(this.bb,this),n)}},Xe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Jr(10),$f(this),J_(this))},Xe.ab=function(){null!=this.v&&(this.v=null,$f(this),qf(this),Jr(19))},Xe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Jr(2)):(this.h.info("Failed to ping google.com"),Jr(1))},(Xe=sE.prototype).xa=function(){},Xe.wa=function(){},Xe.va=function(){},Xe.ua=function(){},Xe.Oa=function(){},sc.prototype.g=function(n,e){return new gi(n,e)},Yr(gi,Rr),gi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),T_(Kr(n.hb,n,e))),Jr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=iE(n,null,n.W),Hf(n)},gi.prototype.close=function(){tm(this.g)},gi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,nm(this.g,e)}else this.v?((e={}).__data__=C_(n),nm(this.g,e)):nm(this.g,n)},gi.prototype.M=function(){this.g.j=null,delete this.j,tm(this.g),delete this.g,gi.Z.M.call(this)},Yr(Pn,L_),Yr(fb,Rf),Yr(oc,sE),oc.prototype.xa=function(){Or(this.g,"a")},oc.prototype.wa=function(n){Or(this.g,new Pn(n))},oc.prototype.va=function(n){Or(this.g,new fb(n))},oc.prototype.ua=function(){Or(this.g,"b")},sc.prototype.createWebChannel=sc.prototype.g,gi.prototype.send=gi.prototype.u,gi.prototype.open=gi.prototype.m,gi.prototype.close=gi.prototype.close,xf.NO_ERROR=0,xf.TIMEOUT=8,xf.HTTP_ERROR=6,P_.COMPLETE="complete",Ow.EventType=Nf,Nf.OPEN="a",Nf.CLOSE="b",Nf.ERROR="c",Nf.MESSAGE="d",Rr.prototype.listen=Rr.prototype.N,or.prototype.listenOnce=or.prototype.O,or.prototype.getLastError=or.prototype.La,or.prototype.getLastErrorCode=or.prototype.Da,or.prototype.getStatus=or.prototype.ba,or.prototype.getResponseJson=or.prototype.Qa,or.prototype.getResponseText=or.prototype.ga,or.prototype.send=or.prototype.ea;var pb=xu.createWebChannelTransport=function(){return new sc},gb=xu.getStatEventTarget=function(){return Af()},rm=xu.ErrorCode=xf,oE=xu.EventType=P_,aE=xu.Event=Pa,X_=xu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},mb=xu.FetchXmlHttpFactory=Uf,im=xu.WebChannel=Ow,yb=xu.XhrIo=or;const Ld="@firebase/firestore";class Xr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xr.UNAUTHENTICATED=new Xr(null),Xr.GOOGLE_CREDENTIALS=new Xr("google-credentials-uid"),Xr.FIRST_PARTY=new Xr("first-party-uid"),Xr.MOCK_USER=new Xr("mock-user");let Vd="9.6.10";const Pu=new ka.Yd("@firebase/firestore");function Ud(){return Pu.logLevel}function ke(n,...e){if(Pu.logLevel<=ka.in.DEBUG){const t=e.map(ac);Pu.debug(`Firestore (${Vd}): ${n}`,...t)}}function Yn(n,...e){if(Pu.logLevel<=ka.in.ERROR){const t=e.map(ac);Pu.error(`Firestore (${Vd}): ${n}`,...t)}}function Zf(n,...e){if(Pu.logLevel<=ka.in.WARN){const t=e.map(ac);Pu.warn(`Firestore (${Vd}): ${n}`,...t)}}function ac(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Ye(n="Unexpected state"){const e=`FIRESTORE (${Vd}) INTERNAL ASSERTION FAILED: `+n;throw Yn(e),new Error(e)}function Et(n,e){n||Ye()}function Ge(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends jt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ir{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class lE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xr.UNAUTHENTICATED))}shutdown(){}}class vb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class wb{constructor(e){this.t=e,this.currentUser=Xr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Ir,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,ye.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},E=C=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>E(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?E(C):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Ir)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et("string"==typeof r.accessToken),new lE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Et(null===e||"string"==typeof e),new Xr(e)}}class fA{constructor(e,t,r){this.type="FirstParty",this.user=Xr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class pA{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new fA(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Xr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Eb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gA{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Et("string"==typeof t.token),this.p=t.token,new Eb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class mi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Db(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}mi.A=-1;class dE{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=Db(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Ft(n,e){return n<e?-1:n>e?1:0}function oa(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function hE(n){return n+"\0"}class Qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new Qn(0,0))}static max(){return new _t(new Qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function fE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function uc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ev(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Kf{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ye(),void 0===r?r=e.length-t:r>e.length-t&&Ye(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Kf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Kf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Kt extends Kf{construct(e,t,r){return new Kt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Kt(t)}static emptyPath(){return new Kt([])}}const Bd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kr extends Kf{construct(e,t,r){return new kr(e,t,r)}static isValidIdentifier(e){return Bd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new kr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new xe(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new xe(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new xe(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kr(t)}static emptyPath(){return new kr([])}}class lc{constructor(e){this.fields=e,e.sort(kr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ar{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ar(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new ar(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ar.EMPTY_BYTE_STRING=new ar("");const Cb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function La(n){if(Et(!!n),"string"==typeof n){let e=0;const t=Cb.exec(n);if(Et(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$n(n.seconds),nanos:$n(n.nanos)}}function $n(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Va(n){return"string"==typeof n?ar.fromBase64String(n):ar.fromUint8Array(n)}function tv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function nv(n){const e=n.mapValue.fields.__previous_value__;return tv(e)?nv(e):e}function jd(n){const e=La(n.mapValue.fields.__local_write_time__.timestampValue);return new Qn(e.seconds,e.nanos)}class Tb{constructor(e,t,r,o,u,d,m,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=E}}class Ua{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ua("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ua&&e.projectId===this.projectId&&e.database===this.database}}function cc(n){return null==n}function dc(n){return 0===n&&1/n==-1/0}function pE(n){return"number"==typeof n&&Number.isInteger(n)&&!dc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Kt.fromString(e))}static fromName(e){return new Be(Kt.fromString(e).popFirst(5))}static empty(){return new Be(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Kt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Kt(e.slice()))}}const gE={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},mE={nullValue:"NULL_VALUE"};function hc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tv(n)?4:am(n)?9:10:Ye()}function aa(n,e){if(n===e)return!0;const t=hc(n);if(t!==hc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return jd(n).isEqual(jd(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=La(r.timestampValue),d=La(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Va(n.bytesValue).isEqual(Va(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return $n(r.geoPointValue.latitude)===$n(o.geoPointValue.latitude)&&$n(r.geoPointValue.longitude)===$n(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return $n(r.integerValue)===$n(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=$n(r.doubleValue),d=$n(o.doubleValue);return u===d?dc(u)===dc(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return oa(n.arrayValue.values||[],e.arrayValue.values||[],aa);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(fE(u)!==fE(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!aa(u[m],d[m])))return!1;return!0}(n,e);default:return Ye()}var o}function Yf(n,e){return void 0!==(n.values||[]).find(t=>aa(t,e))}function Fu(n,e){if(n===e)return 0;const t=hc(n),r=hc(e);if(t!==r)return Ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=$n(o.integerValue||o.doubleValue),m=$n(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return yE(n.timestampValue,e.timestampValue);case 4:return yE(jd(n),jd(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Va(o),m=Va(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let E=0;E<d.length&&E<m.length;E++){const C=Ft(d[E],m[E]);if(0!==C)return C}return Ft(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Ft($n(o.latitude),$n(u.latitude));return 0!==d?d:Ft($n(o.longitude),$n(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let E=0;E<d.length&&E<m.length;++E){const C=Fu(d[E],m[E]);if(C)return C}return Ft(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const d=o.fields||{},m=Object.keys(d),E=u.fields||{},C=Object.keys(E);m.sort(),C.sort();for(let M=0;M<m.length&&M<C.length;++M){const R=Ft(m[M],C[M]);if(0!==R)return R;const H=Fu(d[m[M]],E[C[M]]);if(0!==H)return H}return Ft(m.length,C.length)}(n.mapValue,e.mapValue);default:throw Ye()}}function yE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=La(n),r=La(e),o=Ft(t.seconds,r.seconds);return 0!==o?o:Ft(t.nanos,r.nanos)}function $d(n){return sm(n)}function sm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=La(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Va(n.bytesValue).toBase64():"referenceValue"in n?Be.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=sm(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${sm(r.fields[m])}`;return u+"}"}(n.mapValue):Ye();var e}function fc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function rv(n){return!!n&&"integerValue"in n}function Qf(n){return!!n&&"arrayValue"in n}function iv(n){return!!n&&"nullValue"in n}function _E(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function om(n){return!!n&&"mapValue"in n}function Jf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return uc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Jf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Jf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function am(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function um(n,e){return void 0===n?e:void 0===e||Fu(n,e)>0?n:e}function sv(n,e){return void 0===n?e:void 0===e||Fu(n,e)<0?n:e}class Pr{constructor(e){this.value=e}static empty(){return new Pr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!om(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jf(t)}setAll(e){let t=kr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Jf(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());om(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return aa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];om(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){uc(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Pr(Jf(this.value))}}function vE(n){const e=[];return uc(n.fields,(t,r)=>{const o=new kr([t]);if(om(r)){const u=vE(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new lc(e)}class Dn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Dn(e,0,_t.min(),_t.min(),Pr.empty(),0)}static newFoundDocument(e,t,r){return new Dn(e,1,t,_t.min(),r,0)}static newNoDocument(e,t){return new Dn(e,2,t,_t.min(),Pr.empty(),0)}static newUnknownDocument(e,t){return new Dn(e,3,t,_t.min(),Pr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hd{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function ov(n){return n.fields.find(e=>2===e.kind)}function pc(n){return n.fields.filter(e=>2!==e.kind)}Hd.UNKNOWN_ID=-1;class lm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Gd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Gd(0,Lu.min())}}function wE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=_t.fromTimestamp(1e9===r?new Qn(t+1,0):new Qn(t,r));return new Lu(o,Be.empty(),e)}function EE(n){return new Lu(n.readTime,n.key,-1)}class Lu{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Lu(_t.min(),Be.empty(),-1)}static max(){return new Lu(_t.max(),Be.empty(),-1)}}function Ab(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Be.comparator(n.documentKey,e.documentKey),0!==t?t:Ft(n.largestBatchId,e.largestBatchId))}class cm{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function IE(n,e=null,t=[],r=[],o=null,u=null,d=null){return new cm(n,e,t,r,o,u,d)}function Zs(n){const e=Ge(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+$d(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),cc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$d(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$d(r)).join(",")),e.P=t}return e.P}function ep(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!bE(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!aa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!TE(n.startAt,e.startAt)&&TE(n.endAt,e.endAt)}function av(n){return Be.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function tp(n,e){return n.filters.filter(t=>t instanceof ei&&t.field.isEqual(e))}class ei extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Sb(e,t,r):"array-contains"===t?new DE(e,r):"in"===t?new lv(e,r):"not-in"===t?new dm(e,r):"array-contains-any"===t?new np(e,r):new ei(e,t,r)}static V(e,t,r){return"in"===t?new xb(e,r):new Mb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Fu(t,this.value)):null!==t&&hc(this.value)===hc(t)&&this.v(Fu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ye()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Sb extends ei{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.v(t)}}class xb extends ei{constructor(e,t){super(e,"in",t),this.keys=uv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Mb extends ei{constructor(e,t){super(e,"not-in",t),this.keys=uv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class DE extends ei{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qf(t)&&Yf(t.arrayValue,this.value)}}class lv extends ei{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Yf(this.value.arrayValue,t)}}class dm extends ei{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Yf(this.value.arrayValue,t)}}class np extends ei{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Yf(this.value.arrayValue,r))}}class Vu{constructor(e,t){this.position=e,this.inclusive=t}}class gc{constructor(e,t="asc"){this.field=e,this.dir=t}}function bE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function CE(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?Be.comparator(Be.fromName(d.referenceValue),t.key):Fu(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function TE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!aa(n.position[t],e.position[t]))return!1;return!0}class So{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=E,this.D=null,this.C=null}}function AE(n,e,t,r,o,u,d,m){return new So(n,e,t,r,o,u,d,m)}function rp(n){return new So(n)}function hm(n){return!cc(n.limit)&&"F"===n.limitType}function fm(n){return!cc(n.limit)&&"L"===n.limitType}function Uu(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function pm(n){for(const e of n.filters)if(e.S())return e.field;return null}function Bu(n){return null!==n.collectionGroup}function ip(n){const e=Ge(n);if(null===e.D){e.D=[];const t=pm(e),r=Uu(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new gc(t)),e.D.push(new gc(kr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new gc(kr.keyField(),u))}}}return e.D}function gs(n){const e=Ge(n);if(!e.C)if("F"===e.limitType)e.C=IE(e.path,e.collectionGroup,ip(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of ip(e))t.push(new gc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Vu(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new Vu(e.startAt.position,!e.startAt.inclusive):null;e.C=IE(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function SE(n,e,t){return new So(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gm(n,e){return ep(gs(n),gs(e))&&n.limitType===e.limitType}function cv(n){return`${Zs(gs(n))}|lt:${n.limitType}`}function xE(n){return`Query(target=${function Xf(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${$d(r.value)}`;var r}).join(", ")}]`),cc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>$d(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>$d(t)).join(",")),`Target(${e})`}(gs(n))}; limitType=${n.limitType})`}function mm(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Be.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=CE(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,ip(t),r)||t.endAt&&!function(o,u,d){const m=CE(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,ip(t),r)));var t,r}function ym(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ME(n){return(e,t)=>{let r=!1;for(const o of ip(n)){const u=NE(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function NE(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),E=d.data.field(o);return null!==m&&null!==E?Fu(m,E):Ye()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ye()}}function RE(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dc(e)?"-0":e}}function OE(n){return{integerValue:""+n}}function kE(n,e){return pE(e)?OE(e):RE(n,e)}class _m{constructor(){this._=void 0}}function Nb(n,e,t){return n instanceof qd?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof xo?dv(n,e):n instanceof ju?hv(n,e):function(r,o){const u=PE(r,o),d=fv(u)+fv(r.k);return rv(u)&&rv(r.k)?OE(d):RE(r.M,d)}(n,e)}function Rb(n,e,t){return n instanceof xo?dv(n,e):n instanceof ju?hv(n,e):t}function PE(n,e){return n instanceof mc?rv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class qd extends _m{}class xo extends _m{constructor(e){super(),this.elements=e}}function dv(n,e){const t=pv(e);for(const r of n.elements)t.some(o=>aa(o,r))||t.push(r);return{arrayValue:{values:t}}}class ju extends _m{constructor(e){super(),this.elements=e}}function hv(n,e){let t=pv(e);for(const r of n.elements)t=t.filter(o=>!aa(o,r));return{arrayValue:{values:t}}}class mc extends _m{constructor(e,t){super(),this.M=e,this.k=t}}function fv(n){return $n(n.integerValue||n.doubleValue)}function pv(n){return Qf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class sp{constructor(e,t){this.field=e,this.transform=t}}class LE{constructor(e,t){this.version=e,this.transformResults=t}}class ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class wm{}function op(n,e,t){n instanceof yc?function(r,o,u){const d=r.value.clone(),m=BE(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof No?function(r,o,u){if(!vm(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=BE(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(UE(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function gv(n,e,t){var o;n instanceof yc?function(r,o,u){if(!vm(r.precondition,o))return;const d=r.value.clone(),m=jE(r.fieldTransforms,u,o);d.setAll(m),o.convertToFoundDocument(VE(o),d).setHasLocalMutations()}(n,e,t):n instanceof No?function(r,o,u){if(!vm(r.precondition,o))return;const d=jE(r.fieldTransforms,u,o),m=o.data;m.setAll(UE(r)),m.setAll(d),o.convertToFoundDocument(VE(o),m).setHasLocalMutations()}(n,e,t):vm(n.precondition,o=e)&&o.convertToNoDocument(_t.min())}function mv(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=PE(r.transform,o||null);null!=u&&(null==t&&(t=Pr.empty()),t.set(r.field,u))}return t||null}function Mo(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&oa(t,r,(o,u)=>function FE(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof xo&&r instanceof xo||t instanceof ju&&r instanceof ju?oa(t.elements,r.elements,aa):t instanceof mc&&r instanceof mc?aa(t.k,r.k):t instanceof qd&&r instanceof qd);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function VE(n){return n.isFoundDocument()?n.version:_t.min()}class yc extends wm{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class No extends wm{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function UE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function BE(n,e,t){const r=new Map;Et(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,Rb(d,m,t[o]))}return r}function jE(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,Nb(u,d,e))}return r}class $u extends wm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class zd extends wm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Ob{constructor(e){this.count=e}}var lr,qt;function yv(n){switch(n){default:return Ye();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function Em(n){if(void 0===n)return Yn("GRPC error has no .code"),ae.UNKNOWN;switch(n){case lr.OK:return ae.OK;case lr.CANCELLED:return ae.CANCELLED;case lr.UNKNOWN:return ae.UNKNOWN;case lr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case lr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case lr.INTERNAL:return ae.INTERNAL;case lr.UNAVAILABLE:return ae.UNAVAILABLE;case lr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case lr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case lr.NOT_FOUND:return ae.NOT_FOUND;case lr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case lr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case lr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case lr.ABORTED:return ae.ABORTED;case lr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case lr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case lr.DATA_LOSS:return ae.DATA_LOSS;default:return Ye()}}(qt=lr||(lr={}))[qt.OK=0]="OK",qt[qt.CANCELLED=1]="CANCELLED",qt[qt.UNKNOWN=2]="UNKNOWN",qt[qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qt[qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qt[qt.NOT_FOUND=5]="NOT_FOUND",qt[qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",qt[qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",qt[qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",qt[qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qt[qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qt[qt.ABORTED=10]="ABORTED",qt[qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",qt[qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",qt[qt.INTERNAL=13]="INTERNAL",qt[qt.UNAVAILABLE=14]="UNAVAILABLE",qt[qt.DATA_LOSS=15]="DATA_LOSS";class Ba{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){uc(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return ev(this.inner)}size(){return this.innerSize}}class Jn{constructor(e,t){this.comparator=e,this.root=t||yi.EMPTY}insert(e,t){return new Jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yi.BLACK,null,null))}remove(e){return new Jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Im(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Im(this.root,e,this.comparator,!1)}getReverseIterator(){return new Im(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Im(this.root,e,this.comparator,!0)}}class Im{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yi{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:yi.RED,this.left=null!=o?o:yi.EMPTY,this.right=null!=u?u:yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new yi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return yi.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ye();const e=this.left.check();if(e!==this.right.check())throw Ye();return e+(this.isRed()?0:1)}}yi.EMPTY=null,yi.RED=!0,yi.BLACK=!1,yi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye()}get value(){throw Ye()}get color(){throw Ye()}get left(){throw Ye()}get right(){throw Ye()}copy(n,e,t,r,o){return this}insert(n,e,t){return new yi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pn{constructor(e){this.comparator=e,this.data=new Jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dm(this.data.getIterator())}getIteratorFrom(e){return new Dm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pn(this.comparator);return t.data=e,t}}class Dm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _c(n){return n.hasNext()?n.getNext():void 0}const _v=new Jn(Be.comparator);function Wi(){return _v}const kb=new Jn(Be.comparator);function vv(){return kb}function ap(){return new Ba(n=>n.toString(),(n,e)=>n.isEqual(e))}const Pb=new Jn(Be.comparator),$E=new pn(Be.comparator);function rn(...n){let e=$E;for(const t of n)e=e.add(t);return e}const HE=new pn(Ft);function bm(){return HE}class Wd{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Zd.createSynthesizedTargetChangeForCurrentChange(e,t)),new Wd(_t.min(),r,bm(),Wi(),rn())}}class Zd{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Zd(ar.EMPTY_BYTE_STRING,t,rn(),rn(),rn())}}class Cm{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class wv{constructor(e,t){this.targetId=e,this.$=t}}class Ev{constructor(e,t,r=ar.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class GE{constructor(){this.B=0,this.L=_i(),this.U=ar.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=rn(),t=rn(),r=rn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Ye()}}),new Zd(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=_i()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class qE{constructor(e){this.nt=e,this.st=new Map,this.it=Wi(),this.rt=Iv(),this.ot=new pn(Ft)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:Ye()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(av(u))if(0===r){const d=new Be(u.path);this.ct(t,d,Dn.newNoDocument(d,_t.min()))}else Et(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&av(m.target)){const E=new Be(m.target.path);null!==this.it.get(E)||this.It(d,E)||this.ct(d,E,Dn.newNoDocument(E,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=rn();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(E=>{const C=this.wt(E);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new Wd(e,t,this.ot,this.it,r);return this.it=Wi(),this.rt=Iv(),this.ot=new pn(Ft),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new GE,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new pn(Ft),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new GE),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Iv(){return new Jn(Be.comparator)}function _i(){return new Jn(Be.comparator)}const Kd={asc:"ASCENDING",desc:"DESCENDING"},Fb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Lb{constructor(e,t){this.databaseId=e,this.N=t}}function Tm(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yd(n,e){return n.N?e.toBase64():e.toUint8Array()}function Vb(n,e){return Tm(n,e.toTimestamp())}function cr(n){return Et(!!n),_t.fromTimestamp(function(e){const t=La(e);return new Qn(t.seconds,t.nanos)}(n))}function Dv(n,e){return(t=n,new Kt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function bv(n){const e=Kt.fromString(n);return Et(XE(e)),e}function up(n,e){return Dv(n.databaseId,e.path)}function ua(n,e){const t=bv(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(cp(t))}function lp(n,e){return Dv(n.databaseId,e)}function Cv(n){const e=bv(n);return 4===e.length?Kt.emptyPath():cp(e)}function Qd(n){return new Kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cp(n){return Et(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Am(n,e,t){return{name:up(n,e),fields:t.value.mapValue.fields}}function Ub(n,e,t){const r=ua(n,e.name),o=cr(e.updateTime),u=new Pr({mapValue:{fields:e.fields}}),d=Dn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Jd(n,e){let t;if(e instanceof yc)t={update:Am(n,e.key,e.value)};else if(e instanceof $u)t={delete:up(n,e.key)};else if(e instanceof No)t={update:Am(n,e.key,e.data),updateMask:$b(e.fieldMask)};else{if(!(e instanceof zd))return Ye();t={verify:up(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof qd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof xo)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ju)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof mc)return{fieldPath:u.field.canonicalString(),increment:d.k};throw Ye()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Vb(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Ye()),t;var o}function Xd(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?ur.updateTime(cr(o.updateTime)):void 0!==o.exists?ur.exists(o.exists):ur.none():ur.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(Et("REQUEST_TIME"===d.setToServerValue),m=new qd):"appendMissingElements"in d?m=new xo(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new ju(d.removeAllFromArray.values||[]):"increment"in d?m=new mc(u,d.increment):Ye();const E=kr.fromServerFormat(d.fieldPath);return new sp(E,m)}(n,o)):[];var o;if(e.update){const o=ua(n,e.update.name),u=new Pr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new lc((e.updateMask.fieldPaths||[]).map(C=>kr.fromServerFormat(C)));return new No(o,u,d,t,r)}return new yc(o,u,t,r)}if(e.delete){const o=ua(n,e.delete);return new $u(o,t)}if(e.verify){const o=ua(n,e.verify);return new zd(o,t)}return Ye()}function ZE(n,e){return{documents:[lp(n,e.path)]}}function Sm(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=lp(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=lp(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0===E.length)return;const C=E.map(M=>function(R){if("=="===R.op){if(_E(R.value))return{unaryFilter:{field:vc(R.field),op:"IS_NAN"}};if(iv(R.value))return{unaryFilter:{field:vc(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(_E(R.value))return{unaryFilter:{field:vc(R.field),op:"IS_NOT_NAN"}};if(iv(R.value))return{unaryFilter:{field:vc(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vc(R.field),op:YE(R.op),value:R.value}}}(M));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(E){if(0!==E.length)return E.map(C=>{return{field:vc((M=C).field),direction:jb(M.dir)};var M})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.N||cc(C)?C:{value:C});var C,m,E;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function xm(n){let e=Cv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Et(1===r);const M=t.from[0];M.allDescendants?o=M.collectionId:e=e.child(M.collectionId)}let u=[];t.where&&(u=KE(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(M=>{return new gc(eh((R=M).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let m=null;t.limit&&(m=function(M){let R;return R="object"==typeof M?M.value:M,cc(R)?null:R}(t.limit));let E=null;var M;t.startAt&&(E=new Vu((M=t.startAt).values||[],!!M.before));let C=null;return t.endAt&&(C=function(M){return new Vu(M.values||[],!M.before)}(t.endAt)),AE(e,o,d,u,m,"F",E,C)}function KE(n){return n?void 0!==n.unaryFilter?[JE(n)]:void 0!==n.fieldFilter?[QE(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>KE(e)).reduce((e,t)=>e.concat(t)):Ye():[]}function jb(n){return Kd[n]}function YE(n){return Fb[n]}function vc(n){return{fieldPath:n.canonicalString()}}function eh(n){return kr.fromServerFormat(n.fieldPath)}function QE(n){return ei.create(eh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ye()}}(n.fieldFilter.op),n.fieldFilter.value)}function JE(n){switch(n.unaryFilter.op){case"IS_NAN":const e=eh(n.unaryFilter.field);return ei.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=eh(n.unaryFilter.field);return ei.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=eh(n.unaryFilter.field);return ei.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=eh(n.unaryFilter.field);return ei.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ye()}}function $b(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function XE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Dr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Tv(e)),e=Hb(n.get(t),e);return Tv(e)}function Hb(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Tv(n){return n+"\x01\x01"}function Ks(n){const e=n.length;if(Et(e>=2),2===e)return Et("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Kt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&Ye(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let E;0===o.length?E=m:(o+=m,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:Ye()}u=d+2}return new Kt(r)}const Av=["userId","batchId"];function dp(n,e){return[n,Dr(e)]}function eI(n,e,t){return[n,Dr(e),t]}const Gb={},yA=["prefixPath","collectionGroup","readTime","documentId"],tI=["prefixPath","collectionGroup","documentId"],_A=["collectionGroup","readTime","prefixPath","documentId"],vA=["canonicalId","targetId"],wA=["targetId","path"],EA=["path","targetId"],IA=["collectionId","parent"],DA=["indexId","uid"],bA=["uid","sequenceNumber"],CA=["indexId","uid","arrayValue","directionalValue","documentKey"],Mm=["indexId","uid","documentKey"],TA=["userId","collectionPath","documentId"],nI=["userId","collectionPath","largestBatchId"],Sv=["userId","collectionGroup","largestBatchId"],xv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rI=[...xv,"documentOverlays"],qb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Mv=[...qb,"indexConfiguration","indexState","indexEntries"],Nv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},E=>r(E))}),d=!0,u===o&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(o=>o?de.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class Rv{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ir,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new wc(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=Ov(r.target.error);this.At.reject(new wc(e,o))}}static open(e,t,r,o){try{return new Rv(t,e.transaction(o,r))}catch(u){throw new wc(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new AA(t)}}class Ro{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Ro.Vt((0,jt.z$)())&&Yn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),th(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,jt.hl)())return!1;if(Ro.St())return!0;const e=(0,jt.z$)(),t=Ro.Vt(e),r=0<t&&t<10,o=Ro.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ye.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new wc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new xe(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new wc(e,m))},u.onupgradeneeded=d=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ye.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const E=Rv.open(u.db,e,d?"readonly":"readwrite",r),C=o(E).next(M=>(E.bt(),M)).catch(M=>(E.abort(M),de.reject(M))).toPromise();return C.catch(()=>{}),yield E.Rt,C}catch(E){const C="FirebaseError"!==E.name&&m<3;if(ke("SimpleDb","Transaction failed with error:",E.message,"Retrying:",C),u.close(),!C)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class zb{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return th(this.Ft.delete())}}class wc extends xe{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ec(n){return"IndexedDbTransactionError"===n.name}class AA{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),th(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),th(this.store.add(e))}get(e){return th(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),th(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),th(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Gt(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new de((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Gt(o,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Gt(o,t)}zt(e){const t=this.cursor({});return new de((r,o)=>{t.onerror=u=>{const d=Ov(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Gt(e,t){const r=[];return new de((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const E=new zb(m),C=t(m.primaryKey,m.value,E);if(C instanceof de){const M=C.catch(R=>(E.done(),de.reject(R)));r.push(M)}E.isDone?o():null===E.Lt?m.continue():m.continue(E.Lt)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function th(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Ov(r.target.error);t(o)}})}let Wb=!1;function Ov(n){const e=Ro.Vt((0,jt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Wb||(Wb=!0,setTimeout(()=>{throw r},0)),r}}return n}class sI extends iI{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Fr(n,e){const t=Ge(n);return Ro.xt(t.Ht,e)}class oI{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&op(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&gv(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&gv(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(_t.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rn())}isEqual(e){return this.batchId===e.batchId&&oa(this.mutations,e.mutations,(t,r)=>Mo(t,r))&&oa(this.baseMutations,e.baseMutations,(t,r)=>Mo(t,r))}}class kv{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Et(e.mutations.length===r.length);let o=Pb;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new kv(e,t,r,o)}}class hp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Hu{constructor(e,t,r,o,u=_t.min(),d=_t.min(),m=ar.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Hu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Hu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Hu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ys{constructor(e){this.Jt=e}}function Nm(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Rm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:up(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Tm(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ic(e.version)};else{if(!e.isUnknownDocument())return Ye();r.unknownDocument={path:t.path.toArray(),version:Ic(e.version)}}var o,u;return r}function Rm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ic(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ja(n){const e=new Qn(n.seconds,n.nanoseconds);return _t.fromTimestamp(e)}function Dc(n,e){const t=(e.baseMutations||[]).map(u=>Xd(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Xd(n.Jt,u)),o=Qn.fromMillis(e.localWriteTimeMs);return new oI(e.batchId,o,t,r)}function nh(n){const e=ja(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ja(n.lastLimboFreeSnapshotVersion):_t.min();let r;var o;return void 0!==n.query.documents?(Et(1===(o=n.query).documents.length),r=gs(rp(Cv(o.documents[0])))):r=gs(xm(n.query)),new Hu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ar.fromBase64String(n.resumeToken))}function aI(n,e){const t=Ic(e.snapshotVersion),r=Ic(e.lastLimboFreeSnapshotVersion);let o;o=av(e.target)?ZE(n.Jt,e.target):Sm(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Zs(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Om(n){const e=xm({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?SE(e,e.limit,"L"):e}function Pv(n,e){return new hp(e.largestBatchId,Xd(n.Jt,e.overlayMutation))}function uI(n,e){const t=e.path.lastSegment();return[n,Dr(e.path.popLast()),t]}class Kb{getBundleMetadata(e,t){return km(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:ja(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return km(e).put({bundleId:(r=t).id,createTime:Ic(cr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Qs(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Om(o.bundledQuery),readTime:ja(o.readTime)};var o})}saveNamedQuery(e,t){return Qs(e).put({name:(r=t).name,readTime:Ic(cr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function km(n){return Fr(n,"bundles")}function Qs(n){return Fr(n,"namedQueries")}class Fv{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Fv(e,t.uid||"")}getOverlay(e,t){return Pm(e).get(uI(this.userId,t)).next(r=>r?Pv(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new hp(t,d);o.push(this.Xt(e,m))}),de.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Dr(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(Pm(e).Qt("collectionPathOverlayIndex",m))}),de.waitFor(u)}getOverlaysForCollection(e,t,r){const o=ap(),u=Dr(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Pm(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const E of m){const C=Pv(this.M,E);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=ap();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Pm(e).Wt({index:"collectionGroupOverlayIndex",range:m},(E,C,M)=>{const R=Pv(this.M,C);u.size()<o||R.largestBatchId===d?(u.set(R.getKey(),R),d=R.largestBatchId):M.done()}).next(()=>u)}Xt(e,t){return Pm(e).put(function(r,o,u){const[d,m,E]=uI(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:E,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Jd(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Pm(n){return Fr(n,"documentOverlays")}class rh{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se($n(e.integerValue));else if("doubleValue"in e){const r=$n(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),dc(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Va(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?am(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Ye()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Be.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function lI(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function cI(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=lI(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}rh.fe=new rh;class Yb{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=cI(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=cI(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class dI{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Qb{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Lv{constructor(){this.De=new Yb,this.Ce=new dI(this.De),this.xe=new Qb(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class $a{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new $a(this.indexId,this.documentKey,this.arrayValue,r)}}function bc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=hI(n.arrayValue,e.arrayValue),0!==t?t:(t=hI(n.directionalValue,e.directionalValue),0!==t?t:Be.comparator(n.documentKey,e.documentKey)))}function hI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Jb{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=ov(e);if(void 0!==t&&!this.Be(t))return!1;const r=pc(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class fI{constructor(){this.qe=new fp}addToCollectionParentIndex(e,t){return this.qe.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getFieldIndex(e,t){return de.resolve(null)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class fp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new pn(Kt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new pn(Kt.comparator)).toArray()}}const ih=new Uint8Array(0);class pI{constructor(e){this.user=e,this.Ge=new fp,this.Ke=new Ba(t=>Zs(t),(t,r)=>ep(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const u={collectionId:r,parent:Dr(o)};return gI(e).put(u)}return de.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[hE(t),""],!1,!0);return gI(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Ks(d.parent))}return r})}addFieldIndex(e,t){const r=pp(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=pp(e),o=Fm(e),u=sh(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=sh(e);let o=!0;const u=new Map;return de.forEach(this.Qe(t),d=>this.getFieldIndex(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=rn();return de.forEach(u,(m,E)=>{var C;ke("IndexedDbIndexManager",`Using index ${C=m,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(ct=>`${ct.fieldPath}:${ct.kind}`).join(",")}`} to execute ${Zs(t)}`);const M=function(ct,mn){const Dt=ov(mn);if(void 0===Dt)return null;for(const $t of tp(ct,Dt.fieldPath))switch($t.op){case"array-contains-any":return $t.value.arrayValue.values||[];case"array-contains":return[$t.value]}return null}(E,m),R=function(ct,mn){const Dt=new Map;for(const $t of pc(mn))for(const Ht of tp(ct,$t.fieldPath))switch(Ht.op){case"==":case"in":Dt.set($t.fieldPath.canonicalString(),Ht.value);break;case"not-in":case"!=":return Dt.set($t.fieldPath.canonicalString(),Ht.value),Array.from(Dt.values())}return null}(E,m),H=function(ct,mn){const Dt=[];let $t=!0;for(const Wu of pc(mn)){let ko,Mp=!0;for(const ti of tp(ct,Wu.fieldPath)){let Xn,ey=!0;switch(ti.op){case"<":case"<=":Xn="nullValue"in(Ht=ti.value)?mE:"booleanValue"in Ht?{booleanValue:!1}:"integerValue"in Ht||"doubleValue"in Ht?{doubleValue:NaN}:"timestampValue"in Ht?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Ht?{stringValue:""}:"bytesValue"in Ht?{bytesValue:""}:"referenceValue"in Ht?fc(Ua.empty(),Be.empty()):"geoPointValue"in Ht?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Ht?{arrayValue:{}}:"mapValue"in Ht?{mapValue:{}}:Ye();break;case"==":case"in":case">=":Xn=ti.value;break;case">":Xn=ti.value,ey=!1;break;case"!=":case"not-in":Xn=mE}um(ko,Xn)===Xn&&(ko=Xn,Mp=ey)}if(null!==ct.startAt)for(let ti=0;ti<ct.orderBy.length;++ti)if(ct.orderBy[ti].field.isEqual(Wu.fieldPath)){const Xn=ct.startAt.position[ti];um(ko,Xn)===Xn&&(ko=Xn,Mp=ct.startAt.inclusive);break}if(void 0===ko)return null;Dt.push(ko),$t&&($t=Mp)}var Ht;return new Vu(Dt,$t)}(E,m),Z=function(ct,mn){const Dt=[];let $t=!0;for(const Wu of pc(mn)){let ko,Mp=!0;for(const ti of tp(ct,Wu.fieldPath)){let Xn,ey=!0;switch(ti.op){case">=":case">":Xn="nullValue"in(Ht=ti.value)?{booleanValue:!1}:"booleanValue"in Ht?{doubleValue:NaN}:"integerValue"in Ht||"doubleValue"in Ht?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Ht?{stringValue:""}:"stringValue"in Ht?{bytesValue:""}:"bytesValue"in Ht?fc(Ua.empty(),Be.empty()):"referenceValue"in Ht?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Ht?{arrayValue:{}}:"arrayValue"in Ht?{mapValue:{}}:"mapValue"in Ht?gE:Ye(),ey=!1;break;case"==":case"in":case"<=":Xn=ti.value;break;case"<":Xn=ti.value,ey=!1;break;case"!=":case"not-in":Xn=gE}sv(ko,Xn)===Xn&&(ko=Xn,Mp=ey)}if(null!==ct.endAt)for(let ti=0;ti<ct.orderBy.length;++ti)if(ct.orderBy[ti].field.isEqual(Wu.fieldPath)){const Xn=ct.endAt.position[ti];sv(ko,Xn)===Xn&&(ko=Xn,Mp=ct.endAt.inclusive);break}if(void 0===ko)return null;Dt.push(ko),$t&&($t=Mp)}var Ht;return new Vu(Dt,$t)}(E,m),fe=this.je(m,E,H),Fe=this.je(m,E,Z),tt=this.We(m,E,R),zt=this.ze(m.indexId,M,fe,!!H&&H.inclusive,Fe,!!Z&&Z.inclusive,tt);return de.forEach(zt,ct=>r.Kt(ct,t.limit).next(mn=>{mn.forEach(Dt=>{d=d.add(new Be(Ks(Dt.documentKey)))})}))}).next(()=>d)}return de.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,o,u,d,m){const E=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),C=E/(null!=t?t.length:1),M=[];for(let R=0;R<E;++R){const H=t?this.He(t[R/C]):ih,Z=r?this.Je(e,H,r[R%C],o):this.Ye(e),fe=u?this.Xe(e,H,u[R%C],d):this.Ye(e+1);M.push(...this.createRange(Z,fe,m.map(Fe=>this.Je(e,H,Fe,!0))))}return M}Je(e,t,r,o){const u=new $a(e,Be.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new $a(e,Be.empty(),t,r);return o?u.ke():u}Ye(e){return new $a(e,Be.empty(),ih,ih)}getFieldIndex(e,t){const r=new Jb(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{const d=u.filter(m=>r.$e(m));return d.sort((m,E)=>E.fields.length-m.fields.length),d.length>0?d[0]:null})}Ze(e,t){const r=new Lv;for(const o of pc(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);rh.fe.Zt(u,d)}return r.Se()}He(e){const t=new Lv;return rh.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new Lv);let u=0;for(const d of pc(e)){const m=r[u++];for(const E of o)if(this.tn(t,d.fieldPath)&&Qf(m))o=this.en(o,d,m);else{const C=E.Ne(d.kind);rh.fe.Zt(m,C)}}return this.nn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const E=new Lv;E.seed(m.Se()),rh.fe.Zt(d,E.Ne(t.kind)),u.push(E)}return u}tn(e,t){return!!e.filters.find(r=>r instanceof ei&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=pp(e),o=Fm(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return de.forEach(u,m=>o.get([m.indexId,this.uid]).next(E=>{d.push(function(C,M){const R=M?new Gd(M.sequenceNumber,new Lu(ja(M.readTime),new Be(Ks(M.documentKey)),M.largestBatchId)):Gd.empty(),H=C.fields.map(([Z,fe])=>new lm(kr.fromServerFormat(Z),fe));return new Hd(C.indexId,C.collectionGroup,H,R)}(m,E))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Ft(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=pp(e),u=Fm(e);return this.sn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>de.forEach(m,E=>{return u.put({indexId:E.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:Ic((H=r).readTime),documentKey:Dr(H.documentKey.path),largestBatchId:H.largestBatchId});var H})))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?de.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),de.forEach(m,E=>this.rn(e,o,E).next(C=>{const M=this.on(u,E);return C.isEqual(M)?de.resolve():this.un(e,u,C,M)}))))})}an(e,t,r){return sh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Dr(t.key.path)})}cn(e,t,r){return sh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Dr(t.key.path)])}rn(e,t,r){const o=sh(e);let u=new pn(bc);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Dr(t.path)])},(d,m)=>{u=u.add(new $a(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}on(e,t){let r=new pn(bc);const o=this.Ze(t,e);if(null==o)return r;const u=ov(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Qf(d))for(const m of d.arrayValue.values||[])r=r.add(new $a(t.indexId,e.key,this.He(m),o))}else r=r.add(new $a(t.indexId,e.key,ih,o));return r}un(e,t,r,o){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(d,m,E,C,M){const R=d.getIterator(),H=m.getIterator();let Z=_c(R),fe=_c(H);for(;Z||fe;){let Fe=!1,tt=!1;if(Z&&fe){const zt=E(Z,fe);zt<0?tt=!0:zt>0&&(Fe=!0)}else null!=Z?tt=!0:Fe=!0;Fe?(C(fe),fe=_c(H)):tt?(M(Z),Z=_c(R)):(Z=_c(R),fe=_c(H))}}(r,o,bc,d=>{u.push(this.an(e,t,d))},d=>{u.push(this.cn(e,t,d))}),de.waitFor(u)}sn(e){let t=1;return Fm(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>bc(d,m)).filter((d,m,E)=>!m||0!==bc(d,E[m-1]));const o=[];o.push(e);for(const d of r){const m=bc(d,e),E=bc(d,t);if(0===m)o[0]=e.ke();else if(m>0&&E<0)o.push(d),o.push(d.ke());else if(E>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,""],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,""]));return u}}function gI(n){return Fr(n,"collectionParents")}function sh(n){return Fr(n,"indexEntries")}function pp(n){return Fr(n,"indexConfiguration")}function Fm(n){return Fr(n,"indexState")}const mI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ms{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ms(e,ms.DEFAULT_COLLECTION_PERCENTILE,ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Xb(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const E=r.Wt({range:d},(M,R,H)=>(m++,H.delete()));u.push(E.next(()=>{Et(1===m)}));const C=[];for(const M of t.mutations){const R=eI(e,M.key.path,t.batchId);u.push(o.delete(R)),C.push(M.key)}return de.waitFor(u).next(()=>C)}function gp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ye();e=n.noDocument}return JSON.stringify(e).length}ms.DEFAULT_COLLECTION_PERCENTILE=10,ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ms.DEFAULT=new ms(41943040,ms.DEFAULT_COLLECTION_PERCENTILE,ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ms.DISABLED=new ms(-1,0,0);class Vv{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.hn={}}static Yt(e,t,r,o){Et(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Vv(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gu(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=mp(e),d=Gu(e);return d.add({}).next(m=>{Et("number"==typeof m);const E=new oI(m,t,r,o),C=function(H,Z,fe){const Fe=fe.baseMutations.map(zt=>Jd(H.Jt,zt)),tt=fe.mutations.map(zt=>Jd(H.Jt,zt));return{userId:Z,batchId:fe.batchId,localWriteTimeMs:fe.localWriteTime.toMillis(),baseMutations:Fe,mutations:tt}}(this.M,this.userId,E),M=[];let R=new pn((H,Z)=>Ft(H.canonicalString(),Z.canonicalString()));for(const H of o){const Z=eI(this.userId,H.key.path,m);R=R.add(H.key.path.popLast()),M.push(d.put(C)),M.push(u.put(Z,Gb))}return R.forEach(H=>{M.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.hn[m]=E.keys()}),de.waitFor(M).next(()=>E)})}lookupMutationBatch(e,t){return Gu(e).get(t).next(r=>r?(Et(r.userId===this.userId),Dc(this.M,r)):null)}ln(e,t){return this.hn[t]?de.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.hn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Gu(e).Wt({index:"userMutationsIndex",range:o},(d,m,E)=>{m.userId===this.userId&&(Et(m.batchId>=r),u=Dc(this.M,m)),E.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Gu(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gu(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Dc(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=dp(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return mp(e).Wt({range:o},(d,m,E)=>{const[C,M,R]=d,H=Ks(M);if(C===this.userId&&t.path.isEqual(H))return Gu(e).get(R).next(Z=>{if(!Z)throw Ye();Et(Z.userId===this.userId),u.push(Dc(this.M,Z))});E.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(Ft);const o=[];return t.forEach(u=>{const d=dp(this.userId,u.path),m=IDBKeyRange.lowerBound(d),E=mp(e).Wt({range:m},(C,M,R)=>{const[H,Z,fe]=C,Fe=Ks(Z);H===this.userId&&u.path.isEqual(Fe)?r=r.add(fe):R.done()});o.push(E)}),de.waitFor(o).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=dp(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new pn(Ft);return mp(e).Wt({range:d},(E,C,M)=>{const[R,H,Z]=E,fe=Ks(H);R===this.userId&&r.isPrefixOf(fe)?fe.length===o&&(m=m.add(Z)):M.done()}).next(()=>this.fn(e,m))}fn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Gu(e).get(u).next(d=>{if(null===d)throw Ye();Et(d.userId===this.userId),r.push(Dc(this.M,d))}))}),de.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Xb(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),de.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return mp(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const E=Ks(u[1]);o.push(E)}else m.done()}).next(()=>{Et(0===o.length)})})}containsKey(e,t){return yI(e,this.userId,t)}_n(e){return eC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function yI(n,e,t){const r=dp(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return mp(n).Wt({range:u,jt:!0},(m,E,C)=>{const[M,R,H]=m;M===e&&R===o&&(d=!0),C.done()}).next(()=>d)}function Gu(n){return Fr(n,"mutations")}function mp(n){return Fr(n,"documentMutations")}function eC(n){return Fr(n,"mutationQueues")}class oh{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new oh(0)}static gn(){return new oh(-1)}}class SA{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new oh(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>_t.fromTimestamp(new Qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.pn(e,o)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>yp(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Et(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return yp(e).Wt((d,m)=>{const E=nh(m);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,u.push(this.removeTargetData(e,E)))}).next(()=>de.waitFor(u)).next(()=>o)}forEachTarget(e,t){return yp(e).Wt((r,o)=>{const u=nh(o);t(u)})}yn(e){return _I(e).get("targetGlobalKey").next(t=>(Et(null!==t),t))}pn(e,t){return _I(e).put("targetGlobalKey",t)}In(e,t){return yp(e).put(aI(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Zs(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return yp(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,E)=>{const C=nh(m);ep(t,C.target)&&(u=C,E.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Oo(e);return t.forEach(d=>{const m=Dr(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),de.waitFor(o)}removeMatchingKeys(e,t,r){const o=Oo(e);return de.forEach(t,u=>{const d=Dr(u.path);return de.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Oo(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Oo(e);let u=rn();return o.Wt({range:r,jt:!0},(d,m,E)=>{const C=Ks(d[1]),M=new Be(C);u=u.add(M)}).next(()=>u)}containsKey(e,t){const r=Dr(t.path),o=IDBKeyRange.bound([r],[hE(r)],!1,!0);let u=0;return Oo(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],E,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return yp(e).get(t).next(r=>r?nh(r):null)}}function yp(n){return Fr(n,"targets")}function _I(n){return Fr(n,"targetGlobal")}function Oo(n){return Fr(n,"targetDocuments")}function Cc(n){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,ye.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==Nv)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),Uv.apply(this,arguments)}function Bv([n,e],[t,r]){const o=Ft(n,t);return 0===o?Ft(e,r):o}class Tc{constructor(e){this.En=e,this.buffer=new pn(Bv),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Bv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vI{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ye.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Ec(o)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Cc(o)}yield t.vn(e)}))}}class jv{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(mi.A);const r=new Tc(t);return this.Sn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Sn.Cn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(mI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mI):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,o,u,d,m,E,C;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,d=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,m=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(C=Date.now(),Ud()<=ka.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-M}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(E-m)+`ms\n\tRemoved ${R} documents in `+(C-E)+`ms\nTotal Duration: ${C-M}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}class $v{constructor(e,t){this.db=e,this.garbageCollector=new jv(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,o)=>t(o))}addReference(e,t,r){return Lm(e,r)}removeReference(e,t,r){return Lm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Lm(e,t)}Mn(e,t){return function(r,o){let u=!1;return eC(r).zt(d=>yI(r,d,o).next(m=>(m&&(u=!0),de.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.kn(e,(d,m)=>{if(m<=t){const E=this.Mn(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,_t.min()),Oo(e).delete([0,Dr(d.path)])))});o.push(E)}}).next(()=>de.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Lm(e,t)}kn(e,t){const r=Oo(e);let o,u=mi.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:E,sequenceNumber:C})=>{0===d?(u!==mi.A&&t(new Be(Ks(o)),u),u=C,o=E):u=mi.A}).next(()=>{u!==mi.A&&t(new Be(Ks(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lm(n,e){return Oo(n).put((r=n.currentSequenceNumber,{targetId:0,path:Dr(e.path),sequenceNumber:r}));var r}class Vm{constructor(){this.changes=new Ba(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Hv{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ah(e).put(r)}removeEntry(e,t,r){return ah(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Rm(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=Dn.newInvalidDocument(t);return ah(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Bm(t))},(o,u)=>{r=this.Fn(t,u)}).next(()=>r)}$n(e,t){let r={size:0,document:Dn.newInvalidDocument(t)};return ah(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Bm(t))},(o,u)=>{r={document:this.Fn(t,u),size:gp(u)}}).next(()=>r)}getEntries(e,t){let r=Wi();return this.Bn(e,t,(o,u)=>{const d=this.Fn(o,u);r=r.insert(o,d)}).next(()=>r)}Ln(e,t){let r=Wi(),o=new Jn(Be.comparator);return this.Bn(e,t,(u,d)=>{const m=this.Fn(u,d);r=r.insert(u,m),o=o.insert(u,gp(d))}).next(()=>({documents:r,Un:o}))}Bn(e,t,r){if(t.isEmpty())return de.resolve();let o=new pn(Gv);t.forEach(E=>o=o.add(E));const u=IDBKeyRange.bound(Bm(o.first()),Bm(o.last())),d=o.getIterator();let m=d.getNext();return ah(e).Wt({index:"documentKeyIndex",range:u},(E,C,M)=>{const R=Be.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&Gv(m,R)<0;)r(m,null),m=d.getNext();m&&m.isEqual(R)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?M.Ut(Bm(m)):M.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Rm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ah(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=Wi();for(const E of d){const C=this.Fn(Be.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=Wi();const d=nC(t,r),m=nC(t,Lu.max());return ah(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(E,C,M)=>{const R=this.Fn(Be.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(R.key,R),u.size===o&&M.done()}).next(()=>u)}newChangeBuffer(e){return new Um(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tC(e).get("remoteDocumentGlobalKey").next(t=>(Et(!!t),t))}On(e,t){return tC(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function Zb(n,e){let t;if(e.document)t=Ub(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),o=ja(e.noDocument.readTime);t=Dn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ye();{const r=Be.fromSegments(e.unknownDocument.path),o=ja(e.unknownDocument.version);t=Dn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Qn(r[0],r[1]);return _t.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(_t.min()))return r}return Dn.newInvalidDocument(e)}}class Um extends Vm{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new Ba(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new pn((u,d)=>Ft(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.qn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const E=Nm(this.qn.M,d);o=o.add(u.path.popLast()),r+=gp(E)-m.size,t.push(this.qn.addEntry(e,u,E))}else if(r-=m.size,this.trackRemovals){const E=Nm(this.qn.M,d.convertToNoDocument(_t.min()));t.push(this.qn.addEntry(e,u,E))}}),o.forEach(u=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.qn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function tC(n){return Fr(n,"remoteDocumentGlobal")}function ah(n){return Fr(n,"remoteDocumentsV14")}function Bm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nC(n,e){const t=e.documentKey.path.toArray();return[n,Rm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Gv(n,e){const t=n.path.length-e.path.length;return 0!==t?t:Be.comparator(n,e)}class rC{constructor(e){this.M=e}kt(e,t,r,o){const u=new Rv("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Av,{unique:!0}),m.createObjectStore("documentMutations"),wI(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=de.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),wI(e)),d=d.next(()=>function(m){const E=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,E){return E.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Av,{unique:!0});const M=E.store("mutations"),R=C.map(H=>M.put(H));return de.waitFor(R)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Kn(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(u)))),r<7&&o>=7&&(d=d.next(()=>this.jn(u))),r<8&&o>=8&&(d=d.next(()=>this.Wn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.zn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const E=m.createObjectStore("documentOverlays",{keyPath:TA});E.createIndex("collectionPathOverlayIndex",nI,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",Sv,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const E=m.createObjectStore("remoteDocumentsV14",{keyPath:yA});E.createIndex("documentKeyIndex",tI),E.createIndex("collectionGroupIndex",_A)}(e)).next(()=>this.Hn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:DA}).createIndex("sequenceNumberIndex",bA,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:CA}).createIndex("documentKeyIndex",Mm,{unique:!1})}(e)})),d}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=gp(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>de.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>de.forEach(m,E=>{Et(E.userId===u.userId);const C=Dc(this.M,E);return Xb(e,u.userId,C).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,m)=>{const E=new Kt(d),C=[0,Dr(E)];u.push(t.get(C).next(M=>M?de.resolve():t.put({targetId:0,path:Dr(E),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>de.waitFor(u))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:IA});const r=t.store("collectionParents"),o=new fp,u=d=>{if(o.add(d)){const m=d.lastSegment(),E=d.popLast();return r.put({collectionId:m,parent:Dr(E)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const E=new Kt(d);return u(E.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,E],C)=>{const M=Ks(m);return u(M.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=nh(o),d=aI(this.M,u);return t.put(d)})}Hn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),E=(C=d,C.document?new Be(Kt.fromString(C.document.name).popFirst(5)):C.noDocument?Be.fromSegments(C.noDocument.path):C.unknownDocument?Be.fromSegments(C.unknownDocument.path):Ye()).path.toArray();var C;const M={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(M))}).next(()=>de.waitFor(o))}}function wI(n){n.createObjectStore("targetDocuments",{keyPath:wA}).createIndex("documentTargetsIndex",EA,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vA,{unique:!0}),n.createObjectStore("targetGlobal")}const qv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class zv{constructor(e,t,r,o,u,d,m,E,C,M,R=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=u,this.window=d,this.document=m,this.Yn=C,this.Xn=M,this.Zn=R,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=H=>Promise.resolve(),!zv.vt())throw new xe(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $v(this,o),this.cs=t+"main",this.M=new Ys(E),this.hs=new Ro(this.cs,this.Zn,new rC(this.M)),this.ls=new SA(this.referenceDelegate,this.M),this.fs=new Hv(this.M),this.ds=new Kb,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===M&&Yn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ae.FAILED_PRECONDITION,qv);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new mi(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,ye.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_p(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(Ec(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return uh(e).get("owner").next(t=>de.resolve(this.bs(t)))}Ps(e){return _p(e).delete(this.clientId)}Vs(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Fr(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ss(u,18e5),m=u.filter(E=>-1===d.indexOf(E));return de.forEach(m,E=>o.delete(E.clientId)).next(()=>m)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?de.resolve(!0):uh(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new xe(ae.FAILED_PRECONDITION,qv);return!1}}return!(!this.networkEnabled||!this.inForeground)||_p(e).qt().next(r=>void 0===this.Ss(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new sI(t,mi.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>_p(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return Vv.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new pI(e)}getDocumentOverlayCache(e){return Fv.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.Zn)?Mv:13===d?qb:12===d?rI:11===d?xv:void Ye();var d;let m;return this.hs.runTransaction(e,o,u,E=>(m=new sI(E,this.ts?this.ts.next():mi.A),"readwrite-primary"===t?this.Ts(m).next(C=>!!C||this.Es(m)).next(C=>{if(!C)throw Yn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new xe(ae.FAILED_PRECONDITION,Nv);return r(m)}).next(C=>this.Rs(m).next(()=>C)):this.Fs(m).next(()=>r(m)))).then(E=>(m.raiseOnCommittedEvent(),E))}Fs(e){return uh(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ae.FAILED_PRECONDITION,qv)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return uh(e).put("owner",t)}static vt(){return Ro.vt()}As(e){const t=uh(e);return t.get("owner").next(r=>this.bs(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(Yn(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,jt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Yn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){Yn("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function uh(n){return Fr(n,"owner")}function _p(n){return Fr(n,"clientMetadata")}function jm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class iC{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}Us(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return Be.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Qs(e,t.path):Bu(t)?this.js(e,t,r):this.Ws(e,t,r);var o}Qs(e,t){return this.Bs(e,new Be(t)).next(r=>{let o=vv();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}js(e,t,r){const o=t.collectionGroup;let u=vv();return this.indexManager.getCollectionParents(e,o).next(d=>de.forEach(d,m=>{const E=(C=t,M=m.child(o),new So(M,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,M;return this.Ws(e,E,r).next(C=>{C.forEach((M,R)=>{u=u.insert(M,R)})})}).next(()=>u))}Ws(e,t,r){let o;return this.fs.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const E=m.key;let C=o.get(E);null==C&&(C=Dn.newInvalidDocument(E),o=o.insert(E,C)),gv(m,C,d.localWriteTime),C.isFoundDocument()||(o=o.remove(E))}}).next(()=>(o.forEach((u,d)=>{mm(t,d)||(o=o.remove(u))}),o))}}class Wv{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=o}static Js(e,t){let r=rn(),o=rn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Wv(e,t.fromCache,r,o)}}class Zv{Ys(e){this.Xs=e}Ks(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(_t.min())?this.Zs(e,t):this.Xs.qs(e,o).next(u=>{const d=this.ti(t,u);return(hm(t)||fm(t))&&this.ei(t.limitType,d,o,r)?this.Zs(e,t):(Ud()<=ka.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xE(t)),this.Xs.Ks(e,t,wE(r,-1)).next(m=>(d.forEach(E=>{m=m.insert(E.key,E)}),m)))});var u}ti(e,t){let r=new pn(ME(e));return t.forEach((o,u)=>{mm(e,u)&&(r=r.add(u))}),r}ei(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Zs(e,t){return Ud()<=ka.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",xE(t)),this.Xs.Ks(e,t,Lu.min())}}class Kv{constructor(e,t,r,o){this.persistence=e,this.ni=t,this.M=o,this.si=new Jn(Ft),this.ii=new Ba(u=>Zs(u),ep),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new iC(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function sC(n,e,t,r){return new Kv(n,e,t,r)}function Yv(n,e){return vp.apply(this,arguments)}function vp(){return vp=(0,ye.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.$s.getAllMutationBatches(r).next(u=>(o=u,t.ui(e),t.$s.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let E=rn();for(const C of o){d.push(C.batchId);for(const M of C.mutations)E=E.add(M.key)}for(const C of u){m.push(C.batchId);for(const M of C.mutations)E=E.add(M.key)}return t.ai.qs(r,E).next(C=>({ci:C,removedBatchIds:d,addedBatchIds:m}))})})}),vp.apply(this,arguments)}function oC(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.oi.newChangeBuffer({trackRemovals:!0});return function(d,m,E,C){const M=E.batch,R=M.keys();let H=de.resolve();return R.forEach(Z=>{H=H.next(()=>C.getEntry(m,Z)).next(fe=>{const Fe=E.docVersions.get(Z);Et(null!==Fe),fe.version.compareTo(Fe)<0&&(M.applyToRemoteDocument(fe,E),fe.isValidDocument()&&(fe.setReadTime(E.commitVersion),C.addEntry(fe)))})}),H.next(()=>d.$s.removeMutationBatch(m,M))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,o))})}function EI(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function xA(n,e){const t=Ge(n),r=e.snapshotVersion;let o=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.oi.newChangeBuffer({trackRemovals:!0});o=t.si;const m=[];e.targetChanges.forEach((C,M)=>{const R=o.get(M);if(!R)return;m.push(t.ls.removeMatchingKeys(u,C.removedDocuments,M).next(()=>t.ls.addMatchingKeys(u,C.addedDocuments,M)));let H=R.withSequenceNumber(u.currentSequenceNumber);var Z,fe,Fe;e.targetMismatches.has(M)?H=H.withResumeToken(ar.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):C.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(C.resumeToken,r)),o=o.insert(M,H),fe=H,Fe=C,(0===(Z=R).resumeToken.approximateByteSize()||fe.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||Fe.addedDocuments.size+Fe.modifiedDocuments.size+Fe.removedDocuments.size>0)&&m.push(t.ls.updateTargetData(u,H))});let E=Wi();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),m.push(aC(u,d,e.documentUpdates).next(C=>{E=C})),!r.isEqual(_t.min())){const C=t.ls.getLastRemoteSnapshotVersion(u).next(M=>t.ls.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(C)}return de.waitFor(m).next(()=>d.apply(u)).next(()=>t.ai.Gs(u,E)).next(()=>E)}).then(u=>(t.si=o,u))}function aC(n,e,t){let r=rn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=Wi();return t.forEach((d,m)=>{const E=o.get(d);m.isNoDocument()&&m.version.isEqual(_t.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!E.isValidDocument()||m.version.compareTo(E.version)>0||0===m.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):ke("LocalStore","Ignoring outdated watch update for ",d,". Current version:",E.version," Watch version:",m.version)}),u})}function uC(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function lh(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.ls.getTargetData(r,e).next(u=>u?(o=u,de.resolve(o)):t.ls.allocateTargetId(r).next(d=>(o=new Hu(e,d,0,r.currentSequenceNumber),t.ls.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.si.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function wp(n,e,t){return II.apply(this,arguments)}function II(){return II=(0,ye.Z)(function*(n,e,t){const r=Ge(n),o=r.si.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Ec(d))throw d;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.si=r.si.remove(e),r.ii.delete(o.target)}),II.apply(this,arguments)}function Qv(n,e,t){const r=Ge(n);let o=_t.min(),u=rn();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,E,C){const M=Ge(m),R=M.ii.get(C);return void 0!==R?de.resolve(M.si.get(R)):M.ls.getTargetData(E,C)}(r,d,gs(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(d,m.targetId).next(E=>{u=E})}).next(()=>r.ni.Ks(d,e,t?o:_t.min(),t?u:rn())).next(m=>(DI(r,ym(e),m),{documents:m,hi:u})))}function lC(n,e){const t=Ge(n),r=Ge(t.ls),o=t.si.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function cC(n,e){const t=Ge(n),r=t.ri.get(e)||_t.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.oi.getAllFromCollectionGroup(o,e,wE(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(DI(t,e,o),o))}function DI(n,e,t){let r=_t.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ri.set(e,r)}function bI(){return bI=(0,ye.Z)(function*(n,e,t,r){const o=Ge(n);let u=rn(),d=Wi();for(const C of t){const M=e.li(C.metadata.name);C.document&&(u=u.add(M));const R=e.fi(C);R.setReadTime(e.di(C.metadata.readTime)),d=d.insert(M,R)}const m=o.oi.newChangeBuffer({trackRemovals:!0}),E=yield lh(o,(C=r,gs(rp(Kt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>aC(C,m,d).next(M=>(m.apply(C),M)).next(M=>o.ls.removeMatchingKeysForTargetId(C,E.targetId).next(()=>o.ls.addMatchingKeys(C,u,E.targetId)).next(()=>o.ai.Gs(C,M)).next(()=>M)))}),bI.apply(this,arguments)}function NA(n,e){return CI.apply(this,arguments)}function CI(){return CI=(0,ye.Z)(function*(n,e,t=rn()){const r=yield lh(n,gs(Om(e.bundledQuery))),o=Ge(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=cr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.ds.saveNamedQuery(u,e);const m=r.withResumeToken(ar.EMPTY_BYTE_STRING,d);return o.si=o.si.insert(m.targetId,m),o.ls.updateTargetData(u,m).next(()=>o.ls.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.ls.addMatchingKeys(u,t,r.targetId)).next(()=>o.ds.saveNamedQuery(u,e))})}),CI.apply(this,arguments)}class i{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return de.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:cr(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:Om(r.bundledQuery),readTime:cr(r.readTime)}),de.resolve();var r}}class s{constructor(){this.overlays=new Jn(Be.comparator),this.mi=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.mi.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.mi.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const o=ap(),u=t.length+1,d=new Be(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const E=m.getNext().value,C=E.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&E.largestBatchId>r&&o.set(E.getKey(),E)}return de.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Jn((C,M)=>C-M);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let M=u.get(C.largestBatchId);null===M&&(M=ap(),u=u.insert(C.largestBatchId,M)),M.set(C.getKey(),C)}}const m=ap(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((C,M)=>m.set(C,M)),!(m.size()>=o)););return de.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.mi.get(o.largestBatchId).delete(r.key);this.mi.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new hp(t,r));let u=this.mi.get(t);void 0===u&&(u=rn(),this.mi.set(t,u)),this.mi.set(t,u.add(r.key))}}class a{constructor(){this.gi=new pn(l.yi),this.pi=new pn(l.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new l(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new l(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new Be(new Kt([])),r=new l(t,e),o=new l(t,e+1),u=[];return this.pi.forEachInRange([r,o],d=>{this.Ei(d),u.push(d.key)}),u}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Be(new Kt([])),r=new l(t,e),o=new l(t,e+1);let u=rn();return this.pi.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new l(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class l{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Be.comparator(e.key,t.key)||Ft(e.Vi,t.Vi)}static Ii(e,t){return Ft(e.Vi,t.Vi)||Be.comparator(e.key,t.key)}}class c{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new pn(l.yi)}checkEmpty(e){return de.resolve(0===this.$s.length)}addMutationBatch(e,t,r,o){const u=this.vi;this.vi++;const d=new oI(u,t,r,o);this.$s.push(d);for(const m of o)this.Si=this.Si.add(new l(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return de.resolve(d)}lookupMutationBatch(e,t){return de.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Ci(t+1),u=o<0?0:o;return de.resolve(this.$s.length>u?this.$s[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return de.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new l(t,0),o=new l(t,Number.POSITIVE_INFINITY),u=[];return this.Si.forEachInRange([r,o],d=>{const m=this.Di(d.Vi);u.push(m)}),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(Ft);return t.forEach(o=>{const u=new l(o,0),d=new l(o,Number.POSITIVE_INFINITY);this.Si.forEachInRange([u,d],m=>{r=r.add(m.Vi)})}),de.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Be.isDocumentKey(u)||(u=u.child(""));const d=new l(new Be(u),0);let m=new pn(Ft);return this.Si.forEachWhile(E=>{const C=E.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(E.Vi)),!0)},d),de.resolve(this.xi(m))}xi(e){const t=[];return e.forEach(r=>{const o=this.Di(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Et(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return de.forEach(t.mutations,o=>{const u=new l(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new l(t,0),o=this.Si.firstAfterOrEqual(r);return de.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return de.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class f{constructor(e){this.ki=e,this.docs=new Jn(Be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():Dn.newInvalidDocument(t))}getEntries(e,t){let r=Wi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Dn.newInvalidDocument(o))}),de.resolve(r)}getAllFromCollection(e,t,r){let o=Wi();const u=new Be(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:E}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Ab(EE(E),r)<=0||(o=o.insert(E.key,E.mutableCopy()))}return de.resolve(o)}getAllFromCollectionGroup(e,t,r,o){Ye()}Mi(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new _(this)}getSize(e){return de.resolve(this.size)}}class _ extends Vm{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.qn.addEntry(e,o)):this.qn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class w{constructor(e){this.persistence=e,this.Oi=new Ba(t=>Zs(t),ep),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.Fi=0,this.$i=new a,this.targetCount=0,this.Bi=oh.mn()}forEachTarget(e,t){return this.Oi.forEach((r,o)=>t(o)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),de.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new oh(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.In(t),de.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Oi.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Oi.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),de.waitFor(u).next(()=>o)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),de.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.$i.containsKey(t))}}class I{constructor(e,t){this.Li={},this.overlays={},this.ts=new mi(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new w(this),this.indexManager=new fI,this.fs=new f(r=>this.referenceDelegate.Ui(r)),this.M=new Ys(t),this.ds=new i(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new s,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new c(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const o=new A(this.ts.next());return this.referenceDelegate.qi(),r(o).next(u=>this.referenceDelegate.Gi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ki(e,t){return de.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class A extends iI{constructor(e){super(),this.currentSequenceNumber=e}}class S{constructor(e){this.persistence=e,this.Qi=new a,this.ji=null}static Wi(e){return new S(e)}get zi(){if(this.ji)return this.ji;throw Ye()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),de.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(o=>this.zi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.zi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.zi,r=>{const o=Be.fromPath(r);return this.Hi(e,o).next(u=>{u||t.removeEntry(o,_t.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return de.or([()=>de.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function P(n,e){return`firestore_clients_${n}_${e}`}function V(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function W(n,e){return`firestore_targets_${n}_${e}`}class me{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ji(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new xe(o.error.code,o.error.message))),d?new me(e,t,o.state,u):(Yn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ne{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new Ne(e,r.state,o):(Yn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ue{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=bm();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=pE(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new Ue(e,u):(Yn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Qe{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Qe(t.clientId,t.onlineState):(Yn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ie{constructor(){this.activeTargetIds=bm()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ot{constructor(e,t,r,o,u){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Jn(Ft),this.started=!1,this.ir=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=P(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Ie),this.ar=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Os();for(const o of t){if(o===e.tr)continue;const u=e.getItem(P(e.persistenceKey,o));if(u){const d=Ue.Ji(o,u);d&&(e.sr=e.sr.insert(d.clientId,d))}}e._r();const r=e.storage.getItem(e.lr);if(r){const o=e.wr(r);o&&e.mr(o)}for(const o of e.ir)e.nr(o);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(W(this.persistenceKey,e));if(r){const o=Ne.Ji(e,r);o&&(t=o.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(W(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.pr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Yn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const o=t.Rr(r.key);return t.br(o,null)}{const o=t.Pr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const o=t.Vr(r.key,r.newValue);if(o)return t.vr(o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(r.key===t.lr){if(null!==r.newValue){const o=t.wr(r.newValue);if(o)return t.mr(o)}}else if(r.key===t.ur){const o=function(u){let d=mi.A;if(null!=u)try{const m=JSON.parse(u);Et("number"==typeof m),d=m}catch(m){Yn("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==mi.A&&t.sequenceNumberHandler(o)}else if(r.key===t.dr){const o=t.Cr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const o=new me(this.currentUser,e,t,r),u=V(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Yi())}pr(e){const t=V(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const o=W(this.persistenceKey,e),u=new Ne(e,t,r);this.setItem(o,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Ue.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),o=Number(r[1]);return me.Ji(new Xr(void 0!==r[2]?r[2]:null),o,t)}Sr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return Ne.Ji(o,t)}wr(e){return Qe.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),o=this.gr(this.sr),u=this.gr(r),d=[],m=[];return u.forEach(E=>{o.has(E)||d.push(E)}),o.forEach(E=>{u.has(E)||m.push(E)}),this.syncEngine.Or(d,m).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=bm();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Bt{constructor(){this.Fr=new Ie,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Ie,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cn{Br(e){}shutdown(){}}class Zi{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Ac={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Jv{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Xv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,o,u){const d=this.oo(e,t);ke("RestConnection","Sending: ",d,r);const m={};return this.uo(m,o,u),this.ao(e,d,m,r).then(E=>(ke("RestConnection","Received: ",E),E),E=>{throw Zf("RestConnection",`${e} failed with error: `,E,"url: ",d,"request:",r),E})}co(e,t,r,o,u){return this.ro(e,t,r,o,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}oo(e,t){return`${this.so}/v1/${t}:${Ac[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,o){return new Promise((u,d)=>{const m=new yb;m.listenOnce(oE.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case rm.NO_ERROR:const C=m.getResponseJson();ke("Connection","XHR received:",JSON.stringify(C)),u(C);break;case rm.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),d(new xe(ae.DEADLINE_EXCEEDED,"Request time out"));break;case rm.HTTP_ERROR:const M=m.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',M,"response text:",m.getResponseText()),M>0){const R=m.getResponseJson().error;if(R&&R.status&&R.message){const H=function(Z){const fe=Z.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(fe)>=0?fe:ae.UNKNOWN}(R.status);d(new xe(H,R.message))}else d(new xe(ae.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new xe(ae.UNAVAILABLE,"Connection failed."));break;default:Ye()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);m.send(t,"POST",E,r,15)})}ho(e,t,r){const o=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=pb(),d=gb(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new mb({})),this.uo(m.initMessageHeaders,t,r),(0,jt.uI)()||(0,jt.b$)()||(0,jt.d)()||(0,jt.w1)()||(0,jt.Mn)()||(0,jt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const E=o.join("");ke("Connection","Creating WebChannel: "+E,m);const C=u.createWebChannel(E,m);let M=!1,R=!1;const H=new Jv({jr:fe=>{R?ke("Connection","Not sending because WebChannel is closed:",fe):(M||(ke("Connection","Opening WebChannel transport."),C.open(),M=!0),ke("Connection","WebChannel sending:",fe),C.send(fe))},Wr:()=>C.close()}),Z=(fe,Fe,tt)=>{fe.listen(Fe,zt=>{try{tt(zt)}catch(ct){setTimeout(()=>{throw ct},0)}})};return Z(C,im.EventType.OPEN,()=>{R||ke("Connection","WebChannel transport opened.")}),Z(C,im.EventType.CLOSE,()=>{R||(R=!0,ke("Connection","WebChannel transport closed"),H.eo())}),Z(C,im.EventType.ERROR,fe=>{R||(R=!0,Zf("Connection","WebChannel transport errored:",fe),H.eo(new xe(ae.UNAVAILABLE,"The operation could not be completed")))}),Z(C,im.EventType.MESSAGE,fe=>{var Fe;if(!R){const tt=fe.data[0];Et(!!tt);const zt=tt,ct=zt.error||(null===(Fe=zt[0])||void 0===Fe?void 0:Fe.error);if(ct){ke("Connection","WebChannel received error:",ct);const mn=ct.status;let Dt=function(Ht){const Wu=lr[Ht];if(void 0!==Wu)return Em(Wu)}(mn),$t=ct.message;void 0===Dt&&(Dt=ae.INTERNAL,$t="Unknown error status: "+mn+" with message "+ct.message),R=!0,H.eo(new xe(Dt,$t)),C.close()}else ke("Connection","WebChannel received:",tt),H.no(tt)}}),Z(d,aE.STAT_EVENT,fe=>{fe.stat===X_.PROXY?ke("Connection","Detected buffering proxy"):fe.stat===X_.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{H.Zr()},0),H}}function $m(){return"undefined"!=typeof window?window:null}function ch(){return"undefined"!=typeof document?document:null}function Sc(n){return new Lb(n,!0)}class Ep{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=o,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),o=Math.max(0,t-r);o>0&&ke("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,o,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Hm{constructor(e,t,r,o,u,d,m,E){this.Jn=e,this.Ao=r,this.Ro=o,this.bo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=E,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Ep(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ye.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ye.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Yn(t.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Po===t&&this.Uo(r,o)},r=>{e(()=>{const o=new xe(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(o)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(o=>{r(()=>this.qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}xo(){var e=this;this.state=5,this.So.Io((0,ye.Z)(function*(){e.state=0,e.start()}))}qo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class e0 extends Hm{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Bb(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:Ye(),o=e.targetChange.targetIds||[],u=function(E,C){return E.N?(Et(void 0===C||"string"==typeof C),ar.fromBase64String(C||"")):(Et(void 0===C||C instanceof Uint8Array),ar.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(E){const C=void 0===E.code?ae.UNKNOWN:Em(E.code);return new xe(C,E.message||"")}(d);t=new Ev(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=ua(n,r.document.name),u=cr(r.document.updateTime),d=new Pr({mapValue:{fields:r.document.fields}}),m=Dn.newFoundDocument(o,u,d);t=new Cm(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=ua(n,r.document),u=r.readTime?cr(r.readTime):_t.min(),d=Dn.newNoDocument(o,u);t=new Cm([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=ua(n,r.document);t=new Cm([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Ye();{const r=e.filter,u=new Ob(r.count||0);t=new wv(r.targetId,u)}}var E;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return _t.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?_t.min():u.readTime?cr(u.readTime):_t.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=Qd(this.M),t.addTarget=function(o,u){let d;const m=u.target;return d=av(m)?{documents:ZE(o,m)}:{query:Sm(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=Yd(o,u.resumeToken):u.snapshotVersion.compareTo(_t.min())>0&&(d.readTime=Tm(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function mA(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ye()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=Qd(this.M),t.removeTarget=e,this.Oo(t)}}class t0 extends Hm{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function WE(n,e){return n&&n.length>0?(Et(void 0!==e),n.map(t=>function(r,o){let u=cr(r.updateTime?r.updateTime:o);return u.isEqual(_t.min())&&(u=cr(o)),new LE(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=cr(e.commitTime);return this.listener.Jo(r,t)}return Et(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Qd(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Jd(this.M,r))};this.Oo(t)}}class Yx extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.Zo=!1}tu(){if(this.Zo)throw new xe(ae.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ro(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ae.UNKNOWN,o.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ae.UNKNOWN,o.toString())})}terminate(){this.Zo=!0}}class Qx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Yn(t),this.su=!1):ke("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Jx{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(m=>{r.enqueueAndForget((0,ye.Z)(function*(){var E;dh(d)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,ye.Z)(function*(C){const M=Ge(C);M.lu.add(4),yield Gm(M),M._u.set("Unknown"),M.lu.delete(4),yield n0(M)}),function(C){return E.apply(this,arguments)})(d))}))}),this._u=new Qx(r,o)}}function n0(n){return dC.apply(this,arguments)}function dC(){return dC=(0,ye.Z)(function*(n){if(dh(n))for(const e of n.fu)yield e(!0)}),dC.apply(this,arguments)}function Gm(n){return hC.apply(this,arguments)}function hC(){return hC=(0,ye.Z)(function*(n){for(const e of n.fu)yield e(!1)}),hC.apply(this,arguments)}function TI(n,e){const t=Ge(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),gC(t)?pC(t):zm(t).Co()&&fC(t,e))}function r0(n,e){const t=Ge(n),r=zm(t);t.hu.delete(e),r.Co()&&RA(t,e),0===t.hu.size&&(r.Co()?r.ko():dh(t)&&t._u.set("Unknown"))}function fC(n,e){n.wu.Z(e.targetId),zm(n).Qo(e)}function RA(n,e){n.wu.Z(e),zm(n).jo(e)}function pC(n){n.wu=new qE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),zm(n).start(),n._u.iu()}function gC(n){return dh(n)&&!zm(n).Do()&&n.hu.size>0}function dh(n){return 0===Ge(n).lu.size}function OA(n){n.wu=void 0}function Xx(n){return mC.apply(this,arguments)}function mC(){return mC=(0,ye.Z)(function*(n){n.hu.forEach((e,t)=>{fC(n,e)})}),mC.apply(this,arguments)}function eM(n,e){return yC.apply(this,arguments)}function yC(){return yC=(0,ye.Z)(function*(n,e){OA(n),gC(n)?(n._u.uu(e),pC(n)):n._u.set("Unknown")}),yC.apply(this,arguments)}function tM(n,e,t){return _C.apply(this,arguments)}function _C(){return _C=(0,ye.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof Ev&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o.hu.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.hu.delete(m),o.wu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield AI(n,r)}else if(e instanceof Cm?n.wu.ut(e):e instanceof wv?n.wu._t(e):n.wu.ht(e),!t.isEqual(_t.min()))try{const r=yield EI(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.wu.yt(u);return d.targetChanges.forEach((m,E)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.hu.get(E);C&&o.hu.set(E,C.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const E=o.hu.get(m);if(!E)return;o.hu.set(m,E.withResumeToken(ar.EMPTY_BYTE_STRING,E.snapshotVersion)),RA(o,m);const C=new Hu(E.target,m,1,E.sequenceNumber);fC(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield AI(n,r)}var r}),_C.apply(this,arguments)}function AI(n,e,t){return vC.apply(this,arguments)}function vC(){return vC=(0,ye.Z)(function*(n,e,t){if(!Ec(e))throw e;n.lu.add(1),yield Gm(n),n._u.set("Offline"),t||(t=()=>EI(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield n0(n)}))}),vC.apply(this,arguments)}function kA(n,e){return e().catch(t=>AI(n,t,e))}function qm(n){return wC.apply(this,arguments)}function wC(){return wC=(0,ye.Z)(function*(n){const e=Ge(n),t=hh(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;nM(e);)try{const o=yield uC(e.localStore,r);if(null===o){0===e.cu.length&&t.ko();break}r=o.batchId,rM(e,o)}catch(o){yield AI(e,o)}PA(e)&&FA(e)}),wC.apply(this,arguments)}function nM(n){return dh(n)&&n.cu.length<10}function rM(n,e){n.cu.push(e);const t=hh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function PA(n){return dh(n)&&!hh(n).Do()&&n.cu.length>0}function FA(n){hh(n).start()}function iM(n){return EC.apply(this,arguments)}function EC(){return EC=(0,ye.Z)(function*(n){hh(n).Xo()}),EC.apply(this,arguments)}function sM(n){return IC.apply(this,arguments)}function IC(){return IC=(0,ye.Z)(function*(n){const e=hh(n);for(const t of n.cu)e.Ho(t.mutations)}),IC.apply(this,arguments)}function oM(n,e,t){return DC.apply(this,arguments)}function DC(){return DC=(0,ye.Z)(function*(n,e,t){const r=n.cu.shift(),o=kv.from(r,e,t);yield kA(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield qm(n)}),DC.apply(this,arguments)}function aM(n,e){return bC.apply(this,arguments)}function bC(){return bC=(0,ye.Z)(function*(n,e){var t;e&&hh(n).zo&&(yield(t=(0,ye.Z)(function*(r,o){if(yv(u=o.code)&&u!==ae.ABORTED){const d=r.cu.shift();hh(r).No(),yield kA(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield qm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),PA(n)&&FA(n)}),bC.apply(this,arguments)}function LA(n,e){return CC.apply(this,arguments)}function CC(){return CC=(0,ye.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=dh(t);t.lu.add(3),yield Gm(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield n0(t)}),CC.apply(this,arguments)}function TC(n,e){return AC.apply(this,arguments)}function AC(){return AC=(0,ye.Z)(function*(n,e){const t=Ge(n);e?(t.lu.delete(2),yield n0(t)):e||(t.lu.add(2),yield Gm(t),t._u.set("Unknown"))}),AC.apply(this,arguments)}function zm(n){return n.mu||(n.mu=function(e,t,r){const o=Ge(e);return o.tu(),new e0(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:Xx.bind(null,n),Jr:eM.bind(null,n),Ko:tM.bind(null,n)}),n.fu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.mu.No(),gC(n)?pC(n):n._u.set("Unknown")):(yield n.mu.stop(),OA(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function hh(n){return n.gu||(n.gu=function(e,t,r){const o=Ge(e);return o.tu(),new t0(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:iM.bind(null,n),Jr:aM.bind(null,n),Yo:sM.bind(null,n),Jo:oM.bind(null,n)}),n.fu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.gu.No(),yield qm(n)):(yield n.gu.stop(),n.cu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class SC{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new SC(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wm(n,e){if(Yn("AsyncQueue",`${e}: ${n}`),Ec(n))return new xe(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class Zm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=vv(),this.sortedSet=new Jn(this.comparator)}static emptySet(e){return new Zm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Zm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class VA{constructor(){this.yu=new Jn(Be.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Ye():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Km{constructor(e,t,r,o,u,d,m,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Km(e,t,Zm.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class uM{constructor(){this.Iu=void 0,this.listeners=[]}}class lM{constructor(){this.queries=new Ba(e=>cv(e),gm),this.onlineState="Unknown",this.Tu=new Set}}function xC(n,e){return MC.apply(this,arguments)}function MC(){return MC=(0,ye.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new uM),o)try{u.Iu=yield t.onListen(r)}catch(d){const m=Wm(d,`Initialization of query '${xE(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&OC(t)}),MC.apply(this,arguments)}function NC(n,e){return RC.apply(this,arguments)}function RC(){return RC=(0,ye.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),RC.apply(this,arguments)}function cM(n,e){const t=Ge(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Au(o)&&(r=!0);d.Iu=o}}r&&OC(t)}function dM(n,e,t){const r=Ge(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function OC(n){n.Tu.forEach(e=>{e.next()})}class kC{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Km(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Km.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class hM{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class UA{constructor(e){this.M=e}li(e){return ua(this.M,e)}fi(e){return e.metadata.exists?Ub(this.M,e.document,!1):Dn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return cr(e)}}class fM{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=BA(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Kt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new UA(this.M);for(const o of e)if(o.metadata.queries){const u=r.li(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||rn()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function MA(n,e,t,r){return bI.apply(this,arguments)}(e.localStore,new UA(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const o of e.queries)yield NA(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function BA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class jA{constructor(e){this.key=e}}class $A{constructor(e){this.key=e}}class HA{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=rn(),this.mutatedKeys=rn(),this.Lu=ME(e),this.Uu=new Zm(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new VA,o=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const E=hm(this.query)&&o.size===this.query.limit?o.last():null,C=fm(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((M,R)=>{const H=o.get(M),Z=mm(this.query,R)?R:null,fe=!!H&&this.mutatedKeys.has(H.key),Fe=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let tt=!1;H&&Z?H.data.isEqual(Z.data)?fe!==Fe&&(r.track({type:3,doc:Z}),tt=!0):this.Qu(H,Z)||(r.track({type:2,doc:Z}),tt=!0,(E&&this.Lu(Z,E)>0||C&&this.Lu(Z,C)<0)&&(m=!0)):!H&&Z?(r.track({type:0,doc:Z}),tt=!0):H&&!Z&&(r.track({type:1,doc:H}),tt=!0,(E||C)&&(m=!0)),tt&&(Z?(d=d.add(Z),u=Fe?u.add(M):u.delete(M)):(d=d.delete(M),u=u.delete(M)))}),hm(this.query)||fm(this.query))for(;d.size>this.query.limit;){const M=hm(this.query)?d.last():d.first();d=d.delete(M.key),u=u.delete(M.key),r.track({type:1,doc:M})}return{Uu:d,Ku:r,ei:m,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Ku.pu();u.sort((C,M)=>function(R,H){const Z=fe=>{switch(fe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye()}};return Z(R)-Z(H)}(C.type,M.type)||this.Lu(C.doc,M.doc)),this.ju(r);const d=t?this.Wu():[],m=0===this.Bu.size&&this.current?1:0,E=m!==this.$u;return this.$u=m,0!==u.length||E?{snapshot:new Km(this.query,e.Uu,o,u,e.mutatedKeys,0===m,E,!1),zu:d}:{zu:d}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new VA,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=rn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new $A(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new jA(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=rn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Km.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class pM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class gM{constructor(e){this.key=e,this.Xu=!1}}class mM{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Zu={},this.ta=new Ba(m=>cv(m),gm),this.ea=new Map,this.na=new Set,this.sa=new Jn(Be.comparator),this.ia=new Map,this.ra=new a,this.oa={},this.ua=new Map,this.aa=oh.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function yM(n,e){return PC.apply(this,arguments)}function PC(){return PC=(0,ye.Z)(function*(n,e){const t=iT(n);let r,o;const u=t.ta.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Yu();else{const d=yield lh(t.localStore,gs(e));t.isPrimaryClient&&TI(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield FC(t,e,r,"current"===m)}return o}),PC.apply(this,arguments)}function FC(n,e,t,r){return LC.apply(this,arguments)}function LC(){return LC=(0,ye.Z)(function*(n,e,t,r){n.ha=(M,R,H)=>{return(Z=(0,ye.Z)(function*(fe,Fe,tt,zt){let ct=Fe.view.Gu(tt);ct.ei&&(ct=yield Qv(fe.localStore,Fe.query,!1).then(({documents:$t})=>Fe.view.Gu($t,ct)));const mn=zt&&zt.targetChanges.get(Fe.targetId),Dt=Fe.view.applyChanges(ct,fe.isPrimaryClient,mn);return WC(fe,Fe.targetId,Dt.zu),Dt.snapshot}),function(fe,Fe,tt,zt){return Z.apply(this,arguments)})(n,M,R,H);var Z};const o=yield Qv(n.localStore,e,!0),u=new HA(e,o.hi),d=u.Gu(o.documents),m=Zd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=u.applyChanges(d,n.isPrimaryClient,m);WC(n,t,E.zu);const C=new pM(e,t,u);return n.ta.set(e,C),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),E.snapshot}),LC.apply(this,arguments)}function _M(n,e){return VC.apply(this,arguments)}function VC(){return VC=(0,ye.Z)(function*(n,e){const t=Ge(n),r=t.ta.get(e),o=t.ea.get(r.targetId);if(o.length>1)return t.ea.set(r.targetId,o.filter(u=>!gm(u,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield wp(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),r0(t.remoteStore,r.targetId),Ym(t,r.targetId)}).catch(Cc))):(Ym(t,r.targetId),yield wp(t.localStore,r.targetId,!0))}),VC.apply(this,arguments)}function UC(){return UC=(0,ye.Z)(function*(n,e,t){const r=sT(n);try{const o=yield function(u,d){const m=Ge(u),E=Qn.now(),C=d.reduce((R,H)=>R.add(H.key),rn());let M;return m.persistence.runTransaction("Locally write mutations","readwrite",R=>m.ai.qs(R,C).next(H=>{M=H;const Z=[];for(const fe of d){const Fe=mv(fe,M.get(fe.key));null!=Fe&&Z.push(new No(fe.key,Fe,vE(Fe.value.mapValue),ur.exists(!0)))}return m.$s.addMutationBatch(R,E,Z,d)})).then(R=>(R.applyToLocalDocumentSet(M),{batchId:R.batchId,changes:M}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let E=u.oa[u.currentUser.toKey()];E||(E=new Jn(Ft)),E=E.insert(d,m),u.oa[u.currentUser.toKey()]=E}(r,o.batchId,t),yield xc(r,o.changes),yield qm(r.remoteStore)}catch(o){const u=Wm(o,"Failed to persist write");t.reject(u)}}),UC.apply(this,arguments)}function GA(n,e){return BC.apply(this,arguments)}function BC(){return BC=(0,ye.Z)(function*(n,e){const t=Ge(n);try{const r=yield xA(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.ia.get(u);d&&(Et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Xu=!0:o.modifiedDocuments.size>0?Et(d.Xu):o.removedDocuments.size>0&&(Et(d.Xu),d.Xu=!1))}),yield xc(t,r,e)}catch(r){yield Cc(r)}}),BC.apply(this,arguments)}function qA(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ta.forEach((u,d)=>{const m=d.view.Eu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=Ge(u);m.onlineState=d;let E=!1;m.queries.forEach((C,M)=>{for(const R of M.listeners)R.Eu(d)&&(E=!0)}),E&&OC(m)}(r.eventManager,e),o.length&&r.Zu.Ko(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function wM(n,e,t){return jC.apply(this,arguments)}function jC(){return jC=(0,ye.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ia.get(e),u=o&&o.key;if(u){let d=new Jn(Be.comparator);d=d.insert(u,Dn.newNoDocument(u,_t.min()));const m=rn().add(u),E=new Wd(_t.min(),new Map,new pn(Ft),d,m);yield GA(r,E),r.sa=r.sa.remove(u),r.ia.delete(e),ZC(r)}else yield wp(r.localStore,e,!1).then(()=>Ym(r,e,t)).catch(Cc)}),jC.apply(this,arguments)}function EM(n,e){return $C.apply(this,arguments)}function $C(){return $C=(0,ye.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const o=yield oC(t.localStore,e);zC(t,r,null),qC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield xc(t,o)}catch(o){yield Cc(o)}}),$C.apply(this,arguments)}function IM(n,e,t){return HC.apply(this,arguments)}function HC(){return HC=(0,ye.Z)(function*(n,e,t){const r=Ge(n);try{const o=yield function(u,d){const m=Ge(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let C;return m.$s.lookupMutationBatch(E,d).next(M=>(Et(null!==M),C=M.keys(),m.$s.removeMutationBatch(E,M))).next(()=>m.$s.performConsistencyCheck(E)).next(()=>m.ai.qs(E,C))})}(r.localStore,e);zC(r,e,t),qC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield xc(r,o)}catch(o){yield Cc(o)}}),HC.apply(this,arguments)}function GC(){return GC=(0,ye.Z)(function*(n,e){const t=Ge(n);dh(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Ge(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.$s.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.ua.get(r)||[];o.push(e),t.ua.set(r,o)}catch(r){const o=Wm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),GC.apply(this,arguments)}function qC(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function zC(n,e,t){const r=Ge(n);let o=r.oa[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.oa[r.currentUser.toKey()]=o}}function Ym(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||zA(n,r)})}function zA(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(r0(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),ZC(n))}function WC(n,e,t){for(const r of t)r instanceof jA?(n.ra.addReference(r.key,e),bM(n,r)):r instanceof $A?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||zA(n,r.key)):Ye()}function bM(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.na.add(r),ZC(n))}function ZC(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new Be(Kt.fromString(e)),r=n.aa.next();n.ia.set(r,new gM(t)),n.sa=n.sa.insert(t,r),TI(n.remoteStore,new Hu(gs(rp(t.path)),r,2,mi.A))}}function xc(n,e,t){return KC.apply(this,arguments)}function KC(){return KC=(0,ye.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[],d=[];var m;r.ta.isEmpty()||(r.ta.forEach((m,E)=>{d.push(r.ha(E,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,C.fromCache?"not-current":"current"),o.push(C);const M=Wv.Js(E.targetId,C);u.push(M)}}))}),yield Promise.all(d),r.Zu.Ko(o),yield(m=(0,ye.Z)(function*(E,C){const M=Ge(E);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>de.forEach(C,H=>de.forEach(H.zs,Z=>M.persistence.referenceDelegate.addReference(R,H.targetId,Z)).next(()=>de.forEach(H.Hs,Z=>M.persistence.referenceDelegate.removeReference(R,H.targetId,Z)))))}catch(R){if(!Ec(R))throw R;ke("LocalStore","Failed to update sequence numbers: "+R)}for(const R of C){const H=R.targetId;if(!R.fromCache){const Z=M.si.get(H),Fe=Z.withLastLimboFreeSnapshotVersion(Z.snapshotVersion);M.si=M.si.insert(H,Fe)}}}),function(E,C){return m.apply(this,arguments)})(r.localStore,u))}),KC.apply(this,arguments)}function CM(n,e){return YC.apply(this,arguments)}function YC(){return YC=(0,ye.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield Yv(t.localStore,e);t.currentUser=e,(o=t).ua.forEach(d=>{d.forEach(m=>{m.reject(new xe(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield xc(t,r.ci)}var o}),YC.apply(this,arguments)}function TM(n,e){const t=Ge(n),r=t.ia.get(e);if(r&&r.Xu)return rn().add(r.key);{let o=rn();const u=t.ea.get(e);if(!u)return o;for(const d of u){const m=t.ta.get(d);o=o.unionWith(m.view.qu)}return o}}function AM(n,e){return QC.apply(this,arguments)}function QC(){return QC=(0,ye.Z)(function*(n,e){const t=Ge(n),r=yield Qv(t.localStore,e.query,!0),o=e.view.Ju(r);return t.isPrimaryClient&&WC(t,e.targetId,o.zu),o}),QC.apply(this,arguments)}function SM(n,e){return JC.apply(this,arguments)}function JC(){return JC=(0,ye.Z)(function*(n,e){const t=Ge(n);return cC(t.localStore,e).then(r=>xc(t,r))}),JC.apply(this,arguments)}function xM(n,e,t,r){return XC.apply(this,arguments)}function XC(){return XC=(0,ye.Z)(function*(n,e,t,r){const o=Ge(n),u=yield function(d,m){const E=Ge(d),C=Ge(E.$s);return E.persistence.runTransaction("Lookup mutation documents","readonly",M=>C.ln(M,m).next(R=>R?E.ai.qs(M,R):de.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield qm(o.remoteStore):"acknowledged"===t||"rejected"===t?(zC(o,e,r||null),qC(o,e),m=e,Ge(Ge(o.localStore).$s).dn(m)):Ye(),yield xc(o,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),XC.apply(this,arguments)}function eT(){return eT=(0,ye.Z)(function*(n,e){const t=Ge(n);if(iT(t),sT(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield WA(t,r.toArray());t.ca=!0,yield TC(t.remoteStore,!0);for(const u of o)TI(t.remoteStore,u)}else if(!1===e&&!1!==t.ca){const r=[];let o=Promise.resolve();t.ea.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Ym(t,d),wp(t.localStore,d,!0))),r0(t.remoteStore,d)}),yield o,yield WA(t,r),function(u){const d=Ge(u);d.ia.forEach((m,E)=>{r0(d.remoteStore,E)}),d.ra.bi(),d.ia=new Map,d.sa=new Jn(Be.comparator)}(t),t.ca=!1,yield TC(t.remoteStore,!1)}}),eT.apply(this,arguments)}function WA(n,e,t){return tT.apply(this,arguments)}function tT(){return tT=(0,ye.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[];for(const d of e){let m;const E=r.ea.get(d);if(E&&0!==E.length){m=yield lh(r.localStore,gs(E[0]));for(const C of E){const M=r.ta.get(C),R=yield AM(r,M);R.snapshot&&u.push(R.snapshot)}}else{const C=yield lC(r.localStore,d);m=yield lh(r.localStore,C),yield FC(r,ZA(C),d,!1)}o.push(m)}return r.Zu.Ko(u),o}),tT.apply(this,arguments)}function ZA(n){return AE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function NM(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).Os()}function RM(n,e,t,r){return nT.apply(this,arguments)}function nT(){return nT=(0,ye.Z)(function*(n,e,t,r){const o=Ge(n);if(o.ca)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=o.ea.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield cC(o.localStore,ym(u[0])),m=Wd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield xc(o,d,m);break}case"rejected":yield wp(o.localStore,e,!0),Ym(o,e,r);break;default:Ye()}}),nT.apply(this,arguments)}function OM(n,e,t){return rT.apply(this,arguments)}function rT(){return rT=(0,ye.Z)(function*(n,e,t){const r=iT(n);if(r.ca){for(const o of e){if(r.ea.has(o)){ke("SyncEngine","Adding an already active target "+o);continue}const u=yield lC(r.localStore,o),d=yield lh(r.localStore,u);yield FC(r,ZA(u),d.targetId,!1),TI(r.remoteStore,d)}for(const o of t)r.ea.has(o)&&(yield wp(r.localStore,o,!1).then(()=>{r0(r.remoteStore,o),Ym(r,o)}).catch(Cc))}}),rT.apply(this,arguments)}function iT(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=GA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wM.bind(null,e),e.Zu.Ko=cM.bind(null,e.eventManager),e.Zu.la=dM.bind(null,e.eventManager),e}function sT(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IM.bind(null,e),e}class KA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.M=Sc(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return sC(this.persistence,new Zv,e.initialUser,this.M)}_a(e){return new I(S.Wi,this.M)}da(e){return new Bt}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class YA extends KA{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield sT(r.ga.syncEngine),yield qm(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return sC(this.persistence,new Zv,e.initialUser,this.M)}wa(e){return new vI(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=jm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ms.withCacheSize(this.cacheSizeBytes):ms.DEFAULT;return new zv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,$m(),ch(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new Bt}}class PM extends YA{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const o=r.ga.syncEngine;r.sharedClientState instanceof ot&&(r.sharedClientState.syncEngine={kr:xM.bind(null,o),Mr:RM.bind(null,o),Or:OM.bind(null,o),Os:NM.bind(null,o),Nr:SM.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var u=(0,ye.Z)(function*(d){yield function MM(n,e){return eT.apply(this,arguments)}(r.ga.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}da(e){const t=$m();if(!ot.vt(t))throw new xe(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=jm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ot(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class oT{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>qA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=CM.bind(null,r.syncEngine),yield TC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new lM}createDatastore(e){const t=Sc(e.databaseInfo.databaseId),r=new Xv(e.databaseInfo);return new Yx(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>qA(this.syncEngine,m,0),d=Zi.vt()?new Zi:new cn,new Jx(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,E,C){const M=new mM(r,o,u,d,m,E);return C&&(M.ca=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=Ge(t);ke("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Gm(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function QA(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class SI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class FM{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Ir,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),o=Number(r);isNaN(o)&&e.Ra(`length string (${r}) is not valid number`);const u=yield e.ba(o);return new hM(JSON.parse(u),t.length+o)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ye.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class LM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ye.Z)(function*(u,d){const m=Ge(u),E=Qd(m.M)+"/documents",C={documents:d.map(Z=>up(m.M,Z))},M=yield m.co("BatchGetDocuments",E,C),R=new Map;M.forEach(Z=>{const fe=function zE(n,e){return"found"in e?function(t,r){Et(!!r.found);const o=ua(t,r.found.name),u=cr(r.found.updateTime),d=new Pr({mapValue:{fields:r.found.fields}});return Dn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){Et(!!r.missing),Et(!!r.readTime);const o=ua(t,r.missing),u=cr(r.readTime);return Dn.newNoDocument(o,u)}(n,e):Ye()}(m.M,Z);R.set(fe.key.toString(),fe)});const H=[];return d.forEach(Z=>{const fe=R.get(Z.toString());Et(!!fe),H.push(fe)}),H}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new $u(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Be.fromPath(o);e.mutations.push(new zd(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(o,u){const d=Ge(o),m=Qd(d.M)+"/documents",E={writes:u.map(C=>Jd(d.M,C))};yield d.ro("Commit",m,E)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ye();t=_t.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ur.updateTime(t):ur.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_t.min()))throw new xe(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ur.updateTime(t)}return ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class VM{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.va=5,this.So=new Ep(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ye.Z)(function*(){const t=new LM(e.datastore),r=e.Da(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ca(u)}))}).catch(o=>{e.Ca(o)})}))}Da(e){try{const t=this.updateFunction(e);return!cc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!yv(t)}return!1}}class UM{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Xr.UNAUTHENTICATED,this.clientId=dE.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ye.Z)(function*(m){ke("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(ke("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Wm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function JA(n,e){return aT.apply(this,arguments)}function aT(){return aT=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ye.Z)(function*(u){r.isEqual(u)||(yield Yv(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),aT.apply(this,arguments)}function XA(n,e){return uT.apply(this,arguments)}function uT(){return uT=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield lT(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>LA(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>LA(e.remoteStore,u)),n.onlineComponents=e}),uT.apply(this,arguments)}function lT(n){return cT.apply(this,arguments)}function cT(){return cT=(0,ye.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield JA(n,new KA)),n.offlineComponents}),cT.apply(this,arguments)}function xI(n){return dT.apply(this,arguments)}function dT(){return dT=(0,ye.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield XA(n,new oT)),n.onlineComponents}),dT.apply(this,arguments)}function eS(n){return lT(n).then(e=>e.persistence)}function hT(n){return lT(n).then(e=>e.localStore)}function tS(n){return xI(n).then(e=>e.remoteStore)}function fT(n){return xI(n).then(e=>e.syncEngine)}function Qm(n){return pT.apply(this,arguments)}function pT(){return pT=(0,ye.Z)(function*(n){const e=yield xI(n),t=e.eventManager;return t.onListen=yM.bind(null,e.syncEngine),t.onUnlisten=_M.bind(null,e.syncEngine),t}),pT.apply(this,arguments)}function nS(n,e,t={}){const r=new Ir;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,d,m,E){const C=new SI({next:R=>{u.enqueueAndForget(()=>NC(o,M));const H=R.docs.has(d);!H&&R.fromCache?E.reject(new xe(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&R.fromCache&&m&&"server"===m.source?E.reject(new xe(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(R)},error:R=>E.reject(R)}),M=new kC(rp(d.path),C,{includeMetadataChanges:!0,Du:!0});return xC(o,M)}(yield Qm(n),n.asyncQueue,e,t,r)})),r.promise}function rS(n,e,t={}){const r=new Ir;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,d,m,E){const C=new SI({next:R=>{u.enqueueAndForget(()=>NC(o,M)),R.fromCache&&"server"===m.source?E.reject(new xe(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(R)},error:R=>E.reject(R)}),M=new kC(d,C,{includeMetadataChanges:!0,Du:!0});return xC(o,M)}(yield Qm(n),n.asyncQueue,e,t,r)})),r.promise}const iS=new Map;function gT(n,e,t){if(!t)throw new xe(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sS(n,e,t,r){if(!0===e&&!0===r)throw new xe(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oS(n){if(!Be.isDocumentKey(n))throw new xe(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function aS(n){if(Be.isDocumentKey(n))throw new xe(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function MI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Ye()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=MI(n);throw new xe(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function uS(n,e){if(e<=0)throw new xe(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class lS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,sS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class s0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lS({}),this._settingsFrozen=!1,e instanceof Ua?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new xe(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ua(o.options.projectId)}(e))}get app(){if(!this._app)throw new xe(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new cE;switch(t.type){case"gapi":const r=t.client;return Et(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new pA(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=iS.get(e);t&&(ke("ComponentProvider","Removing Datastore"),iS.delete(e),t.terminate())}(this),Promise.resolve()}}class Fn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fn(this.firestore,e,this._key)}}class Ki{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ki(this.firestore,e,this._query)}}class qu extends Ki{constructor(e,t,r){super(e,t,rp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fn(this.firestore,null,new Be(e))}withConverter(e){return new qu(this.firestore,e,this._path)}}function cS(n,e,...t){if(n=(0,jt.m9)(n),gT("collection","path",e),n instanceof s0){const r=Kt.fromString(e,...t);return aS(r),new qu(n,null,r)}{if(!(n instanceof Fn||n instanceof qu))throw new xe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Kt.fromString(e,...t));return aS(r),new qu(n.firestore,null,r)}}function NI(n,e,...t){if(n=(0,jt.m9)(n),1===arguments.length&&(e=dE.R()),gT("doc","path",e),n instanceof s0){const r=Kt.fromString(e,...t);return oS(r),new Fn(n,null,new Be(r))}{if(!(n instanceof Fn||n instanceof qu))throw new xe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Kt.fromString(e,...t));return oS(r),new Fn(n.firestore,n instanceof qu?n.converter:null,new Be(r))}}function dS(n,e){return n=(0,jt.m9)(n),e=(0,jt.m9)(e),(n instanceof Fn||n instanceof qu)&&(e instanceof Fn||e instanceof qu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function hS(n,e){return n=(0,jt.m9)(n),e=(0,jt.m9)(e),n instanceof Ki&&e instanceof Ki&&n.firestore===e.firestore&&gm(n._query,e._query)&&n.converter===e.converter}class YM{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Ep(this,"async_queue_retry"),this.Ua=()=>{const t=ch();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=ch();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=ch();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Ir;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ye.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!Ec(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,Yn("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const o=SC.createAndSchedule(this,e,t,r,u=>this.Qa(u));return this.Oa.push(o),o}qa(){this.Fa&&Ye()}verifyOperationInProgress(){}ja(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function mT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class QM{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ir,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Hn extends s0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new YM,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||fS(this),this._firestoreClient.terminate()}}function Lr(n){return n._firestoreClient||fS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function fS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Tb(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new UM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function pS(n,e,t){const r=new Ir;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield JA(n,t),yield XA(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ae.FAILED_PRECONDITION||u.code===ae.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function gS(n){if(n._initialized||n._terminated)throw new xe(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Mc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zu(ar.fromBase64String(e))}catch(t){throw new xe(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zu(ar.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ip{constructor(e){this._methodName=e}}class RI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}const aN=/^__.*__$/;class uN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new No(e,this.data,this.fieldMask,t,this.fieldTransforms):new yc(e,this.data,t,this.fieldTransforms)}}class mS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new No(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye()}}class OI{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Ja(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new OI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.ec(e),o}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.Ja(),o}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return FI(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(yS(this.Ya)&&aN.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class lN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Sc(e)}uc(e,t,r,o=!1){return new OI({Ya:e,methodName:t,oc:r,path:kr.emptyPath(),tc:!1,rc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Dp(n){const e=n._freezeSettings(),t=Sc(n._databaseId);return new lN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kI(n,e,t,r,o,u={}){const d=n.uc(u.merge||u.mergeFields?2:0,e,t,o);wT("Data must be an object, but it was:",d,r);const m=wS(r,d);let E,C;if(u.merge)E=new lc(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const M=[];for(const R of u.mergeFields){const H=ET(e,R,t);if(!d.contains(H))throw new xe(ae.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);IS(M,H)||M.push(H)}E=new lc(M),C=d.fieldTransforms.filter(R=>E.covers(R.field))}else E=null,C=d.fieldTransforms;return new uN(new Pr(m),E,C)}class o0 extends Ip{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof o0}}function _S(n,e,t){return new OI({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class yT extends Ip{_toFieldTransform(e){return new sp(e.path,new qd)}isEqual(e){return e instanceof yT}}class cN extends Ip{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=_S(this,e,!0),r=this.ac.map(u=>bp(u,t)),o=new xo(r);return new sp(e.path,o)}isEqual(e){return this===e}}class dN extends Ip{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=_S(this,e,!0),r=this.ac.map(u=>bp(u,t)),o=new ju(r);return new sp(e.path,o)}isEqual(e){return this===e}}class hN extends Ip{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new mc(e.M,kE(e.M,this.cc));return new sp(e.path,t)}isEqual(e){return this===e}}function _T(n,e,t,r){const o=n.uc(1,e,t);wT("Data must be an object, but it was:",o,r);const u=[],d=Pr.empty();uc(r,(E,C)=>{const M=PI(e,E,t);C=(0,jt.m9)(C);const R=o.nc(M);if(C instanceof o0)u.push(M);else{const H=bp(C,R);null!=H&&(u.push(M),d.set(M,H))}});const m=new lc(u);return new mS(d,m,o.fieldTransforms)}function vT(n,e,t,r,o,u){const d=n.uc(1,e,t),m=[ET(e,r,t)],E=[o];if(u.length%2!=0)throw new xe(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)m.push(ET(e,u[H])),E.push(u[H+1]);const C=[],M=Pr.empty();for(let H=m.length-1;H>=0;--H)if(!IS(C,m[H])){const Z=m[H];let fe=E[H];fe=(0,jt.m9)(fe);const Fe=d.nc(Z);if(fe instanceof o0)C.push(Z);else{const tt=bp(fe,Fe);null!=tt&&(C.push(Z),M.set(Z,tt))}}const R=new lc(C);return new mS(M,R,d.fieldTransforms)}function vS(n,e,t,r=!1){return bp(t,n.uc(r?4:3,e))}function bp(n,e){if(ES(n=(0,jt.m9)(n)))return wT("Unsupported field value:",e,n),wS(n,e);if(n instanceof Ip)return function(t,r){if(!yS(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=bp(d,r.sc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,jt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return kE(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Qn.fromDate(t);return{timestampValue:Tm(r.M,o)}}if(t instanceof Qn){const o=new Qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Tm(r.M,o)}}if(t instanceof RI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof zu)return{bytesValue:Yd(r.M,t._byteString)};if(t instanceof Fn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ic(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Dv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${MI(t)}`)}(n,e)}function wS(n,e){const t={};return ev(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uc(n,(r,o)=>{const u=bp(o,e.Za(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function ES(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qn||n instanceof RI||n instanceof zu||n instanceof Fn||n instanceof Ip)}function wT(n,e,t){if(!ES(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=MI(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function ET(n,e,t){if((e=(0,jt.m9)(e))instanceof Mc)return e._internalPath;if("string"==typeof e)return PI(n,e);throw FI("Field path arguments must be of type string or ",n,!1,void 0,t)}const fN=new RegExp("[~\\*/\\[\\]]");function PI(n,e,t){if(e.search(fN)>=0)throw FI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Mc(...e.split("."))._internalPath}catch(r){throw FI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function FI(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let E="";return(u||d)&&(E+=" (found",u&&(E+=` in field ${r}`),d&&(E+=` in document ${o}`),E+=")"),new xe(ae.INVALID_ARGUMENT,m+n+E)}function IS(n,e){return n.some(t=>t.isEqual(e))}class a0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Fn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new pN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(LI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class pN extends a0{data(){return super.data()}}function LI(n,e){return"string"==typeof e?PI(n,e):e instanceof Mc?e._internalPath:e._delegate._internalPath}class Cp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nc extends a0{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new u0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(LI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class u0 extends Nc{data(e={}){return super.data(e)}}class fh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Cp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new u0(this._firestore,this._userDataWriter,r.key,r,new Cp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new u0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Cp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new u0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Cp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,C=-1;return 0!==d.type&&(E=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:gN(d.type),doc:m,oldIndex:E,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function gN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye()}}function DS(n,e){return n instanceof Nc&&e instanceof Nc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof fh&&e instanceof fh&&n._firestore===e._firestore&&hS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function bS(n){if(fm(n)&&0===n.explicitOrderBy.length)throw new xe(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class l0{}function ph(n,...e){for(const t of e)n=t._apply(n);return n}class mN extends l0{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=Dp(e.firestore),r=function(o,u,d,m,E,C,M){let R;if(E.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new xe(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){MS(M,C);const Z=[];for(const fe of M)Z.push(xS(m,o,fe));R={arrayValue:{values:Z}}}else R=xS(m,o,M)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||MS(M,C),R=vS(d,"where",M,"in"===C||"not-in"===C);const H=ei.create(E,C,R);return function(Z,fe){if(fe.S()){const tt=pm(Z);if(null!==tt&&!tt.isEqual(fe.field))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${tt.toString()}' and '${fe.field.toString()}'`);const zt=Uu(Z);null!==zt&&NS(0,fe.field,zt)}const Fe=function(tt,zt){for(const ct of tt.filters)if(zt.indexOf(ct.op)>=0)return ct.op;return null}(Z,function(tt){switch(tt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(fe.op));if(null!==Fe)throw new xe(ae.INVALID_ARGUMENT,Fe===fe.op?`Invalid query. You cannot use more than one '${fe.op.toString()}' filter.`:`Invalid query. You cannot use '${fe.op.toString()}' filters with '${Fe.toString()}' filters.`)}(o,H),H}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new Ki(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new So(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class _N extends l0{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new gc(o,u);return function(m,E){if(null===Uu(m)){const C=pm(m);null!==C&&NS(0,C,E.field)}}(r,d),d}(e._query,this.hc,this.dc);return new Ki(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new So(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class CS extends l0{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new Ki(e.firestore,e.converter,SE(e._query,this._c,this.wc))}}class TS extends l0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=SS(e,this.type,this.mc,this.gc);return new Ki(e.firestore,e.converter,(o=t,new So((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class AS extends l0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=SS(e,this.type,this.mc,this.gc);return new Ki(e.firestore,e.converter,(o=t,new So((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function SS(n,e,t,r){if(t[0]=(0,jt.m9)(t[0]),t[0]instanceof a0)return function(o,u,d,m,E){if(!m)throw new xe(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const M of ip(o))if(M.field.isKeyField())C.push(fc(u,m.key));else{const R=m.data.field(M.field);if(tv(R))throw new xe(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const H=M.field.canonicalString();throw new xe(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}C.push(R)}return new Vu(C,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Dp(n.firestore);return function(u,d,m,E,C,M){const R=u.explicitOrderBy;if(C.length>R.length)throw new xe(ae.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let Z=0;Z<C.length;Z++){const fe=C[Z];if(R[Z].field.isKeyField()){if("string"!=typeof fe)throw new xe(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof fe}`);if(!Bu(u)&&-1!==fe.indexOf("/"))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${fe}' contains a slash.`);const Fe=u.path.child(Kt.fromString(fe));if(!Be.isDocumentKey(Fe))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const tt=new Be(Fe);H.push(fc(d,tt))}else{const Fe=vS(m,E,fe);H.push(Fe)}}return new Vu(H,M)}(n._query,n.firestore._databaseId,o,e,t,r)}}function xS(n,e,t){if("string"==typeof(t=(0,jt.m9)(t))){if(""===t)throw new xe(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bu(e)&&-1!==t.indexOf("/"))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Kt.fromString(t));if(!Be.isDocumentKey(r))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fc(n,new Be(r))}if(t instanceof Fn)return fc(n,t._key);throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${MI(t)}.`)}function MS(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function NS(n,e,t){if(!t.isEqual(e))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class IT{convertValue(e,t="none"){switch(hc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Va(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ye()}}convertObject(e,t){const r={};return uc(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new RI($n(e.latitude),$n(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=nv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(jd(e));default:return null}}convertTimestamp(e){const t=La(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Kt.fromString(e);Et(XE(r));const o=new Ua(r.get(1),r.get(3)),u=new Be(r.popFirst(5));return o.isEqual(t)||Yn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function VI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class TN extends IT{constructor(e){super(),this.firestore=e}convertBytes(e){return new zu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,t)}}class RS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Dp(e)}set(e,t,r){this._verifyNotCommitted();const o=gh(e,this._firestore),u=VI(o.converter,t,r),d=kI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,ur.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=gh(e,this._firestore);let d;return d="string"==typeof(t=(0,jt.m9)(t))||t instanceof Mc?vT(this._dataReader,"WriteBatch.update",u._key,t,r,o):_T(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gh(e,this._firestore);return this._mutations=this._mutations.concat(new $u(t._key,ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gh(n,e){if((n=(0,jt.m9)(n)).firestore!==e)throw new xe(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Tp extends IT{constructor(e){super(),this.firestore=e}convertBytes(e){return new zu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,t)}}function OS(n,e,t){n=Jt(n,Fn);const r=Jt(n.firestore,Hn),o=VI(n.converter,e,t);return Jm(r,[kI(Dp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,ur.none())])}function kS(n,e,t,...r){n=Jt(n,Fn);const o=Jt(n.firestore,Hn),u=Dp(o);let d;return d="string"==typeof(e=(0,jt.m9)(e))||e instanceof Mc?vT(u,"updateDoc",n._key,e,t,r):_T(u,"updateDoc",n._key,e),Jm(o,[d.toMutation(n._key,ur.exists(!0))])}function PS(n,...e){var t,r,o;n=(0,jt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||mT(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(mT(e[d])){const R=e[d];e[d]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[d+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[d+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let E,C,M;if(n instanceof Fn)C=Jt(n.firestore,Hn),M=rp(n._key.path),E={next:R=>{e[d]&&e[d](DT(C,n,R))},error:e[d+1],complete:e[d+2]};else{const R=Jt(n,Ki);C=Jt(R.firestore,Hn),M=R._query;const H=new Tp(C);E={next:Z=>{e[d]&&e[d](new fh(C,H,R,Z))},error:e[d+1],complete:e[d+2]},bS(n._query)}return function(R,H,Z,fe){const Fe=new SI(fe),tt=new kC(H,Fe,Z);return R.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return xC(yield Qm(R),tt)})),()=>{Fe.pa(),R.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return NC(yield Qm(R),tt)}))}}(Lr(C),M,m,E)}function Jm(n,e){return function(t,r){const o=new Ir;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function vM(n,e,t){return UC.apply(this,arguments)}(yield fT(t),r,o)})),o.promise}(Lr(n),e)}function DT(n,e,t){const r=t.docs.get(e._key),o=new Tp(n);return new Nc(n,o,e._key,r,new Cp(t.hasPendingWrites,t.fromCache),e.converter)}class FN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Dp(e)}get(e){const t=gh(e,this._firestore),r=new TN(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Ye();const u=o[0];if(u.isFoundDocument())return new a0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new a0(this._firestore,r,t._key,null,t.converter);throw Ye()})}set(e,t,r){const o=gh(e,this._firestore),u=VI(o.converter,t,r),d=kI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=gh(e,this._firestore);let d;return d="string"==typeof(t=(0,jt.m9)(t))||t instanceof Mc?vT(this._dataReader,"Transaction.update",u._key,t,r,o):_T(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=gh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gh(e,this._firestore),r=new Tp(this._firestore);return super.get(e).then(o=>new Nc(this._firestore,r,t._key,o._document,new Cp(!1,!1),t.converter))}}function bT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function LS(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function VS(){if(!function bb(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Vd=Gl.SDK_VERSION,(0,Gl._registerComponent)(new pf.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Hn(o,new wb(t.getProvider("auth-internal")),new gA(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Gl.registerVersion)(Ld,"3.4.7",n),(0,Gl.registerVersion)(Ld,"3.4.7","esm2017")}();class c0{constructor(e){this._delegate=e}static fromBase64String(e){return VS(),new c0(zu.fromBase64String(e))}static fromUint8Array(e){return LS(),new c0(zu.fromUint8Array(e))}toBase64(){return VS(),this._delegate.toBase64()}toUint8Array(){return LS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function CT(n){return function qN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class zN{enableIndexedDbPersistence(e,t){return function XM(n,e){gS(n=Jt(n,Hn));const t=Lr(n),r=n._freezeSettings(),o=new oT;return pS(t,o,new YA(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function eN(n){gS(n=Jt(n,Hn));const e=Lr(n),t=n._freezeSettings(),r=new oT;return pS(e,r,new PM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function tN(n){if(n._initialized&&!n._terminated)throw new xe(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ir;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Ro.vt())return Promise.resolve();const o=r+"main";yield Ro.delete(o)}),function(r){return t.apply(this,arguments)})(jm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class US{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ua||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Zf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function ZM(n,e,t,r={}){var o;const u=(n=Jt(n,s0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Zf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Xr.MOCK_USER;else{d=(0,jt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new xe(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Xr(E)}n._authCredentials=new vb(new lE(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function rN(n){return function BM(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield eS(n),t=yield tS(n);return e.setNetworkEnabled(!0),function(r){const o=Ge(r);return o.lu.delete(0),n0(o)}(t)}))}(Lr(n=Jt(n,Hn)))}(this._delegate)}disableNetwork(){return function iN(n){return function jM(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield eS(n),t=yield tS(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(o){const u=Ge(o);u.lu.add(0),yield Gm(u),u._u.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Lr(n=Jt(n,Hn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,sS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function nN(n){return function(e){const t=new Ir;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function DM(n,e){return GC.apply(this,arguments)}(yield fT(e),t)})),t.promise}(Lr(n=Jt(n,Hn)))}(this._delegate)}onSnapshotsInSync(e){return function PN(n,e){return function GM(n,e){const t=new SI(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Qm(n),o=t,Ge(r).Tu.add(o),void o.next();var r,o})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Qm(n),o=t,void Ge(r).Tu.delete(o);var r,o}))}}(Lr(n=Jt(n,Hn)),mT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Xm(this,cS(this._delegate,e))}catch(t){throw ys(t,"collection()","Firestore.collection()")}}doc(e){try{return new la(this,NI(this._delegate,e))}catch(t){throw ys(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _s(this,function KM(n,e){if(n=Jt(n,s0),gT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ki(n,null,(t=e,new So(Kt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ys(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function LN(n,e){return function qM(n,e){const t=new Ir;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const r=yield(o=n,xI(o).then(u=>u.datastore));var o;new VM(n.asyncQueue,r,e,t).run()})),t.promise}(Lr(n=Jt(n,Hn)),t=>e(new FN(n,t)))}(this._delegate,t=>e(new BS(this,t)))}batch(){return Lr(this._delegate),new jS(new RS(this._delegate,e=>Jm(this._delegate,e)))}loadBundle(e){return function sN(n,e){const t=Lr(n=Jt(n,Hn)),r=new QM;return function zM(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,E=function(E,C){if(E instanceof Uint8Array)return QA(E,C);if(E instanceof ArrayBuffer)return QA(new Uint8Array(E),C);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new FM(E,d);var E}(t,Sc(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function kM(n,e,t){const r=Ge(n);var o;(o=(0,ye.Z)(function*(u,d,m){try{const E=yield d.getMetadata();if(yield function(H,Z){const fe=Ge(H),Fe=cr(Z.createTime);return fe.persistence.runTransaction("hasNewerBundle","readonly",tt=>fe.ds.getBundleMetadata(tt,Z.id)).then(tt=>!!tt&&tt.createTime.compareTo(Fe)>=0)}(u.localStore,E))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=E).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress(BA(E));const C=new fM(E,u.localStore,d.M);let M=yield d.fa();for(;M;){const H=yield C.Nu(M);H&&m._updateProgress(H),M=yield d.fa()}const R=yield C.complete();return yield xc(u,R.Ou,void 0),yield function(H,Z){const fe=Ge(H);return fe.persistence.runTransaction("Save bundle","readwrite",Fe=>fe.ds.saveBundleMetadata(Fe,Z))}(u.localStore,E),m._completeWith(R.progress),Promise.resolve(R.Mu)}catch(E){return Zf("SyncEngine",`Loading bundle failed with ${E}`),m._failWith(E),Promise.resolve(new Set)}var H}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield fT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function oN(n,e){return function WM(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const o=Ge(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.ds.getNamedQuery(u,r))}(yield hT(n),e)}))}(Lr(n=Jt(n,Hn)),e).then(t=>t?new Ki(n,null,t.query):null)}(this._delegate,e).then(t=>t?new _s(this,t):null)}}class UI extends IT{constructor(e){super(),this.firestore=e}convertBytes(e){return new c0(new zu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return la.forKey(t,this.firestore,null)}}class BS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new UI(e)}get(e){const t=Sp(e);return this._delegate.get(t).then(r=>new d0(this._firestore,new Nc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Sp(e);return r?(bT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Sp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Sp(e);return this._delegate.delete(t),this}}class jS{constructor(e){this._delegate=e}set(e,t,r){const o=Sp(e);return r?(bT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Sp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Sp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ap{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new u0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new h0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ap.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Ap(e,new UI(e),t),o.set(t,u)),u}}Ap.INSTANCES=new WeakMap;class la{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new UI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new la(t,new Fn(t._delegate,r,new Be(e)))}static forKey(e,t,r){return new la(t,new Fn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Xm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Xm(this.firestore,cS(this._delegate,e))}catch(t){throw ys(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,jt.m9)(e))instanceof Fn&&dS(this._delegate,e)}set(e,t){t=bT("DocumentReference.set",t);try{return t?OS(this._delegate,e,t):OS(this._delegate,e)}catch(r){throw ys(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?kS(this._delegate,e):kS(this._delegate,e,t,...r)}catch(o){throw ys(o,"updateDoc()","DocumentReference.update()")}}delete(){return function ON(n){return Jm(Jt(n.firestore,Hn),[new $u(n._key,ur.none())])}(this._delegate)}onSnapshot(...e){const t=$S(e),r=HS(e,o=>new d0(this.firestore,new Nc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return PS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function SN(n){n=Jt(n,Fn);const e=Jt(n.firestore,Hn),t=Lr(e),r=new Tp(e);return function $M(n,e){const t=new Ir;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,d){try{const m=yield function(E,C){const M=Ge(E);return M.persistence.runTransaction("read document","readonly",R=>M.ai.Bs(R,C))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new xe(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const E=Wm(m,`Failed to get document '${u} from cache`);d.reject(E)}}),function(o,u,d){return r.apply(this,arguments)})(yield hT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Nc(e,r,n._key,o,new Cp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function xN(n){n=Jt(n,Fn);const e=Jt(n.firestore,Hn);return nS(Lr(e),n._key,{source:"server"}).then(t=>DT(e,n,t))}(this._delegate):function AN(n){n=Jt(n,Fn);const e=Jt(n.firestore,Hn);return nS(Lr(e),n._key).then(t=>DT(e,n,t))}(this._delegate),t.then(r=>new d0(this.firestore,new Nc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new la(this.firestore,this._delegate.withConverter(e?Ap.getInstance(this.firestore,e):null))}}function ys(n,e,t){return n.message=n.message.replace(e,t),n}function $S(n){for(const e of n)if("object"==typeof e&&!CT(e))return e;return{}}function HS(n,e){var t,r;let o;return o=CT(n[0])?n[0]:CT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class d0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new la(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return DS(this._delegate,e._delegate)}}class h0 extends d0{data(e){const t=this._delegate.data(e);return function _b(n,e){n||Ye()}(void 0!==t),t}}class _s{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new UI(e)}where(e,t,r){try{return new _s(this.firestore,ph(this._delegate,function yN(n,e,t){const r=e,o=LI("where",n);return new mN(o,r,t)}(e,t,r)))}catch(o){throw ys(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new _s(this.firestore,ph(this._delegate,function vN(n,e="asc"){const t=e,r=LI("orderBy",n);return new _N(r,t)}(e,t)))}catch(r){throw ys(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new _s(this.firestore,ph(this._delegate,function wN(n){return uS("limit",n),new CS("limit",n,"F")}(e)))}catch(t){throw ys(t,"limit()","Query.limit()")}}limitToLast(e){try{return new _s(this.firestore,ph(this._delegate,function EN(n){return uS("limitToLast",n),new CS("limitToLast",n,"L")}(e)))}catch(t){throw ys(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new _s(this.firestore,ph(this._delegate,function IN(...n){return new TS("startAt",n,!0)}(...e)))}catch(t){throw ys(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new _s(this.firestore,ph(this._delegate,function DN(...n){return new TS("startAfter",n,!1)}(...e)))}catch(t){throw ys(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new _s(this.firestore,ph(this._delegate,function bN(...n){return new AS("endBefore",n,!1)}(...e)))}catch(t){throw ys(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new _s(this.firestore,ph(this._delegate,function CN(...n){return new AS("endAt",n,!0)}(...e)))}catch(t){throw ys(t,"endAt()","Query.endAt()")}}isEqual(e){return hS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function NN(n){n=Jt(n,Ki);const e=Jt(n.firestore,Hn),t=Lr(e),r=new Tp(e);return function HM(n,e){const t=new Ir;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,d){try{const m=yield Qv(o,u,!0),E=new HA(u,m.hi),C=E.Gu(m.documents),M=E.applyChanges(C,!1);d.resolve(M.snapshot)}catch(m){const E=Wm(m,`Failed to execute query '${u} against cache`);d.reject(E)}}),function(o,u,d){return r.apply(this,arguments)})(yield hT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new fh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function RN(n){n=Jt(n,Ki);const e=Jt(n.firestore,Hn),t=Lr(e),r=new Tp(e);return rS(t,n._query,{source:"server"}).then(o=>new fh(e,r,n,o))}(this._delegate):function MN(n){n=Jt(n,Ki);const e=Jt(n.firestore,Hn),t=Lr(e),r=new Tp(e);return bS(n._query),rS(t,n._query).then(o=>new fh(e,r,n,o))}(this._delegate),t.then(r=>new TT(this.firestore,new fh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=$S(e),r=HS(e,o=>new TT(this.firestore,new fh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return PS(this._delegate,t,r)}withConverter(e){return new _s(this.firestore,this._delegate.withConverter(e?Ap.getInstance(this.firestore,e):null))}}class ZN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new h0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class TT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new _s(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new h0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ZN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new h0(this._firestore,r))})}isEqual(e){return DS(this._delegate,e._delegate)}}class Xm extends _s{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new la(this.firestore,e):null}doc(e){try{return new la(this.firestore,void 0===e?NI(this._delegate):NI(this._delegate,e))}catch(t){throw ys(t,"doc()","CollectionReference.doc()")}}add(e){return function kN(n,e){const t=Jt(n.firestore,Hn),r=NI(n),o=VI(n.converter,e);return Jm(t,[kI(Dp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,ur.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new la(this.firestore,t))}isEqual(e){return dS(this._delegate,e._delegate)}withConverter(e){return new Xm(this.firestore,this._delegate.withConverter(e?Ap.getInstance(this.firestore,e):null))}}function Sp(n){return Jt(n,Fn)}class AT{constructor(...e){this._delegate=new Mc(...e)}static documentId(){return new AT(kr.keyField().canonicalString())}isEqual(e){return(e=(0,jt.m9)(e))instanceof Mc&&this._delegate._internalPath.isEqual(e._internalPath)}}class xp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function UN(){return new yT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new xp(e)}static delete(){const e=function VN(){return new o0("deleteField")}();return e._methodName="FieldValue.delete",new xp(e)}static arrayUnion(...e){const t=function BN(...n){return new cN("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new xp(t)}static arrayRemove(...e){const t=function jN(...n){return new dN("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new xp(t)}static increment(e){const t=function $N(n){return new hN("increment",n)}(e);return t._methodName="FieldValue.increment",new xp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const KN={Firestore:US,GeoPoint:RI,Timestamp:Qn,Blob:c0,Transaction:BS,WriteBatch:jS,DocumentReference:la,DocumentSnapshot:d0,Query:_s,QueryDocumentSnapshot:h0,QuerySnapshot:TT,CollectionReference:Xm,FieldPath:AT,FieldValue:xp,setLogLevel:function WN(n){!function uE(n){Pu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function QN(n){(function YN(n,e){n.INTERNAL.registerComponent(new pf.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},KN)))})(n,(e,t)=>new US(e,t,new zN)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(dA.Z);var JN=k(6451),BI=k(5363),XN=k(6063);class eR extends Zn.x{constructor(e=1/0,t=1/0,r=XN.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let E=1;E<r.length&&r[E]<=d;E+=2)m=E;m&&r.splice(0,m+1)}}}var tR=k(3099);function GS(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,tR.B)({connector:()=>new eR(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function qS(n,e){return(0,Ea.m)(e)?xn(()=>n,e):xn(()=>n)}var ST=k(9468);k(5867);const WS=new Map,oR={activated:!1,tokenObservers:[]},aR={initialized:!1,enabled:!1};function vi(n){return WS.get(n)||oR}function Ha(n,e){WS.set(n,e)}function $I(){return aR}class hR{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new jt.BH,yield function fR(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new jt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const vs=new jt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function KS(n){if(!vi(n).activated)throw vs.create("use-before-activation",{appName:n.name})}function RT(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const R=yield o.getHeartbeatsHeader();R&&(r["X-Firebase-Client"]=R)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(R){throw vs.create("fetch-network-error",{originalErrorMessage:R.message})}if(200!==d.status)throw vs.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(R){throw vs.create("fetch-parse-error",{originalErrorMessage:R.message})}const E=m.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw vs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(E[1]),M=Date.now();return{token:m.attestationToken,expireTimeMillis:M+C,issuedAtTimeMillis:M}}),OT.apply(this,arguments)}function _R(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const f0="firebase-app-check-store";let qI=null;function QS(){return qI||(qI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(vs.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(f0,{keyPath:"compositeKey"})}}catch(t){e(vs.create("storage-open",{originalErrorMessage:t.message}))}}),qI)}function kT(){return kT=(0,ye.Z)(function*(n,e){const r=(yield QS()).transaction(f0,"readwrite"),u=r.objectStore(f0).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=E=>{d()},r.onerror=E=>{var C;m(vs.create("storage-set",{originalErrorMessage:null===(C=E.target.error)||void 0===C?void 0:C.message}))}})}),kT.apply(this,arguments)}const p0=new ka.Yd("@firebase/app-check");function tx(n,e){return(0,jt.hl)()?function IR(n,e){return function JS(n,e){return kT.apply(this,arguments)}(function ex(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{p0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function nx(){return $I().enabled}function rx(){return VT.apply(this,arguments)}function VT(){return VT=(0,ye.Z)(function*(){const n=$I();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),VT.apply(this,arguments)}const SR={error:"UNKNOWN_ERROR"};function xR(n){return jt.US.encodeString(JSON.stringify(n),!1)}function zI(n){return UT.apply(this,arguments)}function UT(){return UT=(0,ye.Z)(function*(n,e=!1){const t=n.app;KS(t);const r=vi(t);let u,o=r.token;if(!o){const E=yield r.cachedTokenPromise;E&&WI(E)&&(o=E)}if(!e&&o&&WI(o))return{token:o.token};let m,d=!1;if(nx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=RT(_R(t,yield rx()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),d=!0);const E=yield r.exchangeTokenPromise;return yield tx(t,E),Ha(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),d=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?p0.warn(E.message):p0.error(E),u=E}return o?(m={token:o.token},Ha(t,Object.assign(Object.assign({},r),{token:o})),yield tx(t,o)):m=NR(u),d&&sx(t,m),m}),UT.apply(this,arguments)}function jT(n,e){const t=vi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ha(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function ix(n){const{app:e}=n,t=vi(e);let r=t.tokenRefresher;r||(r=function MR(n){const{app:e}=n;return new hR((0,ye.Z)(function*(){let r;if(r=vi(e).token?yield zI(n,!0):yield zI(n),r.error)throw r.error}),()=>!0,()=>{const t=vi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ha(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function sx(n,e){const t=vi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function WI(n){return n.expireTimeMillis-Date.now()>0}function NR(n){return{token:xR(SR),error:n}}class RR{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=vi(this.app);for(const t of e)jT(this.app,t.next);return Promise.resolve()}}const fx="app-check-internal";!function zR(){(0,Gl._registerComponent)(new pf.wA("app-check",n=>function OR(n,e){return new RR(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(fx).initialize()})),(0,Gl._registerComponent)(new pf.wA(fx,n=>function kR(n){return{getToken:e=>zI(n,e),addTokenListener:e=>function BT(n,e,t,r){const{app:o}=n,u=vi(o),d={next:t,error:r,type:e};if(Ha(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&WI(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),ix(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>ix(n))}(n,"INTERNAL",e),removeTokenListener:e=>jT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Gl.registerVersion)("@firebase/app-check","0.5.5")}();class qT{constructor(){return(0,Mr.vb)("app-check")}}"undefined"!=typeof window&&window;var QR=k(127);const gx=new g.OlP("angularfire2.auth.use-emulator"),mx=new g.OlP("angularfire2.auth.settings"),yx=new g.OlP("angularfire2.auth.tenant-id"),_x=new g.OlP("angularfire2.auth.langugage-code"),vx=new g.OlP("angularfire2.auth.use-device-language"),wx=new g.OlP("angularfire.auth.persistence"),Ex=(n,e,t,r,o,u,d,m)=>(0,bo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,u&&E.useDeviceLanguage(),d)for(const[C,M]of Object.entries(d))E.settings[C]=M;return m&&E.setPersistence(m),E},[t,r,o,u,d,m]);let Ix=(()=>{class n{constructor(t,r,o,u,d,m,E,C,M,R,H,Z){const fe=new Zn.x,Fe=ft(void 0).pipe((0,BI.Q)(d.outsideAngular),xn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,4087)))),(0,xt.U)(()=>(0,bo.on)(t,u,r)),(0,xt.U)(tt=>Ex(tt,u,m,C,M,R,E,H)),GS({bufferSize:1,refCount:!1}));if(ir(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ft(null);else{Fe.pipe(Bs()).subscribe();const zt=Fe.pipe(xn(Dt=>Dt.getRedirectResult().then($t=>$t,()=>null)),Mr.iC,GS({bufferSize:1,refCount:!1})),ct=Fe.pipe(xn(Dt=>new zr.y($t=>({unsubscribe:u.runOutsideAngular(()=>Dt.onAuthStateChanged(Ht=>$t.next(Ht),Ht=>$t.error(Ht),()=>$t.complete()))})))),mn=Fe.pipe(xn(Dt=>new zr.y($t=>({unsubscribe:u.runOutsideAngular(()=>Dt.onIdTokenChanged(Ht=>$t.next(Ht),Ht=>$t.error(Ht),()=>$t.complete()))}))));this.authState=zt.pipe(qS(ct),(0,ST.R)(d.outsideAngular),(0,BI.Q)(d.insideAngular)),this.user=zt.pipe(qS(mn),(0,ST.R)(d.outsideAngular),(0,BI.Q)(d.insideAngular)),this.idToken=this.user.pipe(xn(Dt=>Dt?(0,An.D)(Dt.getIdToken()):ft(null))),this.idTokenResult=this.user.pipe(xn(Dt=>Dt?(0,An.D)(Dt.getIdTokenResult()):ft(null))),this.credential=(0,JN.T)(zt,fe,this.authState.pipe(us(Dt=>!Dt))).pipe((0,xt.U)(Dt=>(null==Dt?void 0:Dt.user)?Dt:null),(0,ST.R)(d.outsideAngular),(0,BI.Q)(d.insideAngular))}return(0,bo.pX)(this,Fe,u,{spy:{apply:(tt,zt,ct)=>{(tt.startsWith("signIn")||tt.startsWith("createUser"))&&ct.then(mn=>fe.next(mn))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(bo.Dh),g.LFG(bo.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Mr.HU),g.LFG(gx,8),g.LFG(mx,8),g.LFG(yx,8),g.LFG(_x,8),g.LFG(vx,8),g.LFG(wx,8),g.LFG(qT,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Dx(n,e){return function XR(n,e=kD.z){return new zr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function WT(n,e){return Dx(n,e).pipe((0,xt.U)(t=>({payload:t,type:"query"})))}function KI(n,e){return WT(n,e).pipe(Ai(void 0),yw(),(0,xt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const E=o.find(M=>M.doc.ref.isEqual(d.ref)),C=null==t?void 0:t.payload.docs.find(M=>M.ref.isEqual(d.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(d.metadata)||!E&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function bx(n,e,t){return KI(n,t).pipe(yr((r,o)=>function tO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function nO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ZT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ZT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ZT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function _w(n,e=ui.y){return n=null!=n?n:PD,(0,Ar.e)((t,r)=>{let o,u=!0;t.subscribe((0,On.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,xt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function ZT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function Cx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Tx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=KI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,xt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Ai(void 0),yw(),us(([r,o])=>o.length>0||!r),(0,xt.U)(([r,o])=>o),Mr.iC)}auditTrail(e){return this.stateChanges(e).pipe(yr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Cx(e);return bx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Mr.iC)}valueChanges(e={}){return WT(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Mr.iC)}get(e){return(0,An.D)(this.query.get(e)).pipe(Mr.iC)}add(e){return this.ref.add(e)}doc(e){return new Ax(this.ref.doc(e),this.afs)}}class Ax{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=Mx(r,t);return new Tx(o,u,this.afs)}snapshotChanges(){return function eO(n,e){return Dx(n,e).pipe(Ai(void 0),yw(),(0,xt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Mr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,xt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,An.D)(this.ref.get(e)).pipe(Mr.iC)}}class rO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?KI(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),us(t=>t.length>0),Mr.iC):KI(this.query,this.afs.schedulers.outsideAngular).pipe(Mr.iC)}auditTrail(e){return this.stateChanges(e).pipe(yr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Cx(e);return bx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Mr.iC)}valueChanges(e={}){return WT(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Mr.iC)}get(e){return(0,An.D)(this.query.get(e)).pipe(Mr.iC)}}const Sx=new g.OlP("angularfire2.enableFirestorePersistence"),xx=new g.OlP("angularfire2.firestore.persistenceSettings"),iO=new g.OlP("angularfire2.firestore.settings"),sO=new g.OlP("angularfire2.firestore.use-emulator");function Mx(n,e=(t=>t)){return{query:e(n),ref:n}}let Nx=(()=>{class n{constructor(t,r,o,u,d,m,E,C,M,R,H,Z,fe,Fe,tt,zt,ct){this.schedulers=E;const mn=(0,bo.on)(t,m,r),Dt=M;R&&Ex(mn,m,H,fe,Fe,tt,Z,zt),[this.firestore,this.persistenceEnabled$]=(0,bo.cc)(`${mn.name}.firestore`,"AngularFirestore",mn.name,()=>{const $t=m.runOutsideAngular(()=>mn.firestore());if(u&&$t.settings(u),Dt&&$t.useEmulator(...Dt),o&&!ir(d)){const Ht=()=>{try{return(0,An.D)($t.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Wu){return"undefined"!=typeof console&&console.warn(Wu),ft(!1)}};return[$t,m.runOutsideAngular(Ht)]}return[$t,ft(!1)]},[u,Dt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=Mx(o,r),m=this.schedulers.ngZone.run(()=>u);return new Tx(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new rO(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new Ax(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(bo.Dh),g.LFG(bo.xv,8),g.LFG(Sx,8),g.LFG(iO,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Mr.HU),g.LFG(xx,8),g.LFG(sO,8),g.LFG(Ix,8),g.LFG(gx,8),g.LFG(mx,8),g.LFG(yx,8),g.LFG(_x,8),g.LFG(vx,8),g.LFG(wx,8),g.LFG(qT,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),oO=(()=>{class n{constructor(){QR.Z.registerVersion("angularfire",Mr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Sx,useValue:!0},{provide:xx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Nx]}),n})(),YI=(()=>{class n{constructor(t){this._client=t}add(t){this._client.collection("tasks").add(t)}getAll(t){return this._client.collection("tasks").valueChanges({idField:"id"}).pipe((0,xt.U)(r=>((n,e)=>{if(void 0===e)return n;const t=Object.keys(e);return n.filter(o=>((o,u,d)=>void 0===o.find(m=>u[m]!==d[m]))(t,o,e))})(r,t)))}remove(t){this._client.doc("tasks/"+t).delete()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Nx))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Rx=new g.OlP("GETS_ALL_TASK_DTO"),Ox=new g.OlP("REMOVES_TASK_DTO");let KT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[YI,{provide:g_,useExisting:YI},{provide:Rx,useExisting:YI},{provide:Ox,useExisting:YI}],imports:[[oO]]}),n})(),YT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[],imports:[[Tr,gw,wo,KT]]}),n})(),kx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[],imports:[[Tr,YT,wo]]}),n})(),uO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[],imports:[[Tr,wo.forChild([{path:"",component:OD}]),KT,YT,x0,kx]]}),n})();const lO=function(n){return{notification:n}};function cO(n,e){if(1&n&&g.GkF(0,2),2&n){const t=g.oxw();g.Q6J("ngTemplateOutlet",t.notification.template)("ngTemplateOutletContext",g.VKq(2,lO,t.notification))}}function dO(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){return g.CHM(t),g.oxw(2).onClickDismiss()}),g.O4$(),g.TgZ(1,"svg",6),g._UZ(2,"path",7),g.qZA()()}}function hO(n,e){if(1&n&&(g.TgZ(0,"p",3),g._uU(1),g.qZA(),g.YNc(2,dO,3,0,"button",4)),2&n){const t=g.oxw();g.xp6(1),g.Oqu(t.notification.message),g.xp6(1),g.Q6J("ngIf",t.config.behaviour.showDismissButton)}}function fO(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"li",2)(1,"notifier-notification",3),g.NdJ("ready",function(o){return g.CHM(t),g.oxw().onNotificationReady(o)})("dismiss",function(o){return g.CHM(t),g.oxw().onNotificationDismiss(o)}),g.qZA()()}if(2&n){const t=e.$implicit;g.xp6(1),g.Q6J("notification",t)}}class pO{constructor(e){this.template=null,Object.assign(this,e),void 0===e.id&&(this.id=`ID_${(new Date).getTime()}`)}}let QT=(()=>{class n{constructor(){this.actionStream=new Zn.x,this.actionQueue=[],this.isActionInProgress=!1}push(t){this.actionQueue.push(t),this.tryToRunNextAction()}continue(){this.isActionInProgress=!1,this.tryToRunNextAction()}tryToRunNextAction(){this.isActionInProgress||0===this.actionQueue.length||(this.isActionInProgress=!0,this.actionStream.next(this.actionQueue.shift()))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Px=new g.OlP("[angular-notifier] Notifier Options"),JT=new g.OlP("[anuglar-notifier] Notifier Config");class Fx{constructor(e={}){this.animations={enabled:!0,hide:{easing:"ease",offset:50,preset:"fade",speed:300},overlap:150,shift:{easing:"ease",speed:300},show:{easing:"ease",preset:"slide",speed:300}},this.behaviour={autoHide:7e3,onClick:!1,onMouseover:"pauseAutoHide",showDismissButton:!0,stacking:4},this.position={horizontal:{distance:12,position:"left"},vertical:{distance:12,gap:10,position:"bottom"}},this.theme="material",void 0!==e.theme&&(this.theme=e.theme),void 0!==e.animations&&(void 0!==e.animations.enabled&&(this.animations.enabled=e.animations.enabled),void 0!==e.animations.overlap&&(this.animations.overlap=e.animations.overlap),void 0!==e.animations.hide&&Object.assign(this.animations.hide,e.animations.hide),void 0!==e.animations.shift&&Object.assign(this.animations.shift,e.animations.shift),void 0!==e.animations.show&&Object.assign(this.animations.show,e.animations.show)),void 0!==e.behaviour&&Object.assign(this.behaviour,e.behaviour),void 0!==e.position&&(void 0!==e.position.horizontal&&Object.assign(this.position.horizontal,e.position.horizontal),void 0!==e.position.vertical&&Object.assign(this.position.vertical,e.position.vertical))}}let QI=(()=>{class n{constructor(t,r){this.queueService=t,this.config=r}getConfig(){return this.config}get actionStream(){return this.queueService.actionStream.asObservable()}show(t){this.queueService.push({payload:t,type:"SHOW"})}hide(t){this.queueService.push({payload:t,type:"HIDE"})}hideNewest(){this.queueService.push({type:"HIDE_NEWEST"})}hideOldest(){this.queueService.push({type:"HIDE_OLDEST"})}hideAll(){this.queueService.push({type:"HIDE_ALL"})}notify(t,r,o){const u={message:r,type:t};void 0!==o&&(u.id=o),this.show(u)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(QT),g.LFG(JT))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Lx=(()=>{class n{constructor(){this.now=0,this.remaining=0}start(t){return new Promise(r=>{this.remaining=t,this.finishPromiseResolver=r,this.continue()})}pause(){clearTimeout(this.timerId),this.remaining-=(new Date).getTime()-this.now}continue(){this.now=(new Date).getTime(),this.timerId=window.setTimeout(()=>{this.finish()},this.remaining)}stop(){clearTimeout(this.timerId),this.remaining=0}finish(){this.finishPromiseResolver()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const gO={hide:()=>({from:{opacity:"1"},to:{opacity:"0"}}),show:()=>({from:{opacity:"0"},to:{opacity:"1"}})},mO={hide:n=>{const e=n.component.getConfig(),t=n.component.getShift();let r,o;if("left"===e.position.horizontal.position)r={transform:`translate3d( 0, ${t}px, 0 )`},o={transform:`translate3d( calc( -100% - ${e.position.horizontal.distance}px - 10px ), ${t}px, 0 )`};else if("right"===e.position.horizontal.position)r={transform:`translate3d( 0, ${t}px, 0 )`},o={transform:`translate3d( calc( 100% + ${e.position.horizontal.distance}px + 10px ), ${t}px, 0 )`};else{let u;u="top"===e.position.vertical.position?`calc( -100% - ${e.position.horizontal.distance}px - 10px )`:`calc( 100% + ${e.position.horizontal.distance}px + 10px )`,r={transform:`translate3d( -50%, ${t}px, 0 )`},o={transform:`translate3d( -50%, ${u}, 0 )`}}return{from:r,to:o}},show:n=>{const e=n.component.getConfig();let t,r;if("left"===e.position.horizontal.position)t={transform:`translate3d( calc( -100% - ${e.position.horizontal.distance}px - 10px ), 0, 0 )`},r={transform:"translate3d( 0, 0, 0 )"};else if("right"===e.position.horizontal.position)t={transform:`translate3d( calc( 100% + ${e.position.horizontal.distance}px + 10px ), 0, 0 )`},r={transform:"translate3d( 0, 0, 0 )"};else{let o;o="top"===e.position.vertical.position?`calc( -100% - ${e.position.horizontal.distance}px - 10px )`:`calc( 100% + ${e.position.horizontal.distance}px + 10px )`,t={transform:`translate3d( -50%, ${o}, 0 )`},r={transform:"translate3d( -50%, 0, 0 )"}}return{from:t,to:r}}};let Vx=(()=>{class n{constructor(){this.animationPresets={fade:gO,slide:mO}}getAnimationData(t,r){let o,u,d;return"show"===t?(o=this.animationPresets[r.component.getConfig().animations.show.preset].show(r),u=r.component.getConfig().animations.show.speed,d=r.component.getConfig().animations.show.easing):(o=this.animationPresets[r.component.getConfig().animations.hide.preset].hide(r),u=r.component.getConfig().animations.hide.speed,d=r.component.getConfig().animations.hide.easing),{keyframes:[o.from,o.to],options:{duration:u,easing:d,fill:"forwards"}}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),yO=(()=>{class n{constructor(t,r,o,u,d){this.config=o.getConfig(),this.ready=new g.vpe,this.dismiss=new g.vpe,this.timerService=u,this.animationService=d,this.renderer=r,this.element=t.nativeElement,this.elementShift=0}ngAfterViewInit(){this.setup(),this.elementHeight=this.element.offsetHeight,this.elementWidth=this.element.offsetWidth,this.ready.emit(this)}getConfig(){return this.config}getHeight(){return this.elementHeight}getWidth(){return this.elementWidth}getShift(){return this.elementShift}show(){return new Promise(t=>{if(this.config.animations.enabled&&this.config.animations.show.speed>0){const r=this.animationService.getAnimationData("show",this.notification),o=Object.keys(r.keyframes[0]);for(let d=o.length-1;d>=0;d--)this.renderer.setStyle(this.element,o[d],r.keyframes[0][o[d]]);this.renderer.setStyle(this.element,"visibility","visible"),this.element.animate(r.keyframes,r.options).onfinish=()=>{this.startAutoHideTimer(),t()}}else this.renderer.setStyle(this.element,"visibility","visible"),this.startAutoHideTimer(),t()})}hide(){return new Promise(t=>{if(this.stopAutoHideTimer(),this.config.animations.enabled&&this.config.animations.hide.speed>0){const r=this.animationService.getAnimationData("hide",this.notification);this.element.animate(r.keyframes,r.options).onfinish=()=>{t()}}else t()})}shift(t,r){return new Promise(o=>{let u;u="top"===this.config.position.vertical.position&&r||"bottom"===this.config.position.vertical.position&&!r?this.elementShift+t+this.config.position.vertical.gap:this.elementShift-t-this.config.position.vertical.gap;const d="middle"===this.config.position.horizontal.position?"-50%":"0";if(this.config.animations.enabled&&this.config.animations.shift.speed>0){const m={keyframes:[{transform:`translate3d( ${d}, ${this.elementShift}px, 0 )`},{transform:`translate3d( ${d}, ${u}px, 0 )`}],options:{duration:this.config.animations.shift.speed,easing:this.config.animations.shift.easing,fill:"forwards"}};this.elementShift=u,this.element.animate(m.keyframes,m.options).onfinish=()=>{o()}}else this.renderer.setStyle(this.element,"transform",`translate3d( ${d}, ${u}px, 0 )`),this.elementShift=u,o()})}onClickDismiss(){this.dismiss.emit(this.notification.id)}onNotificationMouseover(){"pauseAutoHide"===this.config.behaviour.onMouseover?this.pauseAutoHideTimer():"resetAutoHide"===this.config.behaviour.onMouseover&&this.stopAutoHideTimer()}onNotificationMouseout(){"pauseAutoHide"===this.config.behaviour.onMouseover?this.continueAutoHideTimer():"resetAutoHide"===this.config.behaviour.onMouseover&&this.startAutoHideTimer()}onNotificationClick(){"hide"===this.config.behaviour.onClick&&this.onClickDismiss()}startAutoHideTimer(){!1!==this.config.behaviour.autoHide&&this.config.behaviour.autoHide>0&&this.timerService.start(this.config.behaviour.autoHide).then(()=>{this.onClickDismiss()})}pauseAutoHideTimer(){!1!==this.config.behaviour.autoHide&&this.config.behaviour.autoHide>0&&this.timerService.pause()}continueAutoHideTimer(){!1!==this.config.behaviour.autoHide&&this.config.behaviour.autoHide>0&&this.timerService.continue()}stopAutoHideTimer(){!1!==this.config.behaviour.autoHide&&this.config.behaviour.autoHide>0&&this.timerService.stop()}setup(){"left"===this.config.position.horizontal.position?this.renderer.setStyle(this.element,"left",`${this.config.position.horizontal.distance}px`):"right"===this.config.position.horizontal.position?this.renderer.setStyle(this.element,"right",`${this.config.position.horizontal.distance}px`):(this.renderer.setStyle(this.element,"left","50%"),this.renderer.setStyle(this.element,"transform","translate3d( -50%, 0, 0 )")),this.renderer.setStyle(this.element,"top"===this.config.position.vertical.position?"top":"bottom",`${this.config.position.vertical.distance}px`),this.renderer.addClass(this.element,`notifier__notification--${this.notification.type}`),this.renderer.addClass(this.element,`notifier__notification--${this.config.theme}`)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(QI),g.Y36(Lx),g.Y36(Vx))},n.\u0275cmp=g.Xpm({type:n,selectors:[["notifier-notification"]],hostAttrs:[1,"notifier__notification"],hostBindings:function(t,r){1&t&&g.NdJ("click",function(){return r.onNotificationClick()})("mouseout",function(){return r.onNotificationMouseout()})("mouseover",function(){return r.onNotificationMouseover()})},inputs:{notification:"notification"},outputs:{ready:"ready",dismiss:"dismiss"},features:[g._Bn([Lx])],decls:3,vars:2,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf","ngIfElse"],["predefinedNotification",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"notifier__notification-message"],["class","notifier__notification-button","type","button","title","dismiss",3,"click",4,"ngIf"],["type","button","title","dismiss",1,"notifier__notification-button",3,"click"],["viewBox","0 0 24 24","width","20","height","20",1,"notifier__notification-button-icon"],["d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"]],template:function(t,r){if(1&t&&(g.YNc(0,cO,1,4,"ng-container",0),g.YNc(1,hO,3,2,"ng-template",null,1,g.W1O)),2&t){const o=g.MAs(2);g.Q6J("ngIf",r.notification.template)("ngIfElse",o)}},directives:[Ur,Zu],encapsulation:2,changeDetection:0}),n})(),_O=(()=>{class n{constructor(t,r,o){this.changeDetector=t,this.queueService=r,this.config=o.getConfig(),this.notifications=[],this.queueServiceSubscription=this.queueService.actionStream.subscribe(u=>{this.handleAction(u).then(()=>{this.queueService.continue()})})}ngOnDestroy(){this.queueServiceSubscription&&this.queueServiceSubscription.unsubscribe()}identifyNotification(t,r){return r.id}onNotificationDismiss(t){this.queueService.push({payload:t,type:"HIDE"})}onNotificationReady(t){const r=this.notifications[this.notifications.length-1];r.component=t,this.continueHandleShowAction(r)}handleAction(t){switch(t.type){case"SHOW":return this.handleShowAction(t);case"HIDE":return this.handleHideAction(t);case"HIDE_OLDEST":return this.handleHideOldestAction(t);case"HIDE_NEWEST":return this.handleHideNewestAction(t);case"HIDE_ALL":return this.handleHideAllAction();default:return new Promise(r=>{r()})}}handleShowAction(t){return new Promise(r=>{this.tempPromiseResolver=r,this.addNotificationToList(new pO(t.payload))})}continueHandleShowAction(t){const r=this.notifications.length;if(1===r)t.component.show().then(this.tempPromiseResolver);else if(!1===this.config.behaviour.stacking||this.config.behaviour.stacking<2)this.notifications[0].component.hide().then(()=>{this.removeNotificationFromList(this.notifications[0]),t.component.show().then(this.tempPromiseResolver)});else{const u=[];if(r>this.config.behaviour.stacking){const d=this.notifications.slice(1,r-1);this.config.animations.enabled?!1!==this.config.animations.overlap&&this.config.animations.overlap>0?(u.push(this.notifications[0].component.hide()),setTimeout(()=>{u.push(this.shiftNotifications(d,t.component.getHeight(),!0))},this.config.animations.hide.speed-this.config.animations.overlap),setTimeout(()=>{u.push(t.component.show())},this.config.animations.hide.speed+this.config.animations.shift.speed-this.config.animations.overlap)):u.push(new Promise(m=>{this.notifications[0].component.hide().then(()=>{this.shiftNotifications(d,t.component.getHeight(),!0).then(()=>{t.component.show().then(m)})})})):(u.push(this.notifications[0].component.hide()),u.push(this.shiftNotifications(d,t.component.getHeight(),!0)),u.push(t.component.show()))}else{const d=this.notifications.slice(0,r-1);this.config.animations.enabled?!1!==this.config.animations.overlap&&this.config.animations.overlap>0?(u.push(this.shiftNotifications(d,t.component.getHeight(),!0)),setTimeout(()=>{u.push(t.component.show())},this.config.animations.shift.speed-this.config.animations.overlap)):u.push(new Promise(m=>{this.shiftNotifications(d,t.component.getHeight(),!0).then(()=>{t.component.show().then(m)})})):(u.push(this.shiftNotifications(d,t.component.getHeight(),!0)),u.push(t.component.show()))}Promise.all(u).then(()=>{r>this.config.behaviour.stacking&&this.removeNotificationFromList(this.notifications[0]),this.tempPromiseResolver()})}}handleHideAction(t){return new Promise(r=>{const o=[],u=this.findNotificationById(t.payload);if(void 0===u)return void r();const d=this.findNotificationIndexById(t.payload);if(void 0===d)return void r();const m=this.notifications.slice(0,d);m.length>0?this.config.animations.enabled&&this.config.animations.hide.speed>0?!1!==this.config.animations.overlap&&this.config.animations.overlap>0?(o.push(u.component.hide()),setTimeout(()=>{o.push(this.shiftNotifications(m,u.component.getHeight(),!1))},this.config.animations.hide.speed-this.config.animations.overlap)):u.component.hide().then(()=>{o.push(this.shiftNotifications(m,u.component.getHeight(),!1))}):(o.push(u.component.hide()),o.push(this.shiftNotifications(m,u.component.getHeight(),!1))):o.push(u.component.hide()),Promise.all(o).then(()=>{this.removeNotificationFromList(u),r()})})}handleHideOldestAction(t){return 0===this.notifications.length?new Promise(r=>{r()}):(t.payload=this.notifications[0].id,this.handleHideAction(t))}handleHideNewestAction(t){return 0===this.notifications.length?new Promise(r=>{r()}):(t.payload=this.notifications[this.notifications.length-1].id,this.handleHideAction(t))}handleHideAllAction(){return new Promise(t=>{const r=this.notifications.length;if(0!==r)if(this.config.animations.enabled&&this.config.animations.hide.speed>0&&!1!==this.config.animations.hide.offset&&this.config.animations.hide.offset>0)for(let o=r-1;o>=0;o--)setTimeout(()=>{this.notifications[o].component.hide().then(()=>{("top"===this.config.position.vertical.position&&0===o||"bottom"===this.config.position.vertical.position&&o===r-1)&&(this.removeAllNotificationsFromList(),t())})},this.config.animations.hide.offset*("top"===this.config.position.vertical.position?r-1:o));else{const o=[];for(let u=r-1;u>=0;u--)o.push(this.notifications[u].component.hide());Promise.all(o).then(()=>{this.removeAllNotificationsFromList(),t()})}else t()})}shiftNotifications(t,r,o){return new Promise(u=>{if(0===t.length)return void u();const d=[];for(let m=t.length-1;m>=0;m--)d.push(t[m].component.shift(r,o));Promise.all(d).then(u)})}addNotificationToList(t){this.notifications.push(t),this.changeDetector.markForCheck()}removeNotificationFromList(t){this.notifications=this.notifications.filter(r=>r.component!==t.component),this.changeDetector.markForCheck()}removeAllNotificationsFromList(){this.notifications=[],this.changeDetector.markForCheck()}findNotificationById(t){return this.notifications.find(r=>r.id===t)}findNotificationIndexById(t){const r=this.notifications.findIndex(o=>o.id===t);return-1!==r?r:void 0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.sBO),g.Y36(QT),g.Y36(QI))},n.\u0275cmp=g.Xpm({type:n,selectors:[["notifier-container"]],hostAttrs:[1,"notifier__container"],decls:2,vars:2,consts:[[1,"notifier__container-list"],["class","notifier__container-list-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"notifier__container-list-item"],[3,"notification","ready","dismiss"]],template:function(t,r){1&t&&(g.TgZ(0,"ul",0),g.YNc(1,fO,2,1,"li",1),g.qZA()),2&t&&(g.xp6(1),g.Q6J("ngForOf",r.notifications)("ngForTrackBy",r.identifyNotification))},directives:[yO,Wn],encapsulation:2,changeDetection:0}),n})();function vO(n){return new Fx(n)}function wO(){return new Fx({})}let EO=(()=>{class n{static withConfig(t={}){return{ngModule:n,providers:[{provide:Px,useValue:t},{deps:[Px],provide:JT,useFactory:vO}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Vx,QI,QT,{provide:JT,useFactory:wO}],imports:[[Tr]]}),n})();function IO(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"li",6)(1,"div",7),g._UZ(2,"input",8),g.TgZ(3,"label",9),g._uU(4),g.qZA()(),g.TgZ(5,"div",10)(6,"div",11),g._UZ(7,"button",12),g.TgZ(8,"ul",13)(9,"li",14),g.NdJ("click",function(){const u=g.CHM(t).$implicit;return g.oxw(2).getIdToBeDeleted(u.id)}),g.TgZ(10,"button",15),g._uU(11," Delete "),g.qZA()()()()()()}if(2&n){const t=e.$implicit;g.xp6(2),g.MGl("id","",t.id,"_id"),g.s9C("value",t.text),g.xp6(1),g.MGl("for","",t.id,"_id"),g.xp6(1),g.hij(" ",t.text," ")}}function DO(n,e){if(1&n&&(g.TgZ(0,"ul"),g.YNc(1,IO,12,4,"li",5),g.ALo(2,"async"),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.Q6J("ngForOf",g.lcZ(2,1,t.tasks$))}}function bO(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",16)(1,"div",17)(2,"div",18)(3,"div",19)(4,"h5",20),g._uU(5,"Delete option"),g.qZA(),g._UZ(6,"button",21),g.qZA(),g.TgZ(7,"div",22),g._uU(8," Do you want to delete this task? "),g.qZA(),g.TgZ(9,"div",23)(10,"button",24),g.NdJ("click",function(){return g.CHM(t),g.oxw().onDeleteClicked()}),g._uU(11," Delete "),g.qZA(),g.TgZ(12,"button",25),g._uU(13,"Save changes"),g.qZA()()()()()}}let CO=(()=>{class n{constructor(t,r,o,u,d){this._getsAllTaskDto=t,this._addsTaskDto=r,this._router=o,this._removesTaskDto=u,this.removeTask=new _g({id:new df}),this.tasks$=this._getsAllTaskDto.getAll().pipe((0,xt.U)(m=>m.sort((E,C)=>C.created_at-E.created_at))),this.taskIdToBeDeleted="",this.counter=0,this.notifier=d}onAddTaskClicked(t){var r;this._addsTaskDto.add({text:null===(r=t.get("text"))||void 0===r?void 0:r.value})}onSwitchClicked(){console.log("test");var t=document.getElementById("auxform");null!=t&&(t.style.display="block");var r=document.getElementById("switch");null!=r&&(r.style.display="none")}onItemClicked(t){var r;this._addsTaskDto.add({text:null===(r=t.get("text"))||void 0===r?void 0:r.value})}onDeleteClicked(){this._removesTaskDto.remove(this.taskIdToBeDeleted),this.notifier.notify("success",(++this.counter).toString()+" task has been deleted!")}getIdToBeDeleted(t){this.taskIdToBeDeleted=t}rerouteToHome(){this._router.navigateByUrl("")}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Rx),g.Y36(g_),g.Y36(Zr),g.Y36(Ox),g.Y36(QI))},n.\u0275cmp=g.Xpm({type:n,selectors:[["lib-task-list"]],decls:11,vars:6,consts:[[1,"container"],[1,"form-group"],[4,"ngIf"],["id","switch",1,"btn","text-white",2,"background-color","#7749F8","border","1px solid #7749F8",3,"click"],["class","modal fade","id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",4,"ngFor","ngForOf"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"col-xl-11","col-9"],["type","checkbox","name","flexRadioDefault",1,"form-check-input","fa-solid","fa-circle-dot","strikethrough",3,"id","value"],[1,"form-check-label","strikethrough","pointer",3,"for"],[1,"col-xl-1","col-3"],[1,"dropdown",2,"padding","10px"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","bi","bi-three-dots-vertical"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu",2,"border","none","background-color","rgba(1, 1, 1, 0)"],[2,"width","0px","background-color","white",3,"click"],["data-bs-toggle","modal","data-bs-target","#exampleModal","type","button",1,"btn","btn-sm","btn-outline-danger"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"]],template:function(t,r){if(1&t&&(g._UZ(0,"br"),g.TgZ(1,"div",0)(2,"div",1),g.YNc(3,DO,3,3,"ul",2),g.ALo(4,"async"),g.qZA()(),g.TgZ(5,"div",0),g._UZ(6,"hr"),g.TgZ(7,"button",3),g.NdJ("click",function(){return r.onSwitchClicked()}),g._uU(8,"Add Task"),g.qZA(),g.YNc(9,bO,14,0,"div",4),g.ALo(10,"async"),g.qZA()),2&t){let o;g.xp6(3),g.Q6J("ngIf",0!=(null==(o=g.lcZ(4,2,r.tasks$))?null:o.length)||r.rerouteToHome()),g.xp6(6),g.Q6J("ngForOf",g.lcZ(10,4,r.tasks$))}},directives:[Ur,Wn],pipes:[Ku],encapsulation:2,changeDetection:0}),n})(),TO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-list-page"]],decls:3,vars:0,consts:[["id","auxform"]],template:function(t,r){1&t&&(g._UZ(0,"lib-task-list"),g.TgZ(1,"div",0),g._UZ(2,"lib-add-task"),g.qZA())},directives:[CO,mw],encapsulation:2,changeDetection:0}),n})(),AO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[],imports:[[Tr,wo.forChild([{path:"",component:TO}]),kx,KT,YT]]}),n})();const SO=[{path:"atask",loadChildren:()=>uO},{path:"list",loadChildren:()=>AO},{path:"",loadChildren:()=>tD}];let Ux=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[wo.forRoot(SO)],wo]}),n})(),xO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[],imports:[[Tr,Ux,wo]]}),n})(),MO=(()=>{class n{constructor(){this.todayString=(new Date).toDateString()}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["lib-nav"]],decls:16,vars:10,consts:[[1,"navbar","navbar-expand-l","navbar-dark"],[1,"container-xxl","flex-wrap","flex-md-nowrap",2,"background-color","#7749F8"],[1,"navbar-nav","flex-row","flex-wrap","bd-navbar-nav"],[1,"nav-item","col-6","col-md-auto"],["href","#",1,"navbar-brand"],[1,"container"],[1,"ms-2","fw-normal","fs-6"],[1,"title","fw-bold"],[1,"px-4","fw-bold"]],template:function(t,r){1&t&&(g.TgZ(0,"header",0)(1,"nav",1)(2,"ul",2)(3,"li",3)(4,"a",4),g._uU(5," ANA'S TODO APP "),g.qZA()()()()(),g.TgZ(6,"div",5)(7,"span",6)(8,"h1",7),g._uU(9," TODAY "),g.TgZ(10,"h4",8),g._uU(11),g.ALo(12,"date"),g.ALo(13,"uppercase"),g.ALo(14,"date"),g.qZA()(),g._UZ(15,"hr"),g.qZA()()),2&t&&(g.xp6(11),g.AsE(" ",g.xi3(12,2,r.todayString,"EEE d")," ",g.lcZ(13,5,g.xi3(14,7,r.todayString,"MMM"))," "))},pipes:[yh,Qu],encapsulation:2,changeDetection:0}),n})(),NO=(()=>{class n{constructor(){this.title="todoapp"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,template:function(t,r){1&t&&(g._UZ(0,"lib-nav")(1,"notifier-container"),g.TgZ(2,"div"),g._UZ(3,"router-outlet"),g.qZA())},directives:[MO,_O,Ol],styles:[""]}),n})();const Bx_firestoreConfig={apiKey:"AIzaSyALZo7oVbWai_iy4YCW4g-NZIFm8a9FkYE",authDomain:"todoapp-b30cb.firebaseapp.com",projectId:"todoapp-b30cb",storageBucket:"todoapp-b30cb.appspot.com",messagingSenderId:"562732264903",appId:"1:562732264903:web:b966baf1c7aa5ef6993de2",measurementId:"G-7QDK3LX5LM"};let RO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[NO]}),n.\u0275inj=g.cJS({providers:[],imports:[[va,Ux,xO,bo.hO.initializeApp(Bx_firestoreConfig),EO]]}),n})();(0,g.G48)(),al().bootstrapModule(RO).catch(n=>console.error(n))},5867:(rt,Ce,k)=>{k.d(Ce,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=k(9681);(0,g.registerVersion)("firebase","9.6.10","app")},127:(rt,Ce,k)=>{k.d(Ce,{Z:()=>g.Z});var g=k(3942);g.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(rt,Ce,k)=>{k.r(Ce);var g=k(5861),K=k(3942),O=k(2090),oe=k(9681),J=k(655),pe=k(1877),ie=k(4859);const Re=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Pe=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Je=new pe.Yd("@firebase/auth");function qe(y,...h){Je.logLevel<=pe.in.ERROR&&Je.error(`Auth (${oe.SDK_VERSION}): ${y}`,...h)}function De(y,...h){throw je(y,...h)}function _e(y,...h){return je(y,...h)}function ve(y,h,p){const v=Object.assign(Object.assign({},Pe()),{[h]:p});return new O.LL("auth","Firebase",v).create(h,{appName:y.name})}function $e(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&De(y,"argument-error"),ve(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...h){if("string"!=typeof y){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return he.create(y,...h)}function ee(y,h,...p){if(!y)throw je(h,...p)}function q(y){const h="INTERNAL ASSERTION FAILED: "+y;throw qe(h),new Error(h)}function te(y,h){y||q(h)}const ge=new Map;function ne(y){te(y instanceof Function,"Expected a class definition");let h=ge.get(y);return h?(te(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ge.set(y,h),h)}function vt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Wt(){return"http:"===bn()||"https:"===bn()}function bn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class sn{constructor(h,p){this.shortDelay=h,this.longDelay=p,te(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function it(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Wt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function on(y,h){te(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class wi{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void q("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void q("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void q("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Yi=new sn(3e4,6e4);function Zt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Lt(y,h,p,v){return er.apply(this,arguments)}function er(){return(er=(0,g.Z)(function*(y,h,p,v,T={}){return ni(y,T,(0,g.Z)(function*(){let N={},G={};v&&("GET"===h?G=v:N={body:JSON.stringify(v)});const re=(0,O.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/json",y.languageCode&&(Ve["X-Firebase-Locale"]=y.languageCode),wi.fetch()(Cr(y,y.config.apiHost,p,re),Object.assign({method:h,headers:Ve,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function ni(y,h,p){return ws.apply(this,arguments)}function ws(){return(ws=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Xt),h);try{const T=new Qi(y),N=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const G=yield N.json();if("needConfirmation"in G)throw Ji(y,"account-exists-with-different-credential",G);if(N.ok&&!("errorMessage"in G))return G;{const re=N.ok?G.errorMessage:G.error.message,[Ve,Ke]=re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Ji(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===Ve)throw Ji(y,"email-already-in-use",G);const pt=v[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Ke)throw ve(y,pt,Ke);De(y,pt)}}catch(T){if(T instanceof O.ZR)throw T;De(y,"network-request-failed")}})).apply(this,arguments)}function br(y,h,p,v){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,g.Z)(function*(y,h,p,v,T={}){const N=yield Lt(y,h,p,v,T);return"mfaPendingCredential"in N&&De(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Cr(y,h,p,v){const T=`${h}${p}?${v}`;return y.config.emulator?on(y.config,T):`${y.config.apiScheme}://${T}`}class Qi{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(_e(this.auth,"network-request-failed")),Yi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ji(y,h,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const T=_e(y,h,v);return T.customData._tokenResponse=p,T}function Vr(){return(Vr=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Gn(y,h){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ri(y,h){return Js.apply(this,arguments)}function Js(){return(Js=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function hn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function ca(){return(ca=(0,g.Z)(function*(y,h=!1){const p=(0,O.m9)(y),v=yield p.getIdToken(h),T=et(v);ee(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const N="object"==typeof T.firebase?T.firebase:void 0,G=null==N?void 0:N.sign_in_provider;return{claims:T,token:v,authTime:hn(Vt(T.auth_time)),issuedAtTime:hn(Vt(T.iat)),expirationTime:hn(Vt(T.exp)),signInProvider:G||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function Vt(y){return 1e3*Number(y)}function et(y){const[h,p,v]=y.split(".");if(void 0===h||void 0===p||void 0===v)return qe("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(p);return T?JSON.parse(T):(qe("Failed to decode base64 JWT payload"),null)}catch(T){return qe("Caught error parsing JWT payload as JSON",T),null}}function tr(y,h){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof O.ZR&&Pt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Pt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Xs{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&h.schedule(!0))}h.schedule()})()}}class dr{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=hn(this.lastLoginAt),this.creationTime=hn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function nr(y){return at.apply(this,arguments)}function at(){return(at=(0,g.Z)(function*(y){var h;const p=y.auth,v=yield y.getIdToken(),T=yield tr(y,ri(p,{idToken:v}));ee(null==T?void 0:T.users.length,p,"internal-error");const N=T.users[0];y._notifyReloadListener(N);const G=(null===(h=N.providerUserInfo)||void 0===h?void 0:h.length)?be(N.providerUserInfo):[],re=ze(y.providerData,G),pt=!!y.isAnonymous&&!(y.email&&N.passwordHash||(null==re?void 0:re.length)),nt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:re,metadata:new dr(N.createdAt,N.lastLoginAt),isAnonymous:pt};Object.assign(y,nt)})).apply(this,arguments)}function Ot(){return(Ot=(0,g.Z)(function*(y){const h=(0,O.m9)(y);yield nr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function ze(y,h){return[...y.filter(v=>!h.some(T=>T.providerId===v.providerId)),...h]}function be(y){return y.map(h=>{var{providerId:p}=h,v=(0,J._T)(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function ut(){return(ut=(0,g.Z)(function*(y,h){const p=yield ni(y,{},(0,g.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:N}=y.config,G=Cr(y,T,"/v1/token",`key=${N}`),re=yield y._getAdditionalHeaders();return re["Content-Type"]="application/x-www-form-urlencoded",wi.fetch()(G,{method:"POST",headers:re,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class kt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ee(h.idToken,"internal-error"),ee(void 0!==h.idToken,"internal-error"),ee(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function mt(y){const h=et(y);return ee(h,"internal-error"),ee(void 0!==h.exp,"internal-error"),ee(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var v=this;return(0,g.Z)(function*(){return ee(!v.accessToken||v.refreshToken,h,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,g.Z)(function*(){const{accessToken:T,refreshToken:N,expiresIn:G}=yield function We(y,h){return ut.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(T,N,Number(G))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:T,expirationTime:N}=p,G=new kt;return v&&(ee("string"==typeof v,"internal-error",{appName:h}),G.refreshToken=v),T&&(ee("string"==typeof T,"internal-error",{appName:h}),G.accessToken=T),N&&(ee("number"==typeof N,"internal-error",{appName:h}),G.expirationTime=N),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new kt,this.toJSON())}_performRefresh(){return q("not implemented")}}function Nt(y,h){ee("string"==typeof y||void 0===y,"internal-error",{appName:h})}class U{constructor(h){var{uid:p,auth:v,stsTokenManager:T}=h,N=(0,J._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new dr(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const v=yield tr(p,p.stsTokenManager.getToken(p.auth,h));return ee(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function Es(y){return ca.apply(this,arguments)}(this,h)}reload(){return function hr(y){return Ot.apply(this,arguments)}(this)}_assign(h){this!==h&&(ee(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new U(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var v=this;return(0,g.Z)(function*(){let T=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),T=!0),p&&(yield nr(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield tr(h,function st(y,h){return Vr.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,T,N,G,re,Ve,Ke,pt;const nt=null!==(v=p.displayName)&&void 0!==v?v:void 0,In=null!==(T=p.email)&&void 0!==T?T:void 0,qi=null!==(N=p.phoneNumber)&&void 0!==N?N:void 0,Ul=null!==(G=p.photoURL)&&void 0!==G?G:void 0,Eu=null!==(re=p.tenantId)&&void 0!==re?re:void 0,Iu=null!==(Ve=p._redirectEventId)&&void 0!==Ve?Ve:void 0,Zh=null!==(Ke=p.createdAt)&&void 0!==Ke?Ke:void 0,My=null!==(pt=p.lastLoginAt)&&void 0!==pt?pt:void 0,{uid:ta,emailVerified:fd,isAnonymous:pd,providerData:Kh,stsTokenManager:gd}=p;ee(ta&&gd,h,"internal-error");const Zr=kt.fromJSON(this.name,gd);ee("string"==typeof ta,h,"internal-error"),Nt(nt,h.name),Nt(In,h.name),ee("boolean"==typeof fd,h,"internal-error"),ee("boolean"==typeof pd,h,"internal-error"),Nt(qi,h.name),Nt(Ul,h.name),Nt(Eu,h.name),Nt(Iu,h.name),Nt(Zh,h.name),Nt(My,h.name);const Yh=new U({uid:ta,auth:h,email:In,emailVerified:fd,displayName:nt,isAnonymous:pd,photoURL:Ul,phoneNumber:qi,tenantId:Eu,stsTokenManager:Zr,createdAt:Zh,lastLoginAt:My});return Kh&&Array.isArray(Kh)&&(Yh.providerData=Kh.map(ng=>Object.assign({},ng))),Iu&&(Yh._redirectEventId=Iu),Yh}static _fromIdTokenResponse(h,p,v=!1){return(0,g.Z)(function*(){const T=new kt;T.updateFromServerResponse(p);const N=new U({uid:p.localId,auth:h,stsTokenManager:T,isAnonymous:v});return yield nr(N),N})()}}const $=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,v){var T=this;return(0,g.Z)(function*(){T.storage[p]=v})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=v.storage[p];return void 0===T?null:T})()}_remove(p){var v=this;return(0,g.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function le(y,h,p){return`firebase:${y}:${h}:${p}`}class Y{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:T,name:N}=this.auth;this.fullUserKey=le(this.userKey,T.apiKey,N),this.fullPersistenceKey=le("persistence",T.apiKey,N),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?U._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,v="authUser"){return(0,g.Z)(function*(){if(!p.length)return new Y(ne($),h,v);const T=(yield Promise.all(p.map(function(){var Ke=(0,g.Z)(function*(pt){if(yield pt._isAvailable())return pt});return function(pt){return Ke.apply(this,arguments)}}()))).filter(Ke=>Ke);let N=T[0]||ne($);const G=le(v,h.config.apiKey,h.name);let re=null;for(const Ke of p)try{const pt=yield Ke._get(G);if(pt){const nt=U._fromJSON(h,pt);Ke!==N&&(re=nt),N=Ke;break}}catch(pt){}const Ve=T.filter(Ke=>Ke._shouldAllowMigration);return N._shouldAllowMigration&&Ve.length?(N=Ve[0],re&&(yield N._set(G,re.toJSON())),yield Promise.all(p.map(function(){var Ke=(0,g.Z)(function*(pt){if(pt!==N)try{yield pt._remove(G)}catch(nt){}});return function(pt){return Ke.apply(this,arguments)}}())),new Y(N,h,v)):new Y(N,h,v)})()}}function Le(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ut(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ht(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Tt(h))return"Blackberry";if(an(h))return"Webos";if(Gt(h))return"Safari";if((h.includes("chrome/")||fr(h))&&!h.includes("edge/"))return"Chrome";if(yn(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function ht(y=(0,O.z$)()){return/firefox\//i.test(y)}function Gt(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function fr(y=(0,O.z$)()){return/crios\//i.test(y)}function Ut(y=(0,O.z$)()){return/iemobile/i.test(y)}function yn(y=(0,O.z$)()){return/android/i.test(y)}function Tt(y=(0,O.z$)()){return/blackberry/i.test(y)}function an(y=(0,O.z$)()){return/webos/i.test(y)}function zn(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function Xi(y=(0,O.z$)()){return zn(y)||yn(y)||an(y)||Tt(y)||/windows phone/i.test(y)||Ut(y)}function ha(y,h=[]){let p;switch(y){case"Browser":p=Le((0,O.z$)());break;case"Worker":p=`${Le((0,O.z$)())}-${y}`;break;default:p=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${oe.SDK_VERSION}/${v}`}class ii{constructor(h,p,v){this.app=h,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new St(this),this.idTokenSubscription=new St(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=ne(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var T,N;if(!v._deleted&&(v.persistenceManager=yield Y.create(v,h),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(G){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(N=v.currentUser)||void 0===N?void 0:N.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var v;let T=yield p.assertedPersistence.getCurrentUser();if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const N=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,G=null==T?void 0:T._redirectEventId,re=yield p.tryRedirectSignIn(h);(!N||N===G)&&(null==re?void 0:re.user)&&(T=re.user)}return T?T._redirectEventId?(ee(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===T._redirectEventId?p.directlySetCurrentUser(T):p.reloadAndSetCurrentUserOrClear(T)):p.reloadAndSetCurrentUserOrClear(T):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(T){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){try{yield nr(h)}catch(v){if("auth/network-request-failed"!==v.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function dt(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const v=h?(0,O.m9)(h):null;return v&&ee(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){if(!p._deleted)return h&&ee(p.tenantId===h.tenantId,p,"tenant-id-mismatch"),p.queue((0,g.Z)(function*(){yield p.directlySetCurrentUser(h),p.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(ne(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,g.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(p);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&ne(h)||p._popupRedirectResolver;ee(v,p,"argument-error"),p.redirectPersistenceManager=yield Y.create(p,[ne(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var v,T;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,T){if(this._deleted)return()=>{};const N="function"==typeof p?p:p.next.bind(p),G=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(G,this,"internal-error"),G.then(()=>N(this.currentUser)),"function"==typeof p?h.addObserver(p,v,T):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ha(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function Oe(y){return(0,O.m9)(y)}class St{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function rr(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Mn(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class en{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return q("not implemented")}_getIdTokenResponse(h){return q("not implemented")}_linkToIdToken(h,p){return q("not implemented")}_getReauthenticationResolver(h){return q("not implemented")}}function Cn(y,h){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:resetPassword",Zt(y,h))})).apply(this,arguments)}function bt(y,h){return Po.apply(this,arguments)}function Po(){return(Po=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function to(y,h){return fa.apply(this,arguments)}function fa(){return(fa=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",Zt(y,h))})).apply(this,arguments)}function Wn(){return(Wn=(0,g.Z)(function*(y,h){return br(y,"POST","/v1/accounts:signInWithPassword",Zt(y,h))})).apply(this,arguments)}function es(y,h){return ts.apply(this,arguments)}function ts(){return(ts=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:sendOobCode",Zt(y,h))})).apply(this,arguments)}function Ur(y,h){return tn.apply(this,arguments)}function tn(){return(tn=(0,g.Z)(function*(y,h){return es(y,h)})).apply(this,arguments)}function qa(y,h){return za.apply(this,arguments)}function za(){return(za=(0,g.Z)(function*(y,h){return es(y,h)})).apply(this,arguments)}function Ei(y,h){return si.apply(this,arguments)}function si(){return(si=(0,g.Z)(function*(y,h){return es(y,h)})).apply(this,arguments)}function Rc(y,h){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,g.Z)(function*(y,h){return es(y,h)})).apply(this,arguments)}function Br(){return(Br=(0,g.Z)(function*(y,h){return br(y,"POST","/v1/accounts:signInWithEmailLink",Zt(y,h))})).apply(this,arguments)}function Zu(){return(Zu=(0,g.Z)(function*(y,h){return br(y,"POST","/v1/accounts:signInWithEmailLink",Zt(y,h))})).apply(this,arguments)}class Za extends en{constructor(h,p,v,T=null){super("password",v),this._email=h,this._password=p,this._tenantId=T}static _fromEmailAndPassword(h,p){return new Za(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new Za(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function bs(y,h){return Wn.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Wa(y,h){return Br.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:De(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,g.Z)(function*(){switch(v.signInMethod){case"password":return bt(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function mh(y,h){return Zu.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:De(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Nn(y,h){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,g.Z)(function*(y,h){return br(y,"POST","/v1/accounts:signInWithIdp",Zt(y,h))})).apply(this,arguments)}class ns extends en{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new ns(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):De("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T}=p,N=(0,J._T)(p,["providerId","signInMethod"]);if(!v||!T)return null;const G=new ns(v,T);return G.idToken=N.idToken||void 0,G.accessToken=N.accessToken||void 0,G.secret=N.secret,G.nonce=N.nonce,G.pendingToken=N.pendingToken||null,G}_getIdTokenResponse(h){return Nn(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Nn(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Nn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function Rp(y,h){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:sendVerificationCode",Zt(y,h))})).apply(this,arguments)}function Ts(){return(Ts=(0,g.Z)(function*(y,h){return br(y,"POST","/v1/accounts:signInWithPhoneNumber",Zt(y,h))})).apply(this,arguments)}function Qu(){return(Qu=(0,g.Z)(function*(y,h){const p=yield br(y,"POST","/v1/accounts:signInWithPhoneNumber",Zt(y,h));if(p.temporaryProof)throw Ji(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const kp={USER_NOT_FOUND:"user-not-found"};function kc(){return(kc=(0,g.Z)(function*(y,h){return br(y,"POST","/v1/accounts:signInWithPhoneNumber",Zt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),kp)})).apply(this,arguments)}class Fo extends en{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Fo({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Fo({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Yu(y,h){return Ts.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Op(y,h){return Qu.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function yh(y,h){return kc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:T}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:N}=h;return v||p||T||N?new Fo({verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:N}):null}}class no{constructor(h){var p,v,T,N,G,re;const Ve=(0,O.zd)((0,O.pd)(h)),Ke=null!==(p=Ve.apiKey)&&void 0!==p?p:null,pt=null!==(v=Ve.oobCode)&&void 0!==v?v:null,nt=function ty(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ve.mode)&&void 0!==T?T:null);ee(Ke&&pt&&nt,"argument-error"),this.apiKey=Ke,this.operation=nt,this.code=pt,this.continueUrl=null!==(N=Ve.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(G=Ve.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(re=Ve.tenantId)&&void 0!==re?re:null}static parseLink(h){const p=function Ka(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||p||h||y}(h);try{return new no(p)}catch(v){return null}}}let Ju=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return Za._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const T=no.parseLink(v);return ee(T,"argument-error"),Za._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class As{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class jr extends As{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Lo extends jr{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return ee("providerId"in p&&"signInMethod"in p,"argument-error"),ns._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ee(h.idToken||h.accessToken,"argument-error"),ns._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Lo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Lo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:N,nonce:G,providerId:re}=h;if(!v&&!T&&!p&&!N||!re)return null;try{return new Lo(re)._credential({idToken:p,accessToken:v,nonce:G,pendingToken:N})}catch(Ve){return null}}}let ro=(()=>{class y extends jr{constructor(){super("facebook.com")}static credential(p){return ns._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),pa=(()=>{class y extends jr{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return ns._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:T}=p;if(!v&&!T)return null;try{return y.credential(v,T)}catch(N){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Pc=(()=>{class y extends jr{constructor(){super("github.com")}static credential(p){return ns._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Tr extends en{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Nn(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Nn(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Nn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T,pendingToken:N}=p;return v&&T&&N&&v===T?new Tr(v,N):null}static _create(h,p){return new Tr(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class oi extends As{constructor(h){ee(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return oi.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return oi.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Tr.fromJSON(h);return ee(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return Tr._create(v,p)}catch(T){return null}}}let Ya=(()=>{class y extends jr{constructor(){super("twitter.com")}static credential(p,v){return ns._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=p;if(!v||!T)return null;try{return y.credential(v,T)}catch(N){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Qa(y,h){return $r.apply(this,arguments)}function $r(){return($r=(0,g.Z)(function*(y,h){return br(y,"POST","/v1/accounts:signUp",Zt(y,h))})).apply(this,arguments)}class ir{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v,T=!1){return(0,g.Z)(function*(){const N=yield U._fromIdTokenResponse(h,v,T),G=vh(v);return new ir({user:N,providerId:G,_tokenResponse:v,operationType:p})})()}static _forOperation(h,p,v){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const T=vh(v);return new ir({user:h,providerId:T,_tokenResponse:v,operationType:p})})()}}function vh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Fc(){return(Fc=(0,g.Z)(function*(y){var h;const p=Oe(y);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new ir({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield Qa(p,{returnSecureToken:!0}),T=yield ir._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class Xa extends O.ZR{constructor(h,p,v,T){var N;super(p.code,p.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,Xa.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,T){return new Xa(h,p,v,T)}}function eu(y,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Xa._fromErrorAndOperation(y,N,h,v):N})}function rs(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Xu(){return(Xu=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);yield xs(!0,p,h);const{providerUserInfo:v}=yield Gn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),T=rs(v||[]);return p.providerData=p.providerData.filter(N=>T.has(N.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function dn(y,h){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,g.Z)(function*(y,h,p=!1){const v=yield tr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return ir._forOperation(y,"link",v)})).apply(this,arguments)}function xs(y,h,p){return nn.apply(this,arguments)}function nn(){return(nn=(0,g.Z)(function*(y,h,p){yield nr(h);const T=!1===y?"provider-already-linked":"no-such-provider";ee(rs(h.providerData).has(p)===y,h.auth,T)})).apply(this,arguments)}function Lc(y,h){return io.apply(this,arguments)}function io(){return(io=(0,g.Z)(function*(y,h,p=!1){const{auth:v}=y,T="reauthenticate";try{const N=yield tr(y,eu(v,T,h,y),p);ee(N.idToken,v,"internal-error");const G=et(N.idToken);ee(G,v,"internal-error");const{sub:re}=G;return ee(y.uid===re,v,"user-mismatch"),ir._forOperation(y,T,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&De(v,"user-mismatch"),N}})).apply(this,arguments)}function so(y,h){return pr.apply(this,arguments)}function pr(){return(pr=(0,g.Z)(function*(y,h,p=!1){const v="signIn",T=yield eu(y,v,h),N=yield ir._fromIdTokenResponse(y,v,T);return p||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Tn(y,h){return ma.apply(this,arguments)}function ma(){return(ma=(0,g.Z)(function*(y,h){return so(Oe(y),h)})).apply(this,arguments)}function Ii(y,h){return gr.apply(this,arguments)}function gr(){return(gr=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);return yield xs(!1,p,h.providerId),dn(p,h)})).apply(this,arguments)}function Ms(y,h){return is.apply(this,arguments)}function is(){return(is=(0,g.Z)(function*(y,h){return Lc((0,O.m9)(y),h)})).apply(this,arguments)}function tu(y,h){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,g.Z)(function*(y,h){return br(y,"POST","/v1/accounts:signInWithCustomToken",Zt(y,h))})).apply(this,arguments)}function Rs(){return(Rs=(0,g.Z)(function*(y,h){const p=Oe(y),v=yield tu(p,{token:h,returnSecureToken:!0}),T=yield ir._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class lt{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?nu._fromServerResponse(h,p):De(h,"internal-error")}}class nu extends lt{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new nu(p)}}function ya(y,h,p){var v;ee((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),ee(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ee(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(ee(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function iu(){return(iu=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:h};p&&ya(v,T,p),yield qa(v,T)})).apply(this,arguments)}function el(){return(el=(0,g.Z)(function*(y,h,p){yield Cn((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Ee(){return(Ee=(0,g.Z)(function*(y,h){yield to((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function Rt(y,h){return nl.apply(this,arguments)}function nl(){return(nl=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),v=yield Cn(p,{oobCode:h}),T=v.requestType;switch(ee(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(v.mfaInfo,p,"internal-error");default:ee(v.email,p,"internal-error")}let N=null;return v.mfaInfo&&(N=lt._fromServerResponse(Oe(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:N},operation:T}})).apply(this,arguments)}function Uo(){return(Uo=(0,g.Z)(function*(y,h){const{data:p}=yield Rt((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function Gr(){return(Gr=(0,g.Z)(function*(y,h,p){const v=Oe(y),T=yield Qa(v,{returnSecureToken:!0,email:h,password:p}),N=yield ir._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(N.user),N})).apply(this,arguments)}function Vc(){return(Vc=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:h};ee(p.handleCodeInApp,v,"argument-error"),p&&ya(v,T,p),yield Ei(v,T)})).apply(this,arguments)}function Os(){return(Os=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T=Ju.credentialWithLink(h,p||vt());return ee(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Tn(v,T)})).apply(this,arguments)}function sr(y,h){return ai.apply(this,arguments)}function ai(){return(ai=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:createAuthUri",Zt(y,h))})).apply(this,arguments)}function ks(){return(ks=(0,g.Z)(function*(y,h){const v={identifier:h,continueUri:Wt()?vt():"http://localhost"},{signinMethods:T}=yield sr((0,O.m9)(y),v);return T||[]})).apply(this,arguments)}function ol(){return(ol=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&ya(p.auth,T,h);const{email:N}=yield Ur(p.auth,T);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function lu(){return(lu=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&ya(v.auth,N,p);const{email:G}=yield Rc(v.auth,N);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function al(y,h){return _a.apply(this,arguments)}function _a(){return(_a=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ul(){return(ul=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,O.m9)(y),N={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},G=yield tr(v,al(v.auth,N));v.displayName=G.displayName||null,v.photoURL=G.photoUrl||null;const re=v.providerData.find(({providerId:Ve})=>"password"===Ve);re&&(re.displayName=v.displayName,re.photoURL=v.photoURL),yield v._updateTokensIfNecessary(G)})).apply(this,arguments)}function cl(y,h,p){return oo.apply(this,arguments)}function oo(){return(oo=(0,g.Z)(function*(y,h,p){const{auth:v}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(N.email=h),p&&(N.password=p);const G=yield tr(y,bt(v,N));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class ao{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class jc extends ao{constructor(h,p,v,T){super(h,p,v),this.username=T}}class $c extends ao{constructor(h,p){super(h,"facebook.com",p)}}class uo extends jc{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Ps extends ao{constructor(h,p){super(h,"google.com",p)}}class dl extends jc{constructor(h,p,v){super(h,"twitter.com",p,v)}}function mr(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Bc(y){var h,p;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const G=null===(p=null===(h=et(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(G)return new ao(N,"anonymous"!==G&&"custom"!==G?G:null)}if(!v)return null;switch(v){case"facebook.com":return new $c(N,T);case"github.com":return new uo(N,T);case"google.com":return new Ps(N,T);case"twitter.com":return new dl(N,T,y.screenName||null);case"custom":case"anonymous":return new ao(N,null);default:return new ao(N,v,T)}}(p)}class ss{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new ss("enroll",h)}static _fromMfaPendingCredential(h){return new ss("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return ss._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return ss._fromIdtoken(h.multiFactorSession.idToken)}return null}}class wa{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=Oe(h),T=p.customData._serverResponse,N=(T.mfaInfo||[]).map(re=>lt._fromServerResponse(v,re));ee(T.mfaPendingCredential,v,"internal-error");const G=ss._fromMfaPendingCredential(T.mfaPendingCredential);return new wa(G,N,function(){var re=(0,g.Z)(function*(Ve){const Ke=yield Ve._process(v,G);delete T.mfaInfo,delete T.mfaPendingCredential;const pt=Object.assign(Object.assign({},T),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(p.operationType){case"signIn":const nt=yield ir._fromIdTokenResponse(v,p.operationType,pt);return yield v._updateCurrentUser(nt.user),nt;case"reauthenticate":return ee(p.user,v,"internal-error"),ir._forOperation(p.user,p.operationType,pt);default:De(v,"internal-error")}});return function(Ve){return re.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function Rn(y,h){return Lt(y,"POST","/v2/accounts/mfaEnrollment:start",Zt(y,h))}class os{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>lt._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new os(h)}getSession(){var h=this;return(0,g.Z)(function*(){return ss._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var v=this;return(0,g.Z)(function*(){const T=h,N=yield v.getSession(),G=yield tr(v.user,T._process(v.user.auth,N,p));return yield v.user._updateTokensIfNecessary(G),v.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){const v="string"==typeof h?h:h.uid,T=yield p.user.getIdToken(),N=yield tr(p.user,function Fp(y,h){return Lt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Zt(y,h))}(p.user.auth,{idToken:T,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:G})=>G!==v),yield p.user._updateTokensIfNecessary(N);try{yield p.user.reload()}catch(G){if("auth/user-token-expired"!==G.code)throw G}})()}}const jo=new WeakMap,pl="__sak";class lo{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(pl,"1"),this.storage.removeItem(pl),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Sn=(()=>{class y extends lo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function zc(){const y=(0,O.z$)();return Gt(y)||zn(y)}()&&function Vn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Xi(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),N=this.localCache[v];T!==N&&p(v,N,T)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((re,Ve,Ke)=>{this.notifyListeners(re,Ke)});const T=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const re=this.storage.getItem(T);if(p.newValue!==re)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!v)return}const N=()=>{const re=this.storage.getItem(T);!v&&this.localCache[T]===re||this.notifyListeners(T,re)},G=this.storage.getItem(T);!function da(){return(0,O.w1)()&&10===document.documentMode}()||G===p.newValue||p.newValue===p.oldValue?N():setTimeout(N,10)}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const N of Array.from(T))N(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var T=()=>super._set,N=this;return(0,g.Z)(function*(){yield T().call(N,p,v),N.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,T=this;return(0,g.Z)(function*(){const N=yield v().call(T,p);return T.localCache[p]=JSON.stringify(N),N})()}_remove(p){var v=()=>super._remove,T=this;return(0,g.Z)(function*(){yield v().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),Zn=(()=>{class y extends lo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let zr=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(N=>N.isListeningto(p));if(v)return v;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,g.Z)(function*(){const T=p,{eventId:N,eventType:G,data:re}=T.data,Ve=v.handlersMap[G];if(!(null==Ve?void 0:Ve.size))return;T.ports[0].postMessage({status:"ack",eventId:N,eventType:G});const Ke=Array.from(Ve).map(function(){var nt=(0,g.Z)(function*(In){return In(T.origin,re)});return function(In){return nt.apply(this,arguments)}}()),pt=yield function qr(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}(Ke);T.ports[0].postMessage({status:"done",eventId:N,eventType:G,response:pt})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function $o(y="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return y+p}class Wc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,v=50){var T=this;return(0,g.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let G,re;return new Promise((Ve,Ke)=>{const pt=$o("",20);N.port1.start();const nt=setTimeout(()=>{Ke(new Error("unsupported_event"))},v);re={messageChannel:N,onMessage(In){const qi=In;if(qi.data.eventId===pt)switch(qi.data.status){case"ack":clearTimeout(nt),G=setTimeout(()=>{Ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Ve(qi.data.response);break;default:clearTimeout(nt),clearTimeout(G),Ke(new Error("invalid_response"))}}},T.handlers.add(re),N.port1.addEventListener("message",re.onMessage),T.target.postMessage({eventType:h,eventId:pt,data:p},[N.port2])}).finally(()=>{re&&T.removeMessageHandler(re)})})()}}function ln(){return window}function bi(){return void 0!==ln().WorkerGlobalScope&&"function"==typeof ln().importScripts}function ui(){return(ui=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const gl="firebaseLocalStorageDb",co="firebaseLocalStorage",On="fbase_key";class as{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Ho(y,h){return y.transaction([co],h?"readwrite":"readonly").objectStore(co)}function Ls(){const y=indexedDB.open(gl,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(co,{keyPath:On})}catch(T){p(T)}}),y.addEventListener("success",(0,g.Z)(function*(){const v=y.result;v.objectStoreNames.contains(co)?h(v):(v.close(),yield function li(){const y=indexedDB.deleteDatabase(gl);return new as(y).toPromise()}(),h(yield Ls()))}))})}function Ea(y,h,p){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,g.Z)(function*(y,h,p){const v=Ho(y,!0).put({[On]:h,value:p});return new as(v).toPromise()})).apply(this,arguments)}function Vs(){return(Vs=(0,g.Z)(function*(y,h){const p=Ho(y,!1).get(h),v=yield new as(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Ui(y,h){const p=Ho(y,!0).delete(h);return new as(p).toPromise()}const Ci=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield Ls()),p.db})()}_withRetries(p){var v=this;return(0,g.Z)(function*(){let T=0;for(;;)try{const N=yield v._openDb();return yield p(N)}catch(N){if(T++>3)throw N;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return bi()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=zr._getInstance(function Zc(){return bi()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,g.Z)(function*(T,N){return{keyProcessed:(yield p._poll()).includes(N.key)}});return function(T,N){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,g.Z)(function*(T,N){return["keyChanged"]});return function(T,N){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var v,T;if(p.activeServiceWorker=yield function du(){return ui.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Wc(p.activeServiceWorker);const N=yield p.sender._send("ping",{},800);!N||(null===(v=N[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=N[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,g.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function xt(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Ls();return yield Ea(p,pl,"1"),yield Ui(p,pl),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,g.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var T=this;return(0,g.Z)(function*(){return T._withPendingWrite((0,g.Z)(function*(){return yield T._withRetries(N=>Ea(N,p,v)),T.localCache[p]=v,T.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=yield v._withRetries(N=>function ml(y,h){return Vs.apply(this,arguments)}(N,p));return v.localCache[p]=T,T})()}_remove(p){var v=this;return(0,g.Z)(function*(){return v._withPendingWrite((0,g.Z)(function*(){return yield v._withRetries(T=>Ui(T,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const v=yield p._withRetries(G=>{const re=Ho(G,!1).getAll();return new as(re).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const T=[],N=new Set;for(const{fbase_key:G,value:re}of v)N.add(G),JSON.stringify(p.localCache[G])!==JSON.stringify(re)&&(p.notifyListeners(G,re),T.push(G));for(const G of Object.keys(p.localCache))p.localCache[G]&&!N.has(G)&&(p.notifyListeners(G,null),T.push(G));return T})()}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const N of Array.from(T))N(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function qo(y,h){return Lt(y,"POST","/v2/accounts/mfaSignIn:start",Zt(y,h))}function Ti(){return(Ti=(0,g.Z)(function*(y){return(yield Lt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function xn(y){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=T=>{const N=_e("internal-error");N.customData=T,p(N)},v.type="text/javascript",v.charset="UTF-8",function Qc(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function zo(y){return`__${y}${Math.floor(1e6*Math.random())}`}const yr=1e12;class us{constructor(h){this.auth=h,this.counter=yr,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new Bi(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||yr;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||yr))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var v;return null===(v=p._widgets.get(h||yr))||void 0===v||v.execute(),""})()}}class Bi{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;ee(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function vn(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Us=zo("rcb"),Jc=new sn(3e4,6e4);class Vp{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ln().grecaptcha}load(h,p=""){return ee(function Up(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(ln().grecaptcha):new Promise((v,T)=>{const N=ln().setTimeout(()=>{T(_e(h,"network-request-failed"))},Jc.get());ln()[Us]=()=>{ln().clearTimeout(N),delete ln()[Us];const re=ln().grecaptcha;if(!re)return void T(_e(h,"internal-error"));const Ve=re.render;re.render=(Ke,pt)=>{const nt=Ve(Ke,pt);return this.counter++,nt},this.hostLanguage=p,v(re)},xn(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Us,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(N),T(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!ln().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Bp{load(h){return(0,g.Z)(function*(){return new us(h)})()}clearedOneInstance(){}}const Bs="recaptcha",Wr={theme:"light",type:"image"};class jp{constructor(h,p=Object.assign({},Wr),v){this.parameters=p,this.type=Bs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Oe(v),this.isInvisible="invisible"===this.parameters.size,ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;ee(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bp:new Vp,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(N=>{const G=re=>{!re||(h.tokenChangeListeners.delete(G),N(re))};h.tokenChangeListeners.add(G),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=ln()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){ee(Wt()&&!bi(),h.auth,"internal-error"),yield function js(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Ar(y){return Ti.apply(this,arguments)}(h.auth);ee(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ls{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Fo._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function gn(){return(gn=(0,g.Z)(function*(y,h,p){const v=Oe(y),T=yield _r(v,h,(0,O.m9)(p));return new ls(T,N=>Tn(v,N))})).apply(this,arguments)}function Zo(){return(Zo=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);yield xs(!1,v,"phone");const T=yield _r(v.auth,h,(0,O.m9)(p));return new ls(T,N=>Ii(v,N))})).apply(this,arguments)}function vl(){return(vl=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T=yield _r(v.auth,h,(0,O.m9)(p));return new ls(T,N=>Ms(v,N))})).apply(this,arguments)}function _r(y,h,p){return ci.apply(this,arguments)}function ci(){return(ci=(0,g.Z)(function*(y,h,p){var v;const T=yield p.verify();try{let N;if(ee("string"==typeof T,y,"argument-error"),ee(p.type===Bs,y,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const G=N.session;if("phoneNumber"in N)return ee("enroll"===G.type,y,"internal-error"),(yield Rn(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{ee("signin"===G.type,y,"internal-error");const re=(null===(v=N.multiFactorHint)||void 0===v?void 0:v.uid)||N.multiFactorUid;return ee(re,y,"missing-multi-factor-info"),(yield qo(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:re,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield Rp(y,{phoneNumber:N.phoneNumber,recaptchaToken:T});return G}}finally{p._reset()}})).apply(this,arguments)}function cs(){return(cs=(0,g.Z)(function*(y,h){yield dn((0,O.m9)(y),h)})).apply(this,arguments)}let Si=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=Oe(p)}verifyPhoneNumber(p,v){return _r(this.auth,p,(0,O.m9)(v))}static credential(p,v){return Fo._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:T}=p;return v&&T?Fo._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function ji(y,h){return h?ne(h):(ee(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Da extends en{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Nn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Nn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Nn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function El(y){return so(y.auth,new Da(y),y.bypassAuthState)}function Il(y){const{auth:h,user:p}=y;return ee(p,h,"internal-error"),Lc(p,new Da(y),y.bypassAuthState)}function Mt(y){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return ee(p,h,"internal-error"),dn(p,new Da(y),y.bypassAuthState)})).apply(this,arguments)}class Un{constructor(h,p,v,T,N=!1){this.auth=h,this.resolver=v,this.user=T,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(v,T){h.pendingPromise={resolve:v,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(v,T){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:N,tenantId:G,error:re,type:Ve}=h;if(re)return void p.reject(re);const Ke={auth:p.auth,requestUri:v,sessionId:T,tenantId:G||void 0,postBody:N||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ve)(Ke))}catch(pt){p.reject(pt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return El;case"linkViaPopup":case"linkViaRedirect":return Mt;case"reauthViaPopup":case"reauthViaRedirect":return Il;default:De(this.auth,"internal-error")}}resolve(h){te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bl=new sn(2e3,1e4);function Xc(){return(Xc=(0,g.Z)(function*(y,h,p){const v=Oe(y);$e(y,h,As);const T=ji(v,p);return new Hi(v,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function fu(){return(fu=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);$e(v.auth,h,As);const T=ji(v.auth,p);return new Hi(v.auth,"reauthViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}function pu(){return(pu=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);$e(v.auth,h,As);const T=ji(v.auth,p);return new Hi(v.auth,"linkViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}let Hi=(()=>{class y extends Un{constructor(p,v,T,N,G){super(p,v,N,G),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const v=yield p.execute();return ee(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,g.Z)(function*(){te(1===p.filter.length,"Popup operations only handle one event");const v=$o();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(_e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,bl.get())};p()}}return y.currentPopupAction=null,y})();const Gi=new Map;class Bn extends Un{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let v=Gi.get(p.auth._key());if(!v){try{const N=(yield function di(y,h){return Cl.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(N)}catch(T){v=()=>Promise.reject(T)}Gi.set(p.auth._key(),v)}return p.bypassAuthState||Gi.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const T=yield v.auth._redirectUserForId(h.eventId);if(T)return v.user=T,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Cl(){return(Cl=(0,g.Z)(function*(y,h){const p=b(h),v=D(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(p));return yield v._remove(p),T})).apply(this,arguments)}function fo(y,h){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,g.Z)(function*(y,h){return D(y)._set(b(h),"true")})).apply(this,arguments)}function D(y){return ne(y._redirectPersistence)}function b(y){return le("pendingRedirect",y.config.apiKey,y.name)}function z(){return(z=(0,g.Z)(function*(y,h,p){const v=Oe(y);$e(y,h,As);const T=ji(v,p);return yield fo(T,v),T._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function Se(){return(Se=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);$e(v.auth,h,As);const T=ji(v.auth,p);yield fo(T,v.auth);const N=yield po(v);return T._openRedirect(v.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function At(){return(At=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);$e(v.auth,h,As);const T=ji(v.auth,p);yield xs(!1,v,h.providerId),yield fo(T,v.auth);const N=yield po(v);return T._openRedirect(v.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function kn(){return(kn=(0,g.Z)(function*(y,h){return yield Oe(y)._initializationPromise,En(y,h,!1)})).apply(this,arguments)}function En(y,h){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,g.Z)(function*(y,h,p=!1){const v=Oe(y),T=ji(v,h),G=yield new Bn(v,T,p).execute();return G&&!p&&(delete G.user._redirectEventId,yield v._persistUserIfCurrent(G.user),yield v._setRedirectUser(null,h)),G})).apply(this,arguments)}function po(y){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,g.Z)(function*(y){const h=$o(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class xi{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Tl(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return td(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!td(h)){const T=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(_e(this.auth,T))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(go(h))}saveEventToCache(h){this.cachedEventUids.add(go(h)),this.lastProcessedEventTime=Date.now()}}function go(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function td({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Al(y){return ba.apply(this,arguments)}function ba(){return(ba=(0,g.Z)(function*(y,h={}){return Lt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Hp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ry=/^https?/;function ds(){return(ds=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Al(y);for(const p of h)try{if(Sl(p))return}catch(v){}De(y,"unauthorized-domain")})).apply(this,arguments)}function Sl(y){const h=vt(),{protocol:p,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&G.hostname===v}if(!ry.test(p))return!1;if(Hp.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const sy=new sn(3e4,6e4);function oy(){const y=ln().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let nd=null;function ay(y){return nd=nd||function Gp(y){return new Promise((h,p)=>{var v,T,N;function G(){oy(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{oy(),p(_e(y,"network-request-failed"))},timeout:sy.get()})}if(null===(T=null===(v=ln().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(N=ln().gapi)||void 0===N?void 0:N.load)){const re=zo("iframefcb");return ln()[re]=()=>{gapi.load?G():p(_e(y,"network-request-failed"))},xn(`https://apis.google.com/js/api.js?onload=${re}`).catch(Ve=>p(Ve))}G()}}).catch(h=>{throw nd=null,h})}(y),nd}const Ih=new sn(5e3,15e3),yo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ca(y){const h=y.config;ee(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?on(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:oe.SDK_VERSION},T=rd.get(y.config.apiHost);T&&(v.eid=T);const N=y._getFrameworks();return N.length&&(v.fw=N.join(",")),`${p}?${(0,O.xO)(v).slice(1)}`}function Qo(){return Qo=(0,g.Z)(function*(y){const h=yield ay(y),p=ln().gapi;return ee(p,y,"internal-error"),h.open({where:document.body,url:Ca(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yo,dontclear:!0},v=>new Promise(function(){var T=(0,g.Z)(function*(N,G){yield v.restyle({setHideOnLeave:!1});const re=_e(y,"network-request-failed"),Ve=ln().setTimeout(()=>{G(re)},Ih.get());function Ke(){ln().clearTimeout(Ve),N(v)}v.ping(Ke).then(Ke,()=>{G(re)})});return function(N,G){return T.apply(this,arguments)}}()))}),Qo.apply(this,arguments)}const ly={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class od{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Th(y,h,p,v,T,N){ee(y.config.authDomain,y,"auth-domain-config-required"),ee(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:oe.SDK_VERSION,eventId:T};if(h instanceof As){h.setDefaultLanguage(y.languageCode),G.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(G.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ve,Ke]of Object.entries(N||{}))G[Ve]=Ke}if(h instanceof jr){const Ve=h.getScopes().filter(Ke=>""!==Ke);Ve.length>0&&(G.scopes=Ve.join(","))}y.tenantId&&(G.tid=y.tenantId);const re=G;for(const Ve of Object.keys(re))void 0===re[Ve]&&delete re[Ve];return`${function dy({config:y}){return y.emulator?on(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(re).slice(1)}`}const Hs="webStorageSupport";class Ah extends class qp{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return q("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Ah(h)}_finalizeEnroll(h,p,v){return function Gc(y,h){return Lt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Zt(y,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Ia(y,h){return Lt(y,"POST","/v2/accounts/mfaSignIn:finalize",Zt(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let hy=(()=>{class y{constructor(){}static assertion(p){return Ah._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var fy="@firebase/auth",Sh="0.19.11";class zp{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{var T;h((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Gs(){return window}function _u(){return(_u=(0,g.Z)(function*(y,h,p){var v;const{BuildInfo:T}=Gs();te(h.sessionId,"AuthEvent did not contain a session ID");const N=yield Ta(h.sessionId),G={};return zn()?G.ibi=T.packageName:yn()?G.apn=T.packageName:De(y,"operation-not-supported-in-this-environment"),T.displayName&&(G.appDisplayName=T.displayName),G.sessionId=N,Th(y,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,G)})).apply(this,arguments)}function Mi(){return(Mi=(0,g.Z)(function*(y){const{BuildInfo:h}=Gs(),p={};zn()?p.iosBundleId=h.packageName:yn()?p.androidPackageName=h.packageName:De(y,"operation-not-supported-in-this-environment"),yield Al(y,p)})).apply(this,arguments)}function ud(){return(ud=(0,g.Z)(function*(y,h,p){const{cordova:v}=Gs();let T=()=>{};try{yield new Promise((N,G)=>{let re=null;function Ve(){var nt;N();const In=null===(nt=v.plugins.browsertab)||void 0===nt?void 0:nt.close;"function"==typeof In&&In(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Ke(){re||(re=window.setTimeout(()=>{G(_e(y,"redirect-cancelled-by-user"))},2e3))}function pt(){"visible"===(null==document?void 0:document.visibilityState)&&Ke()}h.addPassiveListener(Ve),document.addEventListener("resume",Ke,!1),yn()&&document.addEventListener("visibilitychange",pt,!1),T=()=>{h.removePassiveListener(Ve),document.removeEventListener("resume",Ke,!1),document.removeEventListener("visibilitychange",pt,!1),re&&window.clearTimeout(re)}})}finally{T()}})).apply(this,arguments)}function Ta(y){return Zp.apply(this,arguments)}function Zp(){return(Zp=(0,g.Z)(function*(y){const h=vu(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function vu(y){if(te(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}!function gy(y){(0,oe._registerComponent)(new ie.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:N,authDomain:G}=v.options;return((re,Ve)=>{ee(N&&!N.includes(":"),"invalid-api-key",{appName:re.name}),ee(!(null==G?void 0:G.includes(":")),"argument-error",{appName:re.name});const Ke={apiKey:N,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ha(y)},pt=new ii(re,Ve,Ke);return function se(y,h){const p=(null==h?void 0:h.persistence)||[],v=(Array.isArray(p)?p:[p]).map(ne);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(pt,p),pt})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new ie.wA("auth-internal",h=>{const p=Oe(h.getProvider("auth").getImmediate());return new zp(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(fy,Sh,function py(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(fy,Sh,"esm2017")}("Browser");class Rh extends xi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function Nl(y){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,g.Z)(function*(y){const h=yield Ol()._get(kh(y));return h&&(yield Ol()._remove(kh(y))),h})).apply(this,arguments)}function Rl(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function Ol(){return ne(Sn)}function kh(y){return le("authEvent",y.config.apiKey,y.name)}function cd(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function Vh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function dd(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Yp(y=(0,O.z$)()){return!("file:"!==dd()&&"ionic:"!==dd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function vr(){try{const y=self.localStorage,h=$o();if(y)return y.setItem(h,"1"),y.removeItem(h),!function ea(y=(0,O.z$)()){return function wy(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Ey(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return _o()&&(0,O.hl)()}return!1}function _o(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fl(){return(function vy(){return"http:"===dd()||"https:"===dd()}()||(0,O.ru)()||Yp())&&!function hd(){return(0,O.b$)()||(0,O.UG)()}()&&vr()&&!_o()}function Uh(){return Yp()&&"undefined"!=typeof document}function Aa(){return(Aa=(0,g.Z)(function*(){return!!Uh()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Ni={LOCAL:"local",NONE:"none",SESSION:"session"},Sa=ee,jh="persistence";function xa(y){return $h.apply(this,arguments)}function $h(){return($h=(0,g.Z)(function*(y){yield y._initializationPromise;const h=Ll(),p=le(jh,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Ll(){var y;try{return(null===(y=function Bh(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const Iy=ee;class fi{constructor(){this.browserResolver=ne(class Jo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zn,this._completeRedirectFn=En}_openPopup(h,p,v,T){var N=this;return(0,g.Z)(function*(){var G;te(null===(G=N.eventManagers[h._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const re=Th(h,p,v,vt(),T);return function ad(y,h,p,v=500,T=600){const N=Math.max((window.screen.availHeight-T)/2,0).toString(),G=Math.max((window.screen.availWidth-v)/2,0).toString();let re="";const Ve=Object.assign(Object.assign({},ly),{width:v.toString(),height:T.toString(),top:N,left:G}),Ke=(0,O.z$)().toLowerCase();p&&(re=fr(Ke)?"_blank":p),ht(Ke)&&(h=h||"http://localhost",Ve.scrollbars="yes");const pt=Object.entries(Ve).reduce((In,[qi,Ul])=>`${In}${qi}=${Ul},`,"");if(function Ga(y=(0,O.z$)()){var h;return zn(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Ke)&&"_self"!==re)return function Ch(y,h){const p=document.createElement("a");p.href=y,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",re),new od(null);const nt=window.open(h||"",re,pt);ee(nt,y,"popup-blocked");try{nt.focus()}catch(In){}return new od(nt)}(h,re,$o())})()}_openRedirect(h,p,v,T){var N=this;return(0,g.Z)(function*(){return yield N._originValidation(h),function Eh(y){ln().location.href=y}(Th(h,p,v,vt(),T)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:T,promise:N}=this.eventManagers[p];return T?Promise.resolve(T):(te(N,"If manager is not set, promise should be"),N)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const v=yield function uy(y){return Qo.apply(this,arguments)}(h),T=new xi(h);return v.register("authEvent",N=>(ee(null==N?void 0:N.authEvent,h,"invalid-auth-event"),{status:T.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:T},p.iframes[h._key()]=v,T})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Hs,{type:Hs},T=>{var N;const G=null===(N=null==T?void 0:T[0])||void 0===N?void 0:N[Hs];void 0!==G&&p(!!G),De(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function iy(y){return ds.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Xi()||Gt()||zn()}}),this.cordovaResolver=ne(class Lh{constructor(){this._redirectPersistence=Zn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=En}_initialize(h){var p=this;return(0,g.Z)(function*(){const v=h._key();let T=p.eventManagers.get(v);return T||(T=new Rh(h),p.eventManagers.set(v,T),p.attachCallbackListeners(h,T)),T})()}_openPopup(h){De(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,T){var N=this;return(0,g.Z)(function*(){!function ld(y){var h,p,v,T,N,G,re,Ve,Ke,pt;const nt=Gs();ee("function"==typeof(null===(h=null==nt?void 0:nt.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(void 0!==(null===(p=null==nt?void 0:nt.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee("function"==typeof(null===(N=null===(T=null===(v=null==nt?void 0:nt.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(Ve=null===(re=null===(G=null==nt?void 0:nt.cordova)||void 0===G?void 0:G.plugins)||void 0===re?void 0:re.browsertab)||void 0===Ve?void 0:Ve.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(pt=null===(Ke=null==nt?void 0:nt.cordova)||void 0===Ke?void 0:Ke.InAppBrowser)||void 0===pt?void 0:pt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const G=yield N._initialize(h);yield G.initialized(),G.resetRedirect(),function gu(){Gi.clear()}(),yield N._originValidation(h);const re=function Oh(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:Rl(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(h,v,T);yield function _0(y,h){return Ol()._set(kh(y),h)}(h,re);const Ve=yield function xh(y,h,p){return _u.apply(this,arguments)}(h,re,p),Ke=yield function Ml(y){const{cordova:h}=Gs();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let T=null;v?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function eo(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(Ve);return function Wp(y,h,p){return ud.apply(this,arguments)}(h,G,Ke)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Mh(y){return Mi.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:T,BuildInfo:N}=Gs(),G=setTimeout((0,g.Z)(function*(){yield Nl(h),p.onEvent(Vh())}),500),re=function(){var pt=(0,g.Z)(function*(nt){clearTimeout(G);const In=yield Nl(h);let qi=null;In&&(null==nt?void 0:nt.url)&&(qi=function yy(y,h){var p,v;const T=function kl(y){const h=cd(y),p=h.link?decodeURIComponent(h.link):void 0,v=cd(p).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return cd(T).link||T||v||p||y}(h);if(T.includes("/__/auth/callback")){const N=cd(T),G=N.firebaseError?function Ph(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(N.firebaseError)):null,re=null===(v=null===(p=null==G?void 0:G.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Ve=re?_e(re):null;return Ve?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(In,nt.url)),p.onEvent(qi||Vh())});return function(In){return pt.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,re);const Ve=T,Ke=`${N.packageName.toLowerCase()}://`;Gs().handleOpenURL=function(){var pt=(0,g.Z)(function*(nt){if(nt.toLowerCase().startsWith(Ke)&&re({url:nt}),"function"==typeof Ve)try{Ve(nt)}catch(In){console.error(In)}});return function(nt){return pt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Zn,this._completeRedirectFn=En}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,T){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,p,v,T)})()}_openRedirect(h,p,v,T){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,p,v,T)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Uh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Iy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function xr(){return Aa.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Xp(y){return y.unwrap()}function Ma(y){return eg(y)}function eg(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Si.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=pa;break;case"facebook.com":v=ro;break;case"github.com":v=Pc;break;case"twitter.com":v=Ya;break;default:const{oauthIdToken:T,oauthAccessToken:N,oauthTokenSecret:G,pendingToken:re,nonce:Ve}=h;return N||G||T||re?re?p.startsWith("saml.")?Tr._create(p,re):ns._fromParams({providerId:p,signInMethod:p,pendingToken:re,idToken:T,accessToken:N}):new Lo(p).credential({idToken:T,accessToken:N,rawNonce:Ve}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function wr(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function by(y,h){var p;const v=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new Cy(y,function cu(y,h){var p;const v=(0,O.m9)(y),T=h;return ee(h.customData.operationType,v,"argument-error"),ee(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),wa._fromError(v,T)}(y,h));else if(v){const T=eg(h),N=h;T&&(N.credential=T,N.tenantId=v.tenantId||void 0,N.email=v.email||void 0,N.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:Ma(p),additionalUserInfo:mr(p),user:vo.getOrCreate(T)}})}function Hh(y,h){return Gh.apply(this,arguments)}function Gh(){return(Gh=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>wr(y,p.confirm(v))}})).apply(this,arguments)}class Cy{constructor(h,p){this.resolver=p,this.auth=function Dy(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return wr(Xp(this.auth),this.resolver.resolveSignIn(h))}}class vo{constructor(h){this._delegate=h,this.multiFactor=function qc(y){const h=(0,O.m9)(y);return jo.has(h)||jo.set(h,os._fromUser(h)),jo.get(h)}(h)}static getOrCreate(h){return vo.USER_MAP.has(h)||vo.USER_MAP.set(h,new vo(h)),vo.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return wr(p.auth,Ii(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,g.Z)(function*(){return Hh(v.auth,function _l(y,h,p){return Zo.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return wr(p.auth,function $i(y,h,p){return pu.apply(this,arguments)}(p._delegate,h,fi))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield xa(Oe(p.auth)),function Ze(y,h,p){return function yt(y,h,p){return At.apply(this,arguments)}(y,h,p)}(p._delegate,h,fi)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return wr(p.auth,Ms(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Hh(this.auth,function $p(y,h,p){return vl.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return wr(this.auth,function ho(y,h,p){return fu.apply(this,arguments)}(this._delegate,h,fi))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield xa(Oe(p.auth)),function X(y,h,p){return function Ae(y,h,p){return Se.apply(this,arguments)}(y,h,p)}(p._delegate,h,fi)})()}sendEmailVerification(h){return function Di(y,h){return ol.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function ga(y,h){return Xu.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function ll(y,h){return cl((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Uc(y,h){return cl((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function wl(y,h){return cs.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function va(y,h){return ul.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function uu(y,h,p){return lu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}vo.USER_MAP=new WeakMap;const Vl=ee;let qh=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;Vl(T,"invalid-api-key",{appName:p.name}),Vl(T,"invalid-api-key",{appName:p.name});const N="undefined"!=typeof window?fi:void 0;this._delegate=v.initialize({options:{persistence:Ty(T,p.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Re),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?vo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function un(y,h,p){const v=Oe(y);ee(v._canInitEmulator,v,"emulator-config-failed"),ee(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const T=!!(null==p?void 0:p.disableWarnings),N=rr(h),{host:G,port:re}=function Is(y){const h=rr(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const N=T[1];return{host:N,port:Mn(v.substr(N.length+1))}}{const[N,G]=v.split(":");return{host:N,port:Mn(G)}}}(h);v.config.emulator={url:`${N}//${G}${null===re?"":`:${re}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:G,port:re,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Li(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function tl(y,h){return Ee.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Rt(this._delegate,p)}confirmPasswordReset(p,v){return function su(y,h,p){return el.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var T=this;return(0,g.Z)(function*(){return wr(T._delegate,function Bo(y,h,p){return Gr.apply(this,arguments)}(T._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function au(y,h){return ks.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function sl(y,h){const p=no.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){Vl(Fl(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function wt(y,h){return kn.apply(this,arguments)}(p._delegate,fi);return v?wr(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Kp(y,h){Oe(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,T){const{next:N,error:G,complete:re}=zh(p,v,T);return this._delegate.onAuthStateChanged(N,G,re)}onIdTokenChanged(p,v,T){const{next:N,error:G,complete:re}=zh(p,v,T);return this._delegate.onIdTokenChanged(N,G,re)}sendSignInLinkToEmail(p,v){return function il(y,h,p){return Vc.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function ru(y,h,p){return iu.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,g.Z)(function*(){let T;switch(function Qp(y,h){Sa(Object.values(Ni).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Sa(h!==Ni.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Sa(h===Ni.NONE,y,"unsupported-persistence-type"):_o()?Sa(h===Ni.NONE||h===Ni.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Sa(h===Ni.NONE||vr(),y,"unsupported-persistence-type")}(v._delegate,p),p){case Ni.SESSION:T=Zn;break;case Ni.LOCAL:T=(yield ne(Ci)._isAvailable())?Ci:Sn;break;case Ni.NONE:T=$;break;default:return De("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return wr(this._delegate,function Ja(y){return Fc.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return wr(this._delegate,Tn(this._delegate,p))}signInWithCustomToken(p){return wr(this._delegate,function Ns(y,h){return Rs.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return wr(this._delegate,function rl(y,h,p){return Tn((0,O.m9)(y),Ju.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return wr(this._delegate,function ou(y,h,p){return Os.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return Hh(this._delegate,function hu(y,h,p){return gn.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,g.Z)(function*(){return Vl(Fl(),v._delegate,"operation-not-supported-in-this-environment"),wr(v._delegate,function $s(y,h,p){return Xc.apply(this,arguments)}(v._delegate,p,fi))})()}signInWithRedirect(p){var v=this;return(0,g.Z)(function*(){return Vl(Fl(),v._delegate,"operation-not-supported-in-this-environment"),yield xa(v._delegate),function x(y,h,p){return function F(y,h,p){return z.apply(this,arguments)}(y,h,p)}(v._delegate,p,fi)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function fn(y,h){return Uo.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ni,y})();function zh(y,h,p){let v=y;"function"!=typeof y&&({next:v,error:h,complete:p}=y);const T=v;return{next:G=>T(G&&vo.getOrCreate(G)),error:h,complete:p}}function Ty(y,h){const p=function Jp(y,h){const p=Ll();if(!p)return[];const v=le(jh,y,h);switch(p.getItem(v)){case Ni.NONE:return[$];case Ni.LOCAL:return[Ci,Zn];case Ni.SESSION:return[Zn];default:return[]}}(y,h);if("undefined"!=typeof self&&!p.includes(Ci)&&p.push(Ci),"undefined"!=typeof window)for(const v of[Sn,Zn])p.includes(v)||p.push(v);return p.includes($)||p.push($),p}class Wh{constructor(){this.providerId="phone",this._delegate=new Si(Xp(K.Z.auth()))}static credential(h,p){return Si.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Wh.PHONE_SIGN_IN_METHOD=Si.PHONE_SIGN_IN_METHOD,Wh.PROVIDER_ID=Si.PROVIDER_ID;const Ay=ee;class Sy{constructor(h,p,v=K.Z.app()){var T;Ay(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new jp(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function tg(y){y.INTERNAL.registerComponent(new ie.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new qh(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ju,FacebookAuthProvider:ro,GithubAuthProvider:Pc,GoogleAuthProvider:pa,OAuthProvider:Lo,SAMLAuthProvider:oi,PhoneAuthProvider:Wh,PhoneMultiFactorGenerator:hy,RecaptchaVerifier:Sy,TwitterAuthProvider:Ya,Auth:qh,AuthCredential:en,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(K.Z)},8306:(rt,Ce,k)=>{k.d(Ce,{y:()=>B});var g=k(2961),K=k(727),O=k(8822),oe=k(4671);var ie=k(2416),ce=k(576),ue=k(2806);let B=(()=>{class Te{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const he=new Te;return he.source=this,he.operator=Pe,he}subscribe(Pe,he,we){const Je=function He(Te){return Te&&Te instanceof g.Lv||function Q(Te){return Te&&(0,ce.m)(Te.next)&&(0,ce.m)(Te.error)&&(0,ce.m)(Te.complete)}(Te)&&(0,K.Nn)(Te)}(Pe)?Pe:new g.Hp(Pe,he,we);return(0,ue.x)(()=>{const{operator:qe,source:De}=this;Je.add(qe?qe.call(Je,De):De?this._subscribe(Je):this._trySubscribe(Je))}),Je}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(he){Pe.error(he)}}forEach(Pe,he){return new(he=j(he))((we,Je)=>{const qe=new g.Hp({next:De=>{try{Pe(De)}catch(_e){Je(_e),qe.unsubscribe()}},error:Je,complete:we});this.subscribe(qe)})}_subscribe(Pe){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Pe)}[O.L](){return this}pipe(...Pe){return function pe(Te){return 0===Te.length?oe.y:1===Te.length?Te[0]:function(Pe){return Te.reduce((he,we)=>we(he),Pe)}}(Pe)(this)}toPromise(Pe){return new(Pe=j(Pe))((he,we)=>{let Je;this.subscribe(qe=>Je=qe,qe=>we(qe),()=>he(Je))})}}return Te.create=Re=>new Te(Re),Te})();function j(Te){var Re;return null!==(Re=null!=Te?Te:ie.v.Promise)&&void 0!==Re?Re:Promise}},7579:(rt,Ce,k)=>{k.d(Ce,{x:()=>ie});var g=k(8306),K=k(727);const oe=(0,k(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var J=k(8737),pe=k(2806);let ie=(()=>{class ue extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Q=new ce(this,this);return Q.operator=j,Q}_throwIfClosed(){if(this.closed)throw new oe}next(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(j)}})}error(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Q}=this;for(;Q.length;)Q.shift().error(j)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Q,isStopped:He,observers:Te}=this;return Q||He?K.Lc:(this.currentObservers=null,Te.push(j),new K.w0(()=>{this.currentObservers=null,(0,J.P)(Te,j)}))}_checkFinalizedStatuses(j){const{hasError:Q,thrownError:He,isStopped:Te}=this;Q?j.error(He):Te&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return ue.create=(B,j)=>new ce(B,j),ue})();class ce extends ie{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Q||Q.call(j,B)}error(B){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Q||Q.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,Q;return null!==(Q=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==Q?Q:K.Lc}}},2961:(rt,Ce,k)=>{k.d(Ce,{Hp:()=>Pe,Lv:()=>Q});var g=k(576),K=k(727),O=k(2416),oe=k(7849);function J(){}const pe=ue("C",void 0,void 0);function ue(De,_e,ve){return{kind:De,value:_e,error:ve}}var B=k(3410),j=k(2806);class Q extends K.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,K.Nn)(_e)&&_e.add(this)):this.destination=qe}static create(_e,ve,$e){return new Pe(_e,ve,$e)}next(_e){this.isStopped?Je(function ce(De){return ue("N",De,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Je(function ie(De){return ue("E",void 0,De)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Je(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Te(De,_e){return He.call(De,_e)}class Re{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:ve}=this;if(ve.next)try{ve.next(_e)}catch($e){he($e)}}error(_e){const{partialObserver:ve}=this;if(ve.error)try{ve.error(_e)}catch($e){he($e)}else he(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(ve){he(ve)}}}class Pe extends Q{constructor(_e,ve,$e){let je;if(super(),(0,g.m)(_e)||!_e)je={next:null!=_e?_e:void 0,error:null!=ve?ve:void 0,complete:null!=$e?$e:void 0};else{let ee;this&&O.v.useDeprecatedNextContext?(ee=Object.create(_e),ee.unsubscribe=()=>this.unsubscribe(),je={next:_e.next&&Te(_e.next,ee),error:_e.error&&Te(_e.error,ee),complete:_e.complete&&Te(_e.complete,ee)}):je=_e}this.destination=new Re(je)}}function he(De){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(De):(0,oe.h)(De)}function Je(De,_e){const{onStoppedNotification:ve}=O.v;ve&&B.z.setTimeout(()=>ve(De,_e))}const qe={closed:!0,next:J,error:function we(De){throw De},complete:J}},727:(rt,Ce,k)=>{k.d(Ce,{Lc:()=>pe,w0:()=>J,Nn:()=>ie});var g=k(576);const O=(0,k(3888).d)(ue=>function(j){ue(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Q,He)=>`${He+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var oe=k(8737);class J{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Te of j)Te.remove(this);else j.remove(this);const{initialTeardown:Q}=this;if((0,g.m)(Q))try{Q()}catch(Te){B=Te instanceof O?Te.errors:[Te]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Te of He)try{ce(Te)}catch(Re){B=null!=B?B:[],Re instanceof O?B=[...B,...Re.errors]:B.push(Re)}}if(B)throw new O(B)}}add(B){var j;if(B&&B!==this)if(this.closed)ce(B);else{if(B instanceof J){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,oe.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,oe.P)(j,B),B instanceof J&&B._removeParent(this)}}J.EMPTY=(()=>{const ue=new J;return ue.closed=!0,ue})();const pe=J.EMPTY;function ie(ue){return ue instanceof J||ue&&"closed"in ue&&(0,g.m)(ue.remove)&&(0,g.m)(ue.add)&&(0,g.m)(ue.unsubscribe)}function ce(ue){(0,g.m)(ue)?ue():ue.unsubscribe()}},2416:(rt,Ce,k)=>{k.d(Ce,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(rt,Ce,k)=>{k.d(Ce,{E:()=>K});const K=new(k(8306).y)(J=>J.complete())},8996:(rt,Ce,k)=>{k.d(Ce,{D:()=>_e});var g=k(8421),K=k(5363),O=k(9468),pe=k(8306),ce=k(2202),ue=k(576),B=k(9672);function Q(ve,$e){if(!ve)throw new Error("Iterable cannot be null");return new pe.y(je=>{(0,B.f)(je,$e,()=>{const ee=ve[Symbol.asyncIterator]();(0,B.f)(je,$e,()=>{ee.next().then(q=>{q.done?je.complete():je.next(q.value)})},0,!0)})})}var He=k(3670),Te=k(8239),Re=k(1144),Pe=k(6495),he=k(2206),we=k(4532),Je=k(3260);function _e(ve,$e){return $e?function De(ve,$e){if(null!=ve){if((0,He.c)(ve))return function oe(ve,$e){return(0,g.Xf)(ve).pipe((0,O.R)($e),(0,K.Q)($e))}(ve,$e);if((0,Re.z)(ve))return function ie(ve,$e){return new pe.y(je=>{let ee=0;return $e.schedule(function(){ee===ve.length?je.complete():(je.next(ve[ee++]),je.closed||this.schedule())})})}(ve,$e);if((0,Te.t)(ve))return function J(ve,$e){return(0,g.Xf)(ve).pipe((0,O.R)($e),(0,K.Q)($e))}(ve,$e);if((0,he.D)(ve))return Q(ve,$e);if((0,Pe.T)(ve))return function j(ve,$e){return new pe.y(je=>{let ee;return(0,B.f)(je,$e,()=>{ee=ve[ce.h](),(0,B.f)(je,$e,()=>{let q,te;try{({value:q,done:te}=ee.next())}catch(ge){return void je.error(ge)}te?je.complete():je.next(q)},0,!0)}),()=>(0,ue.m)(null==ee?void 0:ee.return)&&ee.return()})}(ve,$e);if((0,Je.L)(ve))return function qe(ve,$e){return Q((0,Je.Q)(ve),$e)}(ve,$e)}throw(0,we.z)(ve)}(ve,$e):(0,g.Xf)(ve)}},8421:(rt,Ce,k)=>{k.d(Ce,{Xf:()=>He});var g=k(655),K=k(1144),O=k(8239),oe=k(8306),J=k(3670),pe=k(2206),ie=k(4532),ce=k(6495),ue=k(3260),B=k(576),j=k(7849),Q=k(8822);function He(De){if(De instanceof oe.y)return De;if(null!=De){if((0,J.c)(De))return function Te(De){return new oe.y(_e=>{const ve=De[Q.L]();if((0,B.m)(ve.subscribe))return ve.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,K.z)(De))return function Re(De){return new oe.y(_e=>{for(let ve=0;ve<De.length&&!_e.closed;ve++)_e.next(De[ve]);_e.complete()})}(De);if((0,O.t)(De))return function Pe(De){return new oe.y(_e=>{De.then(ve=>{_e.closed||(_e.next(ve),_e.complete())},ve=>_e.error(ve)).then(null,j.h)})}(De);if((0,pe.D)(De))return we(De);if((0,ce.T)(De))return function he(De){return new oe.y(_e=>{for(const ve of De)if(_e.next(ve),_e.closed)return;_e.complete()})}(De);if((0,ue.L)(De))return function Je(De){return we((0,ue.Q)(De))}(De)}throw(0,ie.z)(De)}function we(De){return new oe.y(_e=>{(function qe(De,_e){var ve,$e,je,ee;return(0,g.mG)(this,void 0,void 0,function*(){try{for(ve=(0,g.KL)(De);!($e=yield ve.next()).done;)if(_e.next($e.value),_e.closed)return}catch(q){je={error:q}}finally{try{$e&&!$e.done&&(ee=ve.return)&&(yield ee.call(ve))}finally{if(je)throw je.error}}_e.complete()})})(De,_e).catch(ve=>_e.error(ve))})}},6451:(rt,Ce,k)=>{k.d(Ce,{T:()=>pe});var g=k(8189),K=k(8421),O=k(515),oe=k(7669),J=k(8996);function pe(...ie){const ce=(0,oe.yG)(ie),ue=(0,oe._6)(ie,1/0),B=ie;return B.length?1===B.length?(0,K.Xf)(B[0]):(0,g.J)(ue)((0,J.D)(B,ce)):O.E}},5403:(rt,Ce,k)=>{k.d(Ce,{x:()=>K});var g=k(2961);function K(oe,J,pe,ie,ce){return new O(oe,J,pe,ie,ce)}class O extends g.Lv{constructor(J,pe,ie,ce,ue,B){super(J),this.onFinalize=ue,this.shouldUnsubscribe=B,this._next=pe?function(j){try{pe(j)}catch(Q){J.error(Q)}}:super._next,this._error=ce?function(j){try{ce(j)}catch(Q){J.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=ie?function(){try{ie()}catch(j){J.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var J;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(J=this.onFinalize)||void 0===J||J.call(this))}}}},4004:(rt,Ce,k)=>{k.d(Ce,{U:()=>O});var g=k(4482),K=k(5403);function O(oe,J){return(0,g.e)((pe,ie)=>{let ce=0;pe.subscribe((0,K.x)(ie,ue=>{ie.next(oe.call(J,ue,ce++))}))})}},8189:(rt,Ce,k)=>{k.d(Ce,{J:()=>O});var g=k(5577),K=k(4671);function O(oe=1/0){return(0,g.z)(K.y,oe)}},5577:(rt,Ce,k)=>{k.d(Ce,{z:()=>ce});var g=k(4004),K=k(8421),O=k(4482),oe=k(9672),J=k(5403),ie=k(576);function ce(ue,B,j=1/0){return(0,ie.m)(B)?ce((Q,He)=>(0,g.U)((Te,Re)=>B(Q,Te,He,Re))((0,K.Xf)(ue(Q,He))),j):("number"==typeof B&&(j=B),(0,O.e)((Q,He)=>function pe(ue,B,j,Q,He,Te,Re,Pe){const he=[];let we=0,Je=0,qe=!1;const De=()=>{qe&&!he.length&&!we&&B.complete()},_e=$e=>we<Q?ve($e):he.push($e),ve=$e=>{Te&&B.next($e),we++;let je=!1;(0,K.Xf)(j($e,Je++)).subscribe((0,J.x)(B,ee=>{null==He||He(ee),Te?_e(ee):B.next(ee)},()=>{je=!0},void 0,()=>{if(je)try{for(we--;he.length&&we<Q;){const ee=he.shift();Re?(0,oe.f)(B,Re,()=>ve(ee)):ve(ee)}De()}catch(ee){B.error(ee)}}))};return ue.subscribe((0,J.x)(B,_e,()=>{qe=!0,De()})),()=>{null==Pe||Pe()}}(Q,He,ue,j)))}},5363:(rt,Ce,k)=>{k.d(Ce,{Q:()=>oe});var g=k(9672),K=k(4482),O=k(5403);function oe(J,pe=0){return(0,K.e)((ie,ce)=>{ie.subscribe((0,O.x)(ce,ue=>(0,g.f)(ce,J,()=>ce.next(ue),pe),()=>(0,g.f)(ce,J,()=>ce.complete(),pe),ue=>(0,g.f)(ce,J,()=>ce.error(ue),pe)))})}},3099:(rt,Ce,k)=>{k.d(Ce,{B:()=>pe});var g=k(8996),K=k(5698),O=k(7579),oe=k(2961),J=k(4482);function pe(ce={}){const{connector:ue=(()=>new O.x),resetOnError:B=!0,resetOnComplete:j=!0,resetOnRefCountZero:Q=!0}=ce;return He=>{let Te=null,Re=null,Pe=null,he=0,we=!1,Je=!1;const qe=()=>{null==Re||Re.unsubscribe(),Re=null},De=()=>{qe(),Te=Pe=null,we=Je=!1},_e=()=>{const ve=Te;De(),null==ve||ve.unsubscribe()};return(0,J.e)((ve,$e)=>{he++,!Je&&!we&&qe();const je=Pe=null!=Pe?Pe:ue();$e.add(()=>{he--,0===he&&!Je&&!we&&(Re=ie(_e,Q))}),je.subscribe($e),Te||(Te=new oe.Hp({next:ee=>je.next(ee),error:ee=>{Je=!0,qe(),Re=ie(De,B,ee),je.error(ee)},complete:()=>{we=!0,qe(),Re=ie(De,j),je.complete()}}),(0,g.D)(ve).subscribe(Te))})(He)}}function ie(ce,ue,...B){return!0===ue?(ce(),null):!1===ue?null:ue(...B).pipe((0,K.q)(1)).subscribe(()=>ce())}},9468:(rt,Ce,k)=>{k.d(Ce,{R:()=>K});var g=k(4482);function K(O,oe=0){return(0,g.e)((J,pe)=>{pe.add(O.schedule(()=>J.subscribe(pe),oe))})}},5698:(rt,Ce,k)=>{k.d(Ce,{q:()=>oe});var g=k(515),K=k(4482),O=k(5403);function oe(J){return J<=0?()=>g.E:(0,K.e)((pe,ie)=>{let ce=0;pe.subscribe((0,O.x)(ie,ue=>{++ce<=J&&(ie.next(ue),J<=ce&&ie.complete())}))})}},8505:(rt,Ce,k)=>{k.d(Ce,{b:()=>J});var g=k(576),K=k(4482),O=k(5403),oe=k(4671);function J(pe,ie,ce){const ue=(0,g.m)(pe)||ie||ce?{next:pe,error:ie,complete:ce}:pe;return ue?(0,K.e)((B,j)=>{var Q;null===(Q=ue.subscribe)||void 0===Q||Q.call(ue);let He=!0;B.subscribe((0,O.x)(j,Te=>{var Re;null===(Re=ue.next)||void 0===Re||Re.call(ue,Te),j.next(Te)},()=>{var Te;He=!1,null===(Te=ue.complete)||void 0===Te||Te.call(ue),j.complete()},Te=>{var Re;He=!1,null===(Re=ue.error)||void 0===Re||Re.call(ue,Te),j.error(Te)},()=>{var Te,Re;He&&(null===(Te=ue.unsubscribe)||void 0===Te||Te.call(ue)),null===(Re=ue.finalize)||void 0===Re||Re.call(ue)}))}):oe.y}},4408:(rt,Ce,k)=>{k.d(Ce,{o:()=>J});var g=k(727);class K extends g.w0{constructor(ie,ce){super()}schedule(ie,ce=0){return this}}const O={setInterval(pe,ie,...ce){const{delegate:ue}=O;return(null==ue?void 0:ue.setInterval)?ue.setInterval(pe,ie,...ce):setInterval(pe,ie,...ce)},clearInterval(pe){const{delegate:ie}=O;return((null==ie?void 0:ie.clearInterval)||clearInterval)(pe)},delegate:void 0};var oe=k(8737);class J extends K{constructor(ie,ce){super(ie,ce),this.scheduler=ie,this.work=ce,this.pending=!1}schedule(ie,ce=0){if(this.closed)return this;this.state=ie;const ue=this.id,B=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(B,ue,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId(B,this.id,ce),this}requestAsyncId(ie,ce,ue=0){return O.setInterval(ie.flush.bind(ie,this),ue)}recycleAsyncId(ie,ce,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return ce;O.clearInterval(ce)}execute(ie,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(ie,ce);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,ce){let B,ue=!1;try{this.work(ie)}catch(j){ue=!0,B=j||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:ie,scheduler:ce}=this,{actions:ue}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ue,this),null!=ie&&(this.id=this.recycleAsyncId(ce,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(rt,Ce,k)=>{k.d(Ce,{v:()=>O});var g=k(6063);class K{constructor(J,pe=K.now){this.schedulerActionCtor=J,this.now=pe}schedule(J,pe=0,ie){return new this.schedulerActionCtor(this,J).schedule(ie,pe)}}K.now=g.l.now;class O extends K{constructor(J,pe=K.now){super(J,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(J){const{actions:pe}=this;if(this._active)return void pe.push(J);let ie;this._active=!0;do{if(ie=J.execute(J.state,J.delay))break}while(J=pe.shift());if(this._active=!1,ie){for(;J=pe.shift();)J.unsubscribe();throw ie}}}},4986:(rt,Ce,k)=>{k.d(Ce,{z:()=>O});var g=k(4408);const O=new(k(7565).v)(g.o)},6063:(rt,Ce,k)=>{k.d(Ce,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(rt,Ce,k)=>{k.d(Ce,{z:()=>g});const g={setTimeout(K,O,...oe){const{delegate:J}=g;return(null==J?void 0:J.setTimeout)?J.setTimeout(K,O,...oe):setTimeout(K,O,...oe)},clearTimeout(K){const{delegate:O}=g;return((null==O?void 0:O.clearTimeout)||clearTimeout)(K)},delegate:void 0}},2202:(rt,Ce,k)=>{k.d(Ce,{h:()=>K});const K=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(rt,Ce,k)=>{k.d(Ce,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(rt,Ce,k)=>{k.d(Ce,{_6:()=>pe,jO:()=>oe,yG:()=>J});var g=k(576);function O(ie){return ie[ie.length-1]}function oe(ie){return(0,g.m)(O(ie))?ie.pop():void 0}function J(ie){return function K(ie){return ie&&(0,g.m)(ie.schedule)}(O(ie))?ie.pop():void 0}function pe(ie,ce){return"number"==typeof O(ie)?ie.pop():ce}},8737:(rt,Ce,k)=>{function g(K,O){if(K){const oe=K.indexOf(O);0<=oe&&K.splice(oe,1)}}k.d(Ce,{P:()=>g})},3888:(rt,Ce,k)=>{function g(K){const oe=K(J=>{Error.call(J),J.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}k.d(Ce,{d:()=>g})},2806:(rt,Ce,k)=>{k.d(Ce,{O:()=>oe,x:()=>O});var g=k(2416);let K=null;function O(J){if(g.v.useDeprecatedSynchronousErrorHandling){const pe=!K;if(pe&&(K={errorThrown:!1,error:null}),J(),pe){const{errorThrown:ie,error:ce}=K;if(K=null,ie)throw ce}}else J()}function oe(J){g.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=J)}},9672:(rt,Ce,k)=>{function g(K,O,oe,J=0,pe=!1){const ie=O.schedule(function(){oe(),pe?K.add(this.schedule(null,J)):this.unsubscribe()},J);if(K.add(ie),!pe)return ie}k.d(Ce,{f:()=>g})},4671:(rt,Ce,k)=>{function g(K){return K}k.d(Ce,{y:()=>g})},1144:(rt,Ce,k)=>{k.d(Ce,{z:()=>g});const g=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(rt,Ce,k)=>{k.d(Ce,{D:()=>K});var g=k(576);function K(O){return Symbol.asyncIterator&&(0,g.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(rt,Ce,k)=>{function g(K){return"function"==typeof K}k.d(Ce,{m:()=>g})},3670:(rt,Ce,k)=>{k.d(Ce,{c:()=>O});var g=k(8822),K=k(576);function O(oe){return(0,K.m)(oe[g.L])}},6495:(rt,Ce,k)=>{k.d(Ce,{T:()=>O});var g=k(2202),K=k(576);function O(oe){return(0,K.m)(null==oe?void 0:oe[g.h])}},8239:(rt,Ce,k)=>{k.d(Ce,{t:()=>K});var g=k(576);function K(O){return(0,g.m)(null==O?void 0:O.then)}},3260:(rt,Ce,k)=>{k.d(Ce,{L:()=>oe,Q:()=>O});var g=k(655),K=k(576);function O(J){return(0,g.FC)(this,arguments,function*(){const ie=J.getReader();try{for(;;){const{value:ce,done:ue}=yield(0,g.qq)(ie.read());if(ue)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(ce)}}finally{ie.releaseLock()}})}function oe(J){return(0,K.m)(null==J?void 0:J.getReader)}},4482:(rt,Ce,k)=>{k.d(Ce,{A:()=>K,e:()=>O});var g=k(576);function K(oe){return(0,g.m)(null==oe?void 0:oe.lift)}function O(oe){return J=>{if(K(J))return J.lift(function(pe){try{return oe(pe,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(rt,Ce,k)=>{k.d(Ce,{h:()=>O});var g=k(2416),K=k(3410);function O(oe){K.z.setTimeout(()=>{const{onUnhandledError:J}=g.v;if(!J)throw oe;J(oe)})}},4532:(rt,Ce,k)=>{function g(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ce,{z:()=>g})},655:(rt,Ce,k)=>{function oe(q,te){var ge={};for(var ne in q)Object.prototype.hasOwnProperty.call(q,ne)&&te.indexOf(ne)<0&&(ge[ne]=q[ne]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var Me=0;for(ne=Object.getOwnPropertySymbols(q);Me<ne.length;Me++)te.indexOf(ne[Me])<0&&Object.prototype.propertyIsEnumerable.call(q,ne[Me])&&(ge[ne[Me]]=q[ne[Me]])}return ge}function ce(q,te,ge,ne){return new(ge||(ge=Promise))(function(se,vt){function Wt(dt){try{it(ne.next(dt))}catch(sn){vt(sn)}}function bn(dt){try{it(ne.throw(dt))}catch(sn){vt(sn)}}function it(dt){dt.done?se(dt.value):function Me(se){return se instanceof ge?se:new ge(function(vt){vt(se)})}(dt.value).then(Wt,bn)}it((ne=ne.apply(q,te||[])).next())})}function he(q){return this instanceof he?(this.v=q,this):new he(q)}function we(q,te,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,ne=ge.apply(q,te||[]),se=[];return Me={},vt("next"),vt("throw"),vt("return"),Me[Symbol.asyncIterator]=function(){return this},Me;function vt(on){ne[on]&&(Me[on]=function(wi){return new Promise(function(Xt,Yi){se.push([on,wi,Xt,Yi])>1||Wt(on,wi)})})}function Wt(on,wi){try{!function bn(on){on.value instanceof he?Promise.resolve(on.value.v).then(it,dt):sn(se[0][2],on)}(ne[on](wi))}catch(Xt){sn(se[0][3],Xt)}}function it(on){Wt("next",on)}function dt(on){Wt("throw",on)}function sn(on,wi){on(wi),se.shift(),se.length&&Wt(se[0][0],se[0][1])}}function qe(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,te=q[Symbol.asyncIterator];return te?te.call(q):(q=function Q(q){var te="function"==typeof Symbol&&Symbol.iterator,ge=te&&q[te],ne=0;if(ge)return ge.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&ne>=q.length&&(q=void 0),{value:q&&q[ne++],done:!q}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),ge={},ne("next"),ne("throw"),ne("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function ne(se){ge[se]=q[se]&&function(vt){return new Promise(function(Wt,bn){!function Me(se,vt,Wt,bn){Promise.resolve(bn).then(function(it){se({value:it,done:Wt})},vt)}(Wt,bn,(vt=q[se](vt)).done,vt.value)})}}}k.d(Ce,{FC:()=>we,KL:()=>qe,_T:()=>oe,mG:()=>ce,qq:()=>he})},5e3:(rt,Ce,k)=>{k.d(Ce,{$8M:()=>zo,$Z:()=>xd,AFp:()=>xv,ALo:()=>pv,AaK:()=>ce,AsE:()=>Lf,CHM:()=>nl,CRH:()=>Zd,CZH:()=>Sv,CqO:()=>O_,EJc:()=>Ec,EpF:()=>Af,F4k:()=>Md,FYo:()=>tp,FiY:()=>hi,G48:()=>mI,GfV:()=>uv,GkF:()=>$g,Gpc:()=>j,JOm:()=>re,LFG:()=>Ze,LSH:()=>wu,Lbi:()=>iI,MAs:()=>Cw,MGl:()=>Nd,NdJ:()=>Jr,O4$:()=>Hc,OlP:()=>wn,Oqu:()=>Yg,PXZ:()=>cI,Q6J:()=>Ug,QGY:()=>Hg,Qsj:()=>ei,R0b:()=>Ys,RDi:()=>rs,Rgc:()=>No,SBq:()=>Xf,Sil:()=>sI,Suo:()=>Wd,TTD:()=>ro,TgZ:()=>Ql,VKq:()=>NE,VLi:()=>Kb,W1O:()=>Iv,X6Q:()=>Fm,XFs:()=>st,Xpm:()=>Nt,Y36:()=>Cf,YKP:()=>pm,YNc:()=>I_,Yjl:()=>fr,Yz7:()=>Xt,ZZ4:()=>Kv,_Bn:()=>pc,_UZ:()=>N_,_Vd:()=>cm,_c5:()=>uC,_uU:()=>q_,aQg:()=>vp,c2e:()=>Ro,cJS:()=>Zt,cg1:()=>qf,dDg:()=>Om,deG:()=>Vp,dqk:()=>Pt,eFA:()=>dI,ekj:()=>Wg,g9A:()=>Nv,h0i:()=>Uu,hGG:()=>lh,hij:()=>Pd,iGM:()=>HE,ifc:()=>Vt,ip1:()=>nI,kL8:()=>J_,lG2:()=>Gt,lcZ:()=>FE,n5z:()=>Qc,oAB:()=>Y,oxw:()=>F_,q4F:()=>DE,qLn:()=>wr,qOj:()=>mf,qZA:()=>jg,s9C:()=>Rf,sBO:()=>Vv,sIi:()=>yf,s_b:()=>zd,soG:()=>wc,tBr:()=>Sr,tb:()=>de,tp0:()=>go,uIk:()=>vf,vHH:()=>Re,vpe:()=>Mo,wAp:()=>gt,xi3:()=>LE,xp6:()=>$y,z2F:()=>fp,zSh:()=>bg,zs3:()=>ra});var g=k(7579),K=k(727),O=k(8306),oe=k(6451),J=k(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function ie(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ue(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=pe({__forward_ref__:pe});function j(i){return i.__forward_ref__=j,i.toString=function(){return ce(this())},i}function Q(i){return He(i)?i():i}function He(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}class Re extends Error{constructor(s,a){super(function Pe(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function he(i){return"string"==typeof i?i:null==i?"":String(i)}function we(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():he(i)}function _e(i,s){const a=s?` in ${s}`:"";throw new Re(-201,`No provider for ${we(i)} found${a}`)}function it(i,s){null==i&&function dt(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Xt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Zt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Lt(i){return er(i,Pi)||er(i,Qi)}function er(i,s){return i.hasOwnProperty(s)?i[s]:null}function br(i){return i&&(i.hasOwnProperty(Cr)||i.hasOwnProperty(Ji))?i[Cr]:null}const Pi=pe({\u0275prov:pe}),Cr=pe({\u0275inj:pe}),Qi=pe({ngInjectableDef:pe}),Ji=pe({ngInjectorDef:pe});var st=(()=>((st=st||{})[st.Default=0]="Default",st[st.Host=1]="Host",st[st.Self=2]="Self",st[st.SkipSelf=4]="SkipSelf",st[st.Optional=8]="Optional",st))();let Vr;function Ln(i){const s=Vr;return Vr=i,s}function ri(i,s,a){const l=Lt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&st.Optional?null:void 0!==s?s:void _e(ce(i),"Injector")}function hn(i){return{toString:i}.toString()}var qn=(()=>((qn=qn||{})[qn.OnPush=0]="OnPush",qn[qn.Default=1]="Default",qn))(),Vt=(()=>{return(i=Vt||(Vt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Vt;var i})();const et="undefined"!=typeof globalThis&&globalThis,mt="undefined"!=typeof window&&window,tr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Pt=et||"undefined"!=typeof global&&global||mt||tr,nr={},at=[],hr=pe({\u0275cmp:pe}),Ot=pe({\u0275dir:pe}),ze=pe({\u0275pipe:pe}),be=pe({\u0275mod:pe}),We=pe({\u0275fac:pe}),ut=pe({__NG_ELEMENT_ID__:pe});let kt=0;function Nt(i){return hn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===qn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||at,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Vt.Emulated,id:"c",styles:i.styles||at,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,f=i.features,_=i.pipes;return l.id+=kt++,l.inputs=ht(i.inputs,a),l.outputs=ht(i.outputs),f&&f.forEach(w=>w(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(L):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map($):null,l})}function L(i){return Ut(i)||function yn(i){return i[Ot]||null}(i)}function $(i){return function Tt(i){return i[ze]||null}(i)}const le={};function Y(i){return hn(()=>{const s={type:i.type,bootstrap:i.bootstrap||at,declarations:i.declarations||at,imports:i.imports||at,exports:i.exports||at,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(le[i.id]=i.type),s})}function ht(i,s){if(null==i)return nr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),a[c]=l,s&&(s[c]=f)}return a}const Gt=Nt;function fr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ut(i){return i[hr]||null}function an(i,s){const a=i[be]||null;if(!a&&!0===s)throw new Error(`Type ${ce(i)} does not have '\u0275mod' property.`);return a}function Ei(i){return Array.isArray(i)&&"object"==typeof i[1]}function si(i){return Array.isArray(i)&&!0===i[1]}function Rc(i){return 0!=(8&i.flags)}function Cs(i){return 2==(2&i.flags)}function Wa(i){return 1==(1&i.flags)}function Br(i){return null!==i.template}function mh(i){return 0!=(512&i[2])}function jr(i,s){return i.hasOwnProperty(We)?i[We]:null}class Lo{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function ro(){return pa}function pa(i){return i.type.prototype.ngOnChanges&&(i.setInput=Pp),Pc}function Pc(){const i=Ss(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===nr)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Pp(i,s,a,l){const c=Ss(i)||function oi(i,s){return i[Tr]=s}(i,{previous:nr,current:null}),f=c.current||(c.current={}),_=c.previous,w=this.declaredInputs[a],I=_[w];f[w]=new Lo(I&&I.currentValue,s,_===nr),i[l]=s}ro.ngInherit=!0;const Tr="__ngSimpleChanges__";function Ss(i){return i[Tr]||null}let eu;function rs(i){eu=i}function dn(i){return!!i.listen}const Vo={createRenderer:(i,s)=>function ga(){return void 0!==eu?eu:"undefined"!=typeof document?document:void 0}()};function nn(i){for(;Array.isArray(i);)i=i[0];return i}function so(i,s){return nn(s[i])}function pr(i,s){return nn(s[i.index])}function ma(i,s){return i.data[s]}function Ii(i,s){return i[s]}function gr(i,s){const a=s[i];return Ei(a)?a:a[0]}function Ms(i){return 4==(4&i[2])}function is(i){return 128==(128&i[2])}function Hr(i,s){return null==s?null:i[s]}function Ns(i){i[18]=0}function Rs(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const lt={lFrame:ao(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function su(){return lt.bindingsEnabled}function Ee(){return lt.lFrame.lView}function Rt(){return lt.lFrame.tView}function nl(i){return lt.lFrame.contextLView=i,i[8]}function fn(){let i=Uo();for(;null!==i&&64===i.type;)i=i.parent;return i}function Uo(){return lt.lFrame.currentTNode}function Gr(i,s){const a=lt.lFrame;a.currentTNode=i,a.isParent=s}function rl(){return lt.lFrame.isParent}function il(){lt.lFrame.isParent=!1}function ou(){return lt.isInCheckNoChangesMode}function Os(i){lt.isInCheckNoChangesMode=i}function sr(){const i=lt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function ks(){return lt.lFrame.bindingIndex++}function Di(i){const s=lt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function lu(i,s){const a=lt.lFrame;a.bindingIndex=a.bindingRootIndex=i,_a(s)}function _a(i){lt.lFrame.currentDirectiveIndex=i}function ul(){return lt.lFrame.currentQueryIndex}function ll(i){lt.lFrame.currentQueryIndex=i}function Uc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function cl(i,s,a){if(a&st.SkipSelf){let c=s,f=i;for(;!(c=c.parent,null!==c||a&st.Host||(c=Uc(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;s=c,i=f}const l=lt.lFrame=Bc();return l.currentTNode=s,l.lView=i,!0}function oo(i){const s=Bc(),a=i[1];lt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Bc(){const i=lt.lFrame,s=null===i?null:i.child;return null===s?ao(i):s}function ao(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function jc(){const i=lt.lFrame;return lt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const $c=jc;function uo(){const i=jc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function mr(){return lt.lFrame.selectedIndex}function Fs(i){lt.lFrame.selectedIndex=i}function _n(){const i=lt.lFrame;return ma(i.tView,i.selectedIndex)}function Hc(){lt.lFrame.currentNamespace="svg"}function ss(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:S}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function wa(i,s,a){Gc(i,s,3,a)}function cu(i,s,a,l){(3&i[2])===a&&Gc(i,s,a,l)}function Rn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Gc(i,s,a,l){const f=null!=l?l:-1,_=s.length-1;let w=0;for(let I=void 0!==l?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(w=s[I],null!=l&&w>=l)break}else s[I]<0&&(i[18]+=65536),(w<f||-1==f)&&(Fp(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Fp(i,s,a,l){const c=a[l]<0,f=a[l+1],w=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class jo{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function ft(i,s,a){const l=dn(i);let c=0;for(;c<a.length;){const f=a[c];if("number"==typeof f){if(0!==f)break;c++;const _=a[c++],w=a[c++],I=a[c++];l?i.setAttribute(s,w,I,_):s.setAttributeNS(_,w,I)}else{const _=f,w=a[++c];qr(_)?l&&i.setProperty(s,_,w):l?i.setAttribute(s,_,w):s.setAttribute(_,w),c++}}return c}function Zn(i){return 3===i||4===i||6===i}function qr(i){return 64===i.charCodeAt(0)}function zr(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||$o(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function $o(i,s,a,l,c){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===s){_=-1;break}if(w>s){_=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==c&&(i[f+1]=c));if(l===i[f+1])return void(i[f+2]=c)}f++,null!==l&&f++,null!==c&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==c&&i.splice(f++,0,c)}function Wc(i){return-1!==i}function ln(i){return 32767&i}function bi(i,s){let a=function Eh(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let du=!0;function ui(i){const s=du;return du=i,s}let Kc=0;function On(i,s){const a=Ho(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,as(l.data,i),as(s,null),as(l.blueprint,null));const c=li(i,s),f=i.injectorIndex;if(Wc(c)){const _=ln(c),w=bi(c,s),I=w[1].data;for(let A=0;A<8;A++)s[f+A]=w[_+A]|I[_+A]}return s[f+8]=c,f}function as(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Ho(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function li(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const f=c[1],_=f.type;if(l=2===_?f.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Ls(i,s,a){!function co(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ut)&&(l=a[ut]),null==l&&(l=a[ut]=Kc++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Vi(i,s,a){if(a&st.Optional)return i;_e(s,"NodeInjector")}function ml(i,s,a,l){if(a&st.Optional&&void 0===l&&(l=null),0==(a&(st.Self|st.Host))){const c=i[9],f=Ln(void 0);try{return c?c.get(s,l,a&st.Optional):ri(s,l,a&st.Optional)}finally{Ln(f)}}return Vi(l,s,a)}function Vs(i,s,a,l=st.Default,c){if(null!==i){const f=function qo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ut)?i[ut]:void 0;return"number"==typeof s?s>=0?255&s:yl:s}(a);if("function"==typeof f){if(!cl(s,i,l))return l&st.Host?Vi(c,a,l):ml(s,a,l,c);try{const _=f(l);if(null!=_||l&st.Optional)return _;_e(a)}finally{$c()}}else if("number"==typeof f){let _=null,w=Ho(i,s),I=-1,A=l&st.Host?s[16][6]:null;for((-1===w||l&st.SkipSelf)&&(I=-1===w?li(i,s):s[w+8],-1!==I&&Ar(l,!1)?(_=s[1],w=ln(I),s=bi(I,s)):w=-1);-1!==w;){const S=s[1];if(Ia(f,w,S.data)){const P=Yc(w,s,a,_,l,A);if(P!==Ui)return P}I=s[w+8],-1!==I&&Ar(l,s[1].data[w+8]===A)&&Ia(f,w,s)?(_=S,w=ln(I),s=bi(I,s)):w=-1}}}return ml(s,a,l,c)}const Ui={};function yl(){return new Ti(fn(),Ee())}function Yc(i,s,a,l,c,f){const _=s[1],w=_.data[i+8],S=Go(w,_,a,null==l?Cs(w)&&du:l!=_&&0!=(3&w.type),c&st.Host&&f===w);return null!==S?Ci(s,_,S,w):Ui}function Go(i,s,a,l,c){const f=i.providerIndexes,_=s.data,w=1048575&f,I=i.directiveStart,S=f>>20,V=c?w+S:i.directiveEnd;for(let W=l?w:w+S;W<V;W++){const me=_[W];if(W<I&&a===me||W>=I&&me.type===a)return W}if(c){const W=_[I];if(W&&Br(W)&&W.type===a)return I}return null}function Ci(i,s,a,l){let c=i[a];const f=s.data;if(function qc(i){return i instanceof jo}(c)){const _=c;_.resolving&&function Je(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Re(-200,`Circular dependency in DI detected for ${i}${a}`)}(we(f[a]));const w=ui(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?Ln(_.injectImpl):null;cl(i,l,st.Default);try{c=i[a]=_.factory(void 0,f,i,l),s.firstCreatePass&&a>=l.directiveStart&&function fl(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:f}=s.type.prototype;if(l){const _=pa(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&Ln(I),ui(w),_.resolving=!1,$c()}}return c}function Ia(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Ar(i,s){return!(i&st.Self||i&st.Host&&s)}class Ti{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Vs(this._tNode,this._lView,s,l,a)}}function Qc(i){return hn(()=>{const s=i.prototype.constructor,a=s[We]||xn(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const f=c[We]||xn(c);if(f&&f!==a)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function xn(i){return He(i)?()=>{const s=xn(Q(i));return s&&s()}:jr(i)}function zo(i){return function Ea(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const f=a[c];if(Zn(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(f===s)return a[c+1];c+=2}}}return null}(fn(),i)}const Wo="__parameters__";function vn(i,s,a){return hn(()=>{const l=function Bi(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...f){if(this instanceof c)return l.apply(this,f),this;const _=new c(...f);return w.annotation=_,w;function w(I,A,S){const P=I.hasOwnProperty(Wo)?I[Wo]:Object.defineProperty(I,Wo,{value:[]})[Wo];for(;P.length<=S;)P.push(null);return(P[S]=P[S]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class wn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Vp=new wn("AnalyzeForEntryComponents");function _r(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),_r(l,s)):s!==i&&s.push(l)}return s}function ci(i,s){i.forEach(a=>Array.isArray(a)?ci(a,s):s(a))}function wl(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function cs(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Un(i,s,a){let l=$s(i,s);return l>=0?i[1|l]=a:(l=~l,function El(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function bl(i,s){const a=$s(i,s);if(a>=0)return i[1|a]}function $s(i,s){return function ho(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const f=l+(c-l>>1),_=i[f<<a];if(s===_)return f<<a;_>s?c=f:l=f+1}return~(c<<a)}(i,s,1)}const fo={},Ko="__NG_DI_FLAG__",gu="ngTempTokenPath",b=/\n/gm,F="__source",z=pe({provide:String,useValue:pe});let X;function Ae(i){const s=X;return X=i,s}function Se(i,s=st.Default){if(void 0===X)throw new Re(203,"");return null===X?ri(i,void 0,s):X.get(i,s&st.Optional?null:void 0,s)}function Ze(i,s=st.Default){return(function Gn(){return Vr}()||Se)(Q(i),s)}const At=Ze;function wt(i){const s=[];for(let a=0;a<i.length;a++){const l=Q(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Re(900,"");let c,f=st.Default;for(let _=0;_<l.length;_++){const w=l[_],I=En(w);"number"==typeof I?-1===I?c=w.token:f|=I:c=w}s.push(Ze(c,f))}else s.push(Ze(l))}return s}function kn(i,s){return i[Ko]=s,i.prototype[Ko]=s,i}function En(i){return i[Ko]}const Sr=kn(vn("Inject",i=>({token:i})),-1),hi=kn(vn("Optional"),8),go=kn(vn("SkipSelf"),4);class ad{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Hs(i){return i instanceof ad?i.changingThisBreaksApplicationSecurity:i}const Gs=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,xh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Yt=(()=>((Yt=Yt||{})[Yt.NONE=0]="NONE",Yt[Yt.HTML=1]="HTML",Yt[Yt.STYLE=2]="STYLE",Yt[Yt.SCRIPT=3]="SCRIPT",Yt[Yt.URL=4]="URL",Yt[Yt.RESOURCE_URL=5]="RESOURCE_URL",Yt))();function wu(i){const s=function ea(){const i=Ee();return i&&i[12]}();return s?s.sanitize(Yt.URL,i)||"":function Jo(i,s){const a=function yu(i){return i instanceof ad&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Hs(i):function _u(i){return(i=String(i)).match(Gs)||i.match(xh)?i:"unsafe:"+i}(he(i))}const Uh="__ngContext__";function xr(i,s){i[Uh]=s}function Bh(i){const s=function Aa(i){return i[Uh]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Ma(i){return i.ngOriginalError}function eg(i,...s){i.error(...s)}class wr{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function by(i){return i&&i.ngErrorLogger||eg}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Ma(s);for(;a&&Ma(a);)a=Ma(a);return a||null}}const Sy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Pt))();function p(i){return i instanceof Function?i():i}var re=(()=>((re=re||{})[re.Important=1]="Important",re[re.DashCase=2]="DashCase",re))();function Ke(i,s){return undefined(i,s)}function In(i){const s=i[3];return si(s)?s[3]:s}function Eu(i){return Zh(i[13])}function Iu(i){return Zh(i[4])}function Zh(i){for(;null!==i&&!si(i);)i=i[4];return i}function ta(i,s,a,l,c){if(null!=l){let f,_=!1;si(l)?f=l:Ei(l)&&(_=!0,l=l[0]);const w=nn(l);0===i&&null!==a?null==c?ky(s,a,w):hs(s,a,w,c||null,!0):1===i&&null!==a?hs(s,a,w,c||null,!0):2===i?function Vy(i,s,a){const l=wo(i,s);l&&function XI(i,s,a,l){dn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,w,_):3===i&&s.destroyNode(w),null!=f&&function x0(i,s,a,l,c){const f=a[7];f!==nn(a)&&ta(s,i,l,f,c);for(let w=10;w<a.length;w++){const I=a[w];ag(I[1],I,i,s,l,f)}}(s,i,f,a,c)}}function gd(i,s,a){if(dn(i))return i.createElement(s,a);{const l=null!==a?function Xa(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function v0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Rs(c,-1)),a.splice(l,1)}function Ny(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&v0(c,l),s>0&&(i[a-1][4]=l[4]);const f=cs(i,10+s);!function Zr(i,s){ag(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=f[19];null!==_&&_.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Ry(i,s){if(!(256&s[2])){const a=s[11];dn(a)&&a.destroyNode&&ag(i,s,a,3,null,null),function rg(i){let s=i[13];if(!s)return Oy(i[1],i);for(;s;){let a=null;if(Ei(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Ei(s)&&Oy(s[1],s),s=s[3];null===s&&(s=i),Ei(s)&&Oy(s[1],s),a=s&&s[4]}s=a}}(s)}}function Oy(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function E0(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof jo)){const f=a[l+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const w=c[f[_]],I=f[_+1];try{I.call(w)}finally{}}else try{f.call(c)}finally{}}}}(i,s),function w0(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],w="function"==typeof _?_(s):nn(s[_]),I=l[c=a[f+2]],A=a[f+3];"boolean"==typeof A?w.removeEventListener(a[f],I,A):A>=0?l[c=A]():l[c=-A].unsubscribe(),f+=2}else{const _=l[c=a[f+1]];a[f].call(_)}if(null!==l){for(let f=c+1;f<l.length;f++)l[f]();s[7]=null}}(i,s),1===s[1].type&&dn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&si(s[3])){a!==s[3]&&v0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function sg(i,s,a){return function JI(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Vt.None||c===Vt.Emulated)return null}return pr(l,a)}(i,s.parent,a)}function hs(i,s,a,l,c){dn(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function ky(i,s,a){dn(i)?i.appendChild(s,a):s.appendChild(a)}function I0(i,s,a,l,c){null!==l?hs(i,s,a,l,c):ky(i,s,a)}function wo(i,s){return dn(i)?i.parentNode(s):s.parentNode}let Py=function b0(i,s,a){return 40&i.type?pr(i,a):null};function og(i,s,a,l){const c=sg(i,l,s),f=s[11],w=function D0(i,s,a){return Py(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)I0(f,c,a[I],w,!1);else I0(f,c,a,w,!1)}function yd(i,s){if(null!==s){const a=s.type;if(3&a)return pr(s,i);if(4&a)return Ly(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return yd(i,l);{const c=i[s.index];return si(c)?Ly(-1,c):nn(c)}}if(32&a)return Ke(s,i)()||nn(i[s.index]);{const l=T0(i,s);return null!==l?Array.isArray(l)?l[0]:yd(In(i[16]),l):yd(i,s.next)}}return null}function T0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Ly(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return yd(l,c)}return s[7]}function Uy(i,s,a,l,c,f,_){for(;null!=a;){const w=l[a.index],I=a.type;if(_&&0===s&&(w&&xr(nn(w),l),a.flags|=4),64!=(64&a.flags))if(8&I)Uy(i,s,a.child,l,c,f,!1),ta(s,i,c,w,f);else if(32&I){const A=Ke(a,l);let S;for(;S=A();)ta(s,i,c,S,f);ta(s,i,c,w,f)}else 16&I?S0(i,s,l,a,c,f):ta(s,i,c,w,f);a=_?a.projectionNext:a.next}}function ag(i,s,a,l,c,f){Uy(a,l,i.firstChild,s,c,f,!1)}function S0(i,s,a,l,c,f){const _=a[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)ta(s,i,c,I[A],f);else Uy(i,s,I,_[3],c,f,!0)}function M0(i,s,a){dn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function ug(i,s,a){dn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function Du(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const f=s.length;if(c+f===l||i.charCodeAt(c+f)<=32)return c}a=c+1}}const N0="ng-template";function R0(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==Du(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function O0(i){return 4===i.type&&i.value!==N0}function nD(i,s,a){return s===(4!==i.type||a?i.value:N0)}function rD(i,s,a){let l=4;const c=i.attrs||[],f=function Cu(i){for(let s=0;s<i.length;s++)if(Zn(i[s]))return s;return i.length}(c);let _=!1;for(let w=0;w<s.length;w++){const I=s[w];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!nD(i,I,a)||""===I&&1===s.length){if(zi(l))return!1;_=!0}}else{const A=8&l?I:s[++w];if(8&l&&null!==i.attrs){if(!R0(i.attrs,A,a)){if(zi(l))return!1;_=!0}continue}const P=bu(8&l?"class":I,c,O0(i),a);if(-1===P){if(zi(l))return!1;_=!0;continue}if(""!==A){let V;V=P>f?"":c[P+1].toLowerCase();const W=8&l?V:null;if(W&&-1!==Du(W,A,0)||2&l&&A!==V){if(zi(l))return!1;_=!0}}}}else{if(!_&&!zi(l)&&!zi(I))return!1;if(_&&zi(I))continue;_=!1,l=I|1&l}}return zi(l)||_}function zi(i){return 0==(1&i)}function bu(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let f=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let w=s[++c];for(;"string"==typeof w;)w=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function iD(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function By(i,s,a=!1){for(let l=0;l<s.length;l++)if(rD(i,s[l],a))return!0;return!1}function jy(i,s){return i?":not("+s.trim()+")":s}function k0(i){let s=i[0],a=1,l=2,c="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const w=i[++a];c+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!zi(_)&&(s+=jy(f,c),c=""),l=_,f=f||!zi(l);a++}return""!==c&&(s+=jy(f,c)),s}const Ct={};function $y(i){Hy(Rt(),Ee(),mr()+i,ou())}function Hy(i,s,a,l){if(!l)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&wa(s,f,a)}else{const f=i.preOrderHooks;null!==f&&cu(s,f,0,a)}Fs(a)}function Bl(i,s){return i<<17|s<<2}function qs(i){return i>>17&32767}function lg(i){return 2|i}function Ra(i){return(131068&i)>>2}function cg(i,s){return-131069&i|s<<2}function Qh(i){return 1|i}function Yy(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],f=a[l+1];if(-1!==f){const _=i.data[f];ll(c),_.contentQueries(2,s[f],f)}}}function sf(i,s,a,l,c,f,_,w,I,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|l,Ns(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=w||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=f,S[16]=2==s.type?i[16]:S,S}function jl(i,s,a,l,c){let f=i.data[s];if(null===f)f=function $0(i,s,a,l,c){const f=Uo(),_=rl(),I=i.data[s]=function q0(i,s,a,l,c,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==f&&(_?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,l,c),function ol(){return lt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=c;const _=function Bo(){const i=lt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Gr(f,!0),f}function Su(i,s,a,l){if(0===a)return-1;const c=s.length;for(let f=0;f<a;f++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function of(i,s,a){oo(s);try{const l=i.viewQuery;null!==l&&l_(1,l,a);const c=i.template;null!==c&&mg(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Yy(i,s),i.staticViewQueries&&l_(2,i.viewQuery,a);const f=i.components;null!==f&&function rA(i,s){for(let a=0;a<s.length;a++)s_(i,s[a])}(s,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,uo()}}function $l(i,s,a,l){const c=s[2];if(256==(256&c))return;oo(s);const f=ou();try{Ns(s),function au(i){return lt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&mg(i,s,a,2,l);const _=3==(3&c);if(!f)if(_){const A=i.preOrderCheckHooks;null!==A&&wa(s,A,null)}else{const A=i.preOrderHooks;null!==A&&cu(s,A,0,null),Rn(s,0)}if(function tw(i){for(let s=Eu(i);null!==s;s=Iu(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],f=c[3];0==(1024&c[2])&&Rs(f,1),c[2]|=1024}}}(s),function ID(i){for(let s=Eu(i);null!==s;s=Iu(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];is(l)&&$l(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&Yy(i,s),!f)if(_){const A=i.contentCheckHooks;null!==A&&wa(s,A)}else{const A=i.contentHooks;null!==A&&cu(s,A,1),Rn(s,1)}!function fD(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Fs(~c);else{const f=c,_=a[++l],w=a[++l];lu(_,f),w(2,s[f])}}}finally{Fs(-1)}}(i,s);const w=i.components;null!==w&&function pD(i,s){for(let a=0;a<s.length;a++)DD(i,s[a])}(s,w);const I=i.viewQuery;if(null!==I&&l_(2,I,l),!f)if(_){const A=i.viewCheckHooks;null!==A&&wa(s,A)}else{const A=i.viewHooks;null!==A&&cu(s,A,2),Rn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Rs(s[3],-1))}finally{uo()}}function Qy(i,s,a,l){const c=s[10],f=!ou(),_=Ms(s);try{f&&!_&&c.begin&&c.begin(),_&&of(i,s,l),$l(i,s,a,l)}finally{f&&!_&&c.end&&c.end()}}function mg(i,s,a,l,c){const f=mr(),_=2&l;try{Fs(-1),_&&s.length>20&&Hy(i,s,20,ou()),a(l,c)}finally{Fs(f)}}function gD(i,s,a){if(Rc(s)){const c=s.directiveEnd;for(let f=s.directiveStart;f<c;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}function af(i,s,a){!su()||(function Y0(i,s,a,l){const c=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||On(a,s),xr(l,s);const _=a.initialInputs;for(let w=c;w<f;w++){const I=i.data[w],A=Br(I);A&&X0(s,a,I);const S=Ci(s,i,w,a);xr(S,s),null!==_&&ew(0,w-c,S,I,0,_),A&&(gr(a.index,s)[8]=S)}}(i,s,a,pr(a,s)),128==(128&a.flags)&&function iA(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,w=function al(){return lt.lFrame.currentDirectiveIndex}();try{Fs(_);for(let I=l;I<c;I++){const A=i.data[I],S=s[I];_a(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&_D(A,S)}}finally{Fs(-1),_a(w)}}(i,s,a))}function Hl(i,s,a=pr){const l=s.localNames;if(null!==l){let c=s.index+1;for(let f=0;f<l.length;f+=2){const _=l[f+1],w=-1===_?a(s,i):i[_];i[c++]=w}}}function uf(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Oa(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Oa(i,s,a,l,c,f,_,w,I,A){const S=20+l,P=S+c,V=function lf(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Ct);return a}(S,P),W="function"==typeof A?A():A;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:w,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:W,incompleteFirstPass:!1}}function yg(i,s,a,l){const c=c_(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&sw(i).push(l,c.length-1))}function cf(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function fs(i,s,a,l,c,f,_,w){const I=pr(s,a);let S,A=s.inputs;!w&&null!=A&&(S=A[l])?(aw(i,a,S,l,c),Cs(s)&&function W0(i,s){const a=gr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function Xy(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,dn(f)?f.setProperty(I,l,c):qr(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}function e_(i,s,a,l){let c=!1;if(su()){const f=function sA(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let f=0;f<l.length;f++){const _=l[f];By(a,_.selectors,!1)&&(c||(c=[]),Ls(On(a,s),i,_.type),Br(_)?(vD(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==f){c=!0,J0(a,i.data.length,f.length);for(let S=0;S<f.length;S++){const P=f[S];P.providersResolver&&P.providersResolver(P)}let w=!1,I=!1,A=Su(i,s,f.length,null);for(let S=0;S<f.length;S++){const P=f[S];a.mergedAttrs=zr(a.mergedAttrs,P.hostAttrs),n_(i,a,s,A,P),Q0(A,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const V=P.type.prototype;!w&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),A++}!function z0(i,s){const l=s.directiveEnd,c=i.data,f=s.attrs,_=[];let w=null,I=null;for(let A=s.directiveStart;A<l;A++){const S=c[A],P=S.inputs,V=null===f||O0(s)?null:ED(P,f);_.push(V),w=cf(P,A,w),I=cf(S.outputs,A,I)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=w,s.outputs=I}(i,a)}_&&function wD(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const f=a[s[c+1]];if(null==f)throw new Re(-301,!1);l.push(s[c],f)}}}(a,l,_)}return a.mergedAttrs=zr(a.mergedAttrs,a.attrs),c}function Ed(i,s,a,l,c,f){const _=f.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const I=~s.index;(function t_(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=I&&w.push(I),w.push(l,c,_)}}function _D(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function vD(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Q0(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Br(s)&&(a[""]=i)}}function J0(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function n_(i,s,a,l,c){i.data[l]=c;const f=c.factory||(c.factory=jr(c.type)),_=new jo(f,Br(c),null);i.blueprint[l]=_,a[l]=_,Ed(i,s,0,l,Su(i,a,c.hostVars,Ct),c)}function X0(i,s,a){const l=pr(s,i),c=uf(a),f=i[10],_=hf(i,sf(i,c,null,a.onPush?64:16,l,s,f,f.createRenderer(l,a),null,null));i[s.index]=_}function Io(i,s,a,l,c,f){const _=pr(i,s);!function r_(i,s,a,l,c,f,_){if(null==f)dn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const w=null==_?he(f):_(f,l||"",c);dn(i)?i.setAttribute(s,c,w,a):a?s.setAttributeNS(a,c,w):s.setAttribute(c,w)}}(s[11],_,f,i.value,a,l,c)}function ew(i,s,a,l,c,f){const _=f[s];if(null!==_){const w=l.setInput;for(let I=0;I<_.length;){const A=_[I++],S=_[I++],P=_[I++];null!==w?l.setInput(a,P,A,S):a[S]=P}}}function ED(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function i_(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function DD(i,s){const a=gr(s,i);if(is(a)){const l=a[1];80&a[2]?$l(l,a,l.template,a[8]):a[5]>0&&vg(a)}}function vg(i){for(let l=Eu(i);null!==l;l=Iu(l))for(let c=10;c<l.length;c++){const f=l[c];if(1024&f[2]){const _=f[1];$l(_,f,_.template,f[8])}else f[5]>0&&vg(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=gr(a[l],i);is(c)&&c[5]>0&&vg(c)}}function s_(i,s){const a=gr(s,i),l=a[1];(function bD(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),of(l,a,a[8])}function hf(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function o_(i){for(;i;){i[2]|=64;const s=In(i);if(mh(i)&&!s)return i;i=s}return null}function ff(i,s,a){const l=s[10];l.begin&&l.begin();try{$l(i,s,i.template,a)}catch(c){throw ow(s,c),c}finally{l.end&&l.end()}}function nw(i){!function a_(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Bh(a),c=l[1];Qy(c,l,c.template,a)}}(i[8])}function l_(i,s,a){ll(0),s(i,a)}const CD=(()=>Promise.resolve(null))();function c_(i){return i[7]||(i[7]=[])}function sw(i){return i.cleanup||(i.cleanup=[])}function ow(i,s){const a=i[9],l=a?a.get(wr,null):null;l&&l.handleError(s)}function aw(i,s,a,l,c){for(let f=0;f<a.length;){const _=a[f++],w=a[f++],I=s[_],A=i.data[_];null!==A.setInput?A.setInput(I,c,l,w):I[w]=c}}function na(i,s,a){const l=so(s,i);!function pd(i,s,a){dn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function Ig(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const w=s[_];"number"==typeof w?f=w:1==f?c=ue(c,w):2==f&&(l=ue(l,w+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Dg=new wn("INJECTOR",-1);class uw{get(s,a=fo){if(a===fo){const l=new Error(`NullInjectorError: No provider for ${ce(s)}!`);throw l.name="NullInjectorError",l}return a}}const bg=new wn("Set Injector scope."),Do={},TD={};let Cg;function lw(){return void 0===Cg&&(Cg=new uw),Cg}function h_(i,s=null,a=null,l){const c=cw(i,s,a,l);return c._resolveInjectorDefTypes(),c}function cw(i,s=null,a=null,l){return new AD(i,a,s||lw(),l)}class AD{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&ci(a,w=>this.processProvider(w,s,a)),ci([s],w=>this.processInjectorType(w,[],f)),this.records.set(Dg,Dd(void 0,this));const _=this.records.get(bg);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:ce(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=fo,l=st.Default){this.assertNotDestroyed();const c=Ae(this),f=Ln(void 0);try{if(!(l&st.SkipSelf)){let w=this.records.get(s);if(void 0===w){const I=function cA(i){return"function"==typeof i||"object"==typeof i&&i instanceof wn}(s)&&Lt(s);w=I&&this.injectableDefInScope(I)?Dd(Id(s),Do):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&st.Self?lw():this.parent).get(s,a=l&st.Optional&&a===fo?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[gu]=_[gu]||[]).unshift(ce(s)),c)throw _;return function Yo(i,s,a,l){const c=i[gu];throw s[F]&&c.unshift(s[F]),i.message=function po(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=ce(s);if(Array.isArray(s))c=s.map(ce).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let w=s[_];f.push(_+":"+("string"==typeof w?JSON.stringify(w):ce(w)))}c=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(b,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[gu]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Ln(f),Ae(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(ce(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,!1)}processInjectorType(s,a,l){if(!(s=Q(s)))return!1;let c=br(s);const f=null==c&&s.ngModule||void 0,_=void 0===f?s:f,w=-1!==l.indexOf(_);if(void 0!==f&&(c=br(f)),null==c)return!1;if(null!=c.imports&&!w){let S;l.push(_);try{ci(c.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===S&&(S=[]),S.push(P))})}finally{}if(void 0!==S)for(let P=0;P<S.length;P++){const{ngModule:V,providers:W}=S[P];ci(W,me=>this.processProvider(me,V,W||at))}}this.injectorDefTypes.add(_);const I=jr(_)||(()=>new _);this.records.set(_,Dd(I,Do));const A=c.providers;if(null!=A&&!w){const S=s;ci(A,P=>this.processProvider(P,S,A))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,l){let c=bd(s=Q(s))?s:Q(s&&s.provide);const f=function SD(i,s,a){return p_(i)?Dd(void 0,i.useValue):Dd(f_(i),Do)}(s);if(bd(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=Dd(void 0,Do,!0),_.factory=()=>wt(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,f)}hydrate(s,a){return a.value===Do&&(a.value=TD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function lA(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Q(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Id(i){const s=Lt(i),a=null!==s?s.factory:jr(i);if(null!==a)return a;if(i instanceof wn)throw new Re(204,!1);if(i instanceof Function)return function dw(i){const s=i.length;if(s>0)throw function Si(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Re(204,!1);const a=function ni(i){const s=i&&(i[Pi]||i[Qi]);if(s){const a=function ws(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Re(204,!1)}function f_(i,s,a){let l;if(bd(i)){const c=Q(i);return jr(c)||Id(c)}if(p_(i))l=()=>Q(i.useValue);else if(function hw(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...wt(i.deps||[]));else if(function xD(i){return!(!i||!i.useExisting)}(i))l=()=>Ze(Q(i.useExisting));else{const c=Q(i&&(i.useClass||i.provide));if(!function uA(i){return!!i.deps}(i))return jr(c)||Id(c);l=()=>new c(...wt(i.deps))}return l}function Dd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function p_(i){return null!==i&&"object"==typeof i&&z in i}function bd(i){return"function"==typeof i}let ra=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return h_({name:""},l,a,"");{const f=null!==(c=a.name)&&void 0!==c?c:"";return h_({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=fo,i.NULL=new uw,i.\u0275prov=Xt({token:i,providedIn:"any",factory:()=>Ze(Dg)}),i.__NG_ELEMENT_ID__=-1,i})();function m_(i,s){ss(Bh(i)[1],fn())}function mf(i){let s=function vw(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Br(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Re(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=y_(i.inputs),_.declaredInputs=y_(i.declaredInputs),_.outputs=y_(i.outputs);const w=c.hostBindings;w&&Sg(i,w);const I=c.viewQuery,A=c.contentQueries;if(I&&LD(i,I),A&&Kr(i,A),ie(i.inputs,c.inputs),ie(i.declaredInputs,c.declaredInputs),ie(i.outputs,c.outputs),Br(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const w=f[_];w&&w.ngInherit&&w(i),w===mf&&(a=!1)}}s=Object.getPrototypeOf(s)}!function FD(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=zr(c.hostAttrs,a=zr(a,c.hostAttrs))}}(l)}function y_(i){return i===nr?{}:i===at?[]:i}function LD(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function Kr(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,f)=>{s(l,c,f),a(l,c,f)}:s}function Sg(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let xg=null;function ql(){if(!xg){const i=Pt.Symbol;if(i&&i.iterator)xg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(xg=l)}}}return xg}function yf(i){return!!Cd(i)&&(Array.isArray(i)||!(i instanceof Map)&&ql()in i)}function Cd(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function To(i,s,a){return i[s]=a}function Nr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Kn(i,s,a,l){const c=Nr(i,s,a);return Nr(i,s+1,l)||c}function vf(i,s,a,l){const c=Ee();return Nr(c,ks(),s)&&(Rt(),Io(_n(),c,i,s,a,l)),vf}function Wl(i,s,a,l){return Nr(i,ks(),a)?s+he(a)+l:Ct}function Zl(i,s,a,l,c,f){const w=Kn(i,function ai(){return lt.lFrame.bindingIndex}(),a,c);return Di(2),w?s+he(a)+l+he(c)+f:Ct}function I_(i,s,a,l,c,f,_,w){const I=Ee(),A=Rt(),S=i+20,P=A.firstCreatePass?function E_(i,s,a,l,c,f,_,w,I){const A=s.consts,S=jl(s,i,4,_||null,Hr(A,w));e_(s,a,S,Hr(A,I)),ss(s,S);const P=S.tViews=Oa(2,S,l,c,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),P.queries=s.queries.embeddedTView(S)),S}(S,A,I,s,a,l,c,f,_):A.data[S];Gr(P,!1);const V=I[11].createComment("");og(A,I,V,P),xr(V,I),hf(I,I[S]=i_(V,I,V,P)),Wa(P)&&af(A,I,P),null!=_&&Hl(I,P,w)}function Cw(i){return Ii(function sl(){return lt.lFrame.contextLView}(),20+i)}function Cf(i,s=st.Default){const a=Ee();return null===a?Ze(i,s):Vs(fn(),a,Q(i),s)}function xd(){throw new Error("invalid")}function Ug(i,s,a){const l=Ee();return Nr(l,ks(),s)&&fs(Rt(),_n(),l,i,s,l[11],a,!1),Ug}function Bg(i,s,a,l,c){const _=c?"class":"style";aw(i,a,s.inputs[_],_,l)}function Ql(i,s,a,l){const c=Ee(),f=Rt(),_=20+i,w=c[11],I=c[_]=gd(w,s,function ny(){return lt.lFrame.currentNamespace}()),A=f.firstCreatePass?function Rw(i,s,a,l,c,f,_){const w=s.consts,A=jl(s,i,2,c,Hr(w,f));return e_(s,a,A,Hr(w,_)),null!==A.attrs&&Ig(A,A.attrs,!1),null!==A.mergedAttrs&&Ig(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,f,c,0,s,a,l):f.data[_];Gr(A,!0);const S=A.mergedAttrs;null!==S&&ft(w,I,S);const P=A.classes;null!==P&&ug(w,I,P);const V=A.styles;return null!==V&&M0(w,I,V),64!=(64&A.flags)&&og(f,c,I,A),0===function ya(){return lt.lFrame.elementDepthCount}()&&xr(I,c),function ru(){lt.lFrame.elementDepthCount++}(),Wa(A)&&(af(f,c,A),gD(f,A,c)),null!==l&&Hl(c,A),Ql}function jg(){let i=fn();rl()?il():(i=i.parent,Gr(i,!1));const s=i;!function iu(){lt.lFrame.elementDepthCount--}();const a=Rt();return a.firstCreatePass&&(ss(a,i),Rc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function wh(i){return 0!=(16&i.flags)}(s)&&Bg(a,s,Ee(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Lp(i){return 0!=(32&i.flags)}(s)&&Bg(a,s,Ee(),s.stylesWithoutHost,!1),jg}function N_(i,s,a,l){return Ql(i,s,a,l),jg(),N_}function R_(i,s,a){const l=Ee(),c=Rt(),f=i+20,_=c.firstCreatePass?function QD(i,s,a,l,c){const f=s.consts,_=Hr(f,l),w=jl(s,i,8,"ng-container",_);return null!==_&&Ig(w,_,!0),e_(s,a,w,Hr(f,c)),null!==s.queries&&s.queries.elementStart(s,w),w}(f,c,l,s,a):c.data[f];Gr(_,!0);const w=l[f]=l[11].createComment("");return og(c,l,w,_),xr(w,l),Wa(_)&&(af(c,l,_),gD(c,_,l)),null!=a&&Hl(l,_),R_}function Pa(){let i=fn();const s=Rt();return rl()?il():(i=i.parent,Gr(i,!1)),s.firstCreatePass&&(ss(s,i),Rc(i)&&s.queries.elementEnd(i)),Pa}function $g(i,s,a){return R_(i,s,a),Pa(),$g}function Af(){return Ee()}function Hg(i){return!!i&&"function"==typeof i.then}function Md(i){return!!i&&"function"==typeof i.subscribe}const O_=Md;function Jr(i,s,a,l){const c=Ee(),f=Rt(),_=fn();return function xf(i,s,a,l,c,f,_,w){const I=Wa(l),S=i.firstCreatePass&&sw(i),P=s[8],V=c_(s);let W=!0;if(3&l.type||w){const Ue=pr(l,s),Qe=w?w(Ue):Ue,Ie=V.length,ot=w?Bt=>w(nn(Bt[l.index])):l.index;if(dn(a)){let Bt=null;if(!w&&I&&(Bt=function Sf(i,s,a,l){const c=i.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===a&&c[f+1]===l){const w=s[7],I=c[f+2];return w.length>I?w[I]:null}"string"==typeof _&&(f+=2)}return null}(i,s,c,l.index)),null!==Bt)(Bt.__ngLastListenerFn__||Bt).__ngNextListenerFn__=f,Bt.__ngLastListenerFn__=f,W=!1;else{f=Mf(l,s,P,f,!1);const cn=a.listen(Qe,c,f);V.push(f,cn),S&&S.push(c,ot,Ie,Ie+1)}}else f=Mf(l,s,P,f,!0),Qe.addEventListener(c,f,_),V.push(f),S&&S.push(c,ot,Ie,_)}else f=Mf(l,s,P,f,!1);const me=l.outputs;let Ne;if(W&&null!==me&&(Ne=me[c])){const Ue=Ne.length;if(Ue)for(let Qe=0;Qe<Ue;Qe+=2){const Zi=s[Ne[Qe]][Ne[Qe+1]].subscribe(f),Ac=V.length;V.push(f,Zi),S&&S.push(c,l.index,Ac,-(Ac+1))}}}(f,c,c[11],_,i,s,!!a,l),Jr}function P_(i,s,a,l){try{return!1!==a(l)}catch(c){return ow(i,c),!1}}function Mf(i,s,a,l,c){return function f(_){if(_===Function)return l;const w=2&i.flags?gr(i.index,s):s;0==(32&s[2])&&o_(w);let I=P_(s,0,l,_),A=f.__ngNextListenerFn__;for(;A;)I=P_(s,0,A,_)&&I,A=A.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function F_(i=1){return function Ps(i){return(lt.lFrame.contextLView=function dl(i,s){for(;i>0;)s=s[15],i--;return s}(i,lt.lFrame.contextLView))[8]}(i)}function Rf(i,s,a){return Nd(i,"",s,"",a),Rf}function Nd(i,s,a,l,c){const f=Ee(),_=Wl(f,s,a,l);return _!==Ct&&fs(Rt(),_n(),f,i,_,f[11],c,!1),Nd}function Od(i,s,a,l,c){const f=i[a+1],_=null===s;let w=l?qs(f):Ra(f),I=!1;for(;0!==w&&(!1===I||_);){const S=i[w+1];Fw(i[w],s)&&(I=!0,i[w+1]=l?Qh(S):lg(S)),w=l?qs(S):Ra(S)}I&&(i[a+1]=l?lg(f):Qh(f))}function Fw(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&$s(i,s)>=0}function Wg(i,s){return function Oi(i,s,a,l){const c=Ee(),f=Rt(),_=Di(2);f.firstUpdatePass&&function H_(i,s,a,l){const c=i.data;if(null===c[a+1]){const f=c[mr()],_=function Uw(i,s){return s>=i.expandoStartIndex}(i,a);(function Gw(i,s){return 0!=(i.flags&(s?16:32))})(f,l)&&null===s&&!_&&(s=!1),s=function nb(i,s,a,l){const c=function va(i){const s=lt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=Ws(a=ec(null,i,s,a,l),s.attrs,l),f=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=ec(c,i,s,a,l),null===f){let I=function rb(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Ra(l))return i[qs(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=ec(null,i,s,I[1],l),I=Ws(I,s.attrs,l),function ib(i,s,a,l){i[qs(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else f=function sb(i,s,a){let l;const c=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<c;f++)l=Ws(l,i[f].hostAttrs,a);return Ws(l,s.attrs,a)}(i,s,l)}return void 0!==f&&(l?s.residualClasses=f:s.residualStyles=f),a}(c,f,s,l),function Pw(i,s,a,l,c,f){let _=f?s.classBindings:s.styleBindings,w=qs(_),I=Ra(_);i[l]=a;let S,A=!1;if(Array.isArray(a)){const P=a;S=P[1],(null===S||$s(P,S)>0)&&(A=!0)}else S=a;if(c)if(0!==I){const V=qs(i[w+1]);i[l+1]=Bl(V,w),0!==V&&(i[V+1]=cg(i[V+1],l)),i[w+1]=function L0(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=Bl(w,0),0!==w&&(i[w+1]=cg(i[w+1],l)),w=l;else i[l+1]=Bl(I,0),0===w?w=l:i[I+1]=cg(i[I+1],l),I=l;A&&(i[l+1]=lg(i[l+1])),Od(i,S,l,!0),Od(i,S,l,!1),function XD(i,s,a,l,c){const f=c?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&$s(f,s)>=0&&(a[l+1]=Qh(a[l+1]))}(s,S,i,l,f),_=Bl(w,I),f?s.classBindings=_:s.styleBindings=_}(c,f,s,a,_,l)}}(f,i,_,l),s!==Ct&&Nr(c,_,s)&&function tc(i,s,a,l,c,f,_,w){if(!(3&s.type))return;const I=i.data,A=I[w+1];Kg(function zy(i){return 1==(1&i)}(A)?$w(I,s,a,c,Ra(A),_):void 0)||(Kg(f)||function qy(i){return 2==(2&i)}(A)&&(f=$w(I,null,a,c,w,_)),function tD(i,s,a,l,c){const f=dn(i);if(s)c?f?i.addClass(a,l):a.classList.add(l):f?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:re.DashCase;if(null==c)f?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const w="string"==typeof c&&c.endsWith("!important");w&&(c=c.slice(0,-10),_|=re.Important),f?i.setStyle(a,l,c,_):a.style.setProperty(l,c,w?"important":"")}}}(l,_,so(mr(),a),c,f))}(f,f.data[mr()],c,c[11],i,c[_+1]=function Hw(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ce(Hs(i)))),i}(s,a),l,_)}(i,s,null,!0),Wg}function ec(i,s,a,l,c){let f=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(f=s[w],l=Ws(l,f.hostAttrs,c),f!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function Ws(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let f=0;f<s.length;f++){const _=s[f];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Un(i,_,!!a||s[++f]))}return void 0===i?null:i}function $w(i,s,a,l,c,f){const _=null===s;let w;for(;c>0;){const I=i[c],A=Array.isArray(I),S=A?I[1]:I,P=null===S;let V=a[c+1];V===Ct&&(V=P?at:void 0);let W=P?bl(V,l):S===l?V:void 0;if(A&&!Kg(W)&&(W=bl(I,l)),Kg(W)&&(w=W,_))return w;const me=i[c+1];c=_?qs(me):Ra(me)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(w=bl(I,l))}return w}function Kg(i){return void 0!==i}function q_(i,s=""){const a=Ee(),l=Rt(),c=i+20,f=l.firstCreatePass?jl(l,c,1,s,null):l.data[c],_=a[c]=function fd(i,s){return dn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);og(l,a,_,f),Gr(f,!1)}function Yg(i){return Pd("",i,""),Yg}function Pd(i,s,a){const l=Ee(),c=Wl(l,i,s,a);return c!==Ct&&na(l,mr(),c),Pd}function Lf(i,s,a,l,c){const f=Ee(),_=Zl(f,i,s,a,l,c);return _!==Ct&&na(f,mr(),_),Lf}const nc=void 0;var Gf=["en",[["a","p"],["AM","PM"],nc],[["AM","PM"],nc,nc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],nc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],nc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",nc,"{1} 'at' {0}",nc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function tE(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let rc={};function qf(i){const s=function ic(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=zf(s);if(a)return a;const l=s.split("-")[0];if(a=zf(l),a)return a;if("en"===l)return Gf;throw new Error(`Missing locale data for the locale "${i}".`)}function J_(i){return qf(i)[gt.PluralCase]}function zf(i){return i in rc||(rc[i]=Pt.ng&&Pt.ng.common&&Pt.ng.common.locales&&Pt.ng.common.locales[i]),rc[i]}var gt=(()=>((gt=gt||{})[gt.LocaleId=0]="LocaleId",gt[gt.DayPeriodsFormat=1]="DayPeriodsFormat",gt[gt.DayPeriodsStandalone=2]="DayPeriodsStandalone",gt[gt.DaysFormat=3]="DaysFormat",gt[gt.DaysStandalone=4]="DaysStandalone",gt[gt.MonthsFormat=5]="MonthsFormat",gt[gt.MonthsStandalone=6]="MonthsStandalone",gt[gt.Eras=7]="Eras",gt[gt.FirstDayOfWeek=8]="FirstDayOfWeek",gt[gt.WeekendRange=9]="WeekendRange",gt[gt.DateFormat=10]="DateFormat",gt[gt.TimeFormat=11]="TimeFormat",gt[gt.DateTimeFormat=12]="DateTimeFormat",gt[gt.NumberSymbols=13]="NumberSymbols",gt[gt.NumberFormats=14]="NumberFormats",gt[gt.CurrencyCode=15]="CurrencyCode",gt[gt.CurrencySymbol=16]="CurrencySymbol",gt[gt.CurrencyName=17]="CurrencyName",gt[gt.Currencies=18]="Currencies",gt[gt.Directionality=19]="Directionality",gt[gt.PluralCase=20]="PluralCase",gt[gt.ExtraData=21]="ExtraData",gt))();const Wf="en-US";let oc=Wf;function am(i,s,a,l,c){if(i=Q(i),Array.isArray(i))for(let f=0;f<i.length;f++)am(i[f],s,a,l,c);else{const f=Rt(),_=Ee();let w=bd(i)?i:Q(i.provide),I=f_(i);const A=fn(),S=1048575&A.providerIndexes,P=A.directiveStart,V=A.providerIndexes>>20;if(bd(i)||!i.multi){const W=new jo(I,c,Cf),me=Pr(w,s,c?S:S+V,P);-1===me?(Ls(On(A,_),f,w),um(f,i,s.length),s.push(w),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(W),_.push(W)):(a[me]=W,_[me]=W)}else{const W=Pr(w,s,S+V,P),me=Pr(w,s,S,S+V),Ne=W>=0&&a[W],Ue=me>=0&&a[me];if(c&&!Ue||!c&&!Ne){Ls(On(A,_),f,w);const Qe=function ov(i,s,a,l,c){const f=new jo(i,a,Cf);return f.multi=[],f.index=s,f.componentProviders=0,sv(f,c,l&&!a),f}(c?Dn:vE,a.length,c,l,I);!c&&Ue&&(a[me].providerFactory=Qe),um(f,i,s.length,0),s.push(w),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Qe),_.push(Qe)}else um(f,i,W>-1?W:me,sv(a[c?me:W],I,!c&&l));!c&&l&&Ue&&a[me].componentProviders++}}}function um(i,s,a,l){const c=bd(s),f=function fw(i){return!!i.useClass}(s);if(c||f){const I=(f?Q(s.useClass):s).prototype.ngOnDestroy;if(I){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[l,I]):A[S+1].push(l,I)}else A.push(a,I)}}}function sv(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Pr(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function vE(i,s,a,l){return Hd(this.multi,[])}function Dn(i,s,a,l){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=Ci(a,a[1],this.providerFactory.index,l);f=w.slice(0,_),Hd(c,f);for(let I=_;I<w.length;I++)f.push(w[I])}else f=[],Hd(c,f);return f}function Hd(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function pc(i,s=[]){return a=>{a.providersResolver=(l,c)=>function Jf(i,s,a){const l=Rt();if(l.firstCreatePass){const c=Br(i);am(a,l.data,l.blueprint,c,!0),am(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class Gd{}class Ab{resolveComponentFactory(s){throw function wE(i){const s=Error(`No component factory found for ${ce(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let cm=(()=>{class i{}return i.NULL=new Ab,i})();function IE(){return Zs(fn(),Ee())}function Zs(i,s){return new Xf(pr(i,s))}let Xf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=IE,i})();function ep(i){return i instanceof Xf?i.nativeElement:i}class tp{}let ei=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function xb(){const i=Ee(),a=gr(fn().index,i);return function Sb(i){return i[11]}(Ei(a)?a:i)}(),i})(),Mb=(()=>{class i{}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:()=>null}),i})();class uv{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const DE=new uv("13.3.3"),lv={};function dm(i,s,a,l,c=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&l.push(nn(f)),si(f))for(let w=10;w<f.length;w++){const I=f[w],A=I[1].firstChild;null!==A&&dm(I[1],I,A,l)}const _=a.type;if(8&_)dm(i,s,a.child,l);else if(32&_){const w=Ke(a,s);let I;for(;I=w();)l.push(I)}else if(16&_){const w=T0(s,a);if(Array.isArray(w))l.push(...w);else{const I=In(s[16]);dm(I[1],I,w,l,!0)}}a=c?a.projectionNext:a.next}return l}class np{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return dm(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(si(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Ny(s,l),cs(a,l))}this._attachedToViewContainer=!1}Ry(this._lView[1],this._lView)}onDestroy(s){yg(this._lView[1],this._lView,null,s)}markForCheck(){o_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ff(this._lView[1],this._lView,this.context)}checkNoChanges(){!function u_(i,s,a){Os(!0);try{ff(i,s,a)}finally{Os(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Re(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ng(i,s){ag(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Re(902,"");this._appRef=s}}class Vu extends np{constructor(s){super(s),this._view=s}detectChanges(){nw(this._view)}checkNoChanges(){!function rw(i){Os(!0);try{nw(i)}finally{Os(!1)}}(this._view)}get context(){return null}}class gc extends cm{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Ut(s);return new So(a,this.ngModule)}}function bE(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class So extends Gd{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function P0(i){return i.map(k0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return bE(this.componentDef.inputs)}get outputs(){return bE(this.componentDef.outputs)}create(s,a,l,c){const f=(c=c||this.ngModule)?function TE(i,s){return{get:(a,l,c)=>{const f=i.get(a,lv,c);return f!==lv||l===lv?f:s.get(a,l,c)}}}(s,c.injector):s,_=f.get(tp,Vo),w=f.get(Mb,null),I=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=l?function Jy(i,s,a){if(dn(i))return i.selectRootElement(s,a===Vt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):gd(_.createRenderer(null,this.componentDef),A,function CE(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),P=this.componentDef.onPush?576:528,V=function gf(i,s){return{components:[],scheduler:i||Sy,clean:CD,playerHandler:s||null,flags:0}}(),W=Oa(0,null,null,1,0,null,null,null,null,null),me=sf(null,W,V,P,null,null,_,I,w,f);let Ne,Ue;oo(me);try{const Qe=function Tg(i,s,a,l,c,f){const _=a[1];a[20]=i;const I=jl(_,20,2,"#host",null),A=I.mergedAttrs=s.hostAttrs;null!==A&&(Ig(I,A,!0),null!==i&&(ft(c,i,A),null!==I.classes&&ug(c,i,I.classes),null!==I.styles&&M0(c,i,I.styles)));const S=l.createRenderer(i,s),P=sf(a,uf(s),null,s.onPush?64:16,a[20],I,l,S,f||null,null);return _.firstCreatePass&&(Ls(On(I,a),_,s.type),vD(_,I),J0(I,a.length,1)),hf(a,P),a[20]=P}(S,this.componentDef,me,_,I);if(S)if(l)ft(I,S,["ng-version",DE.full]);else{const{attrs:Ie,classes:ot}=function F0(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===c?""!==f&&s.push(f,i[++l]):8===c&&a.push(f);else{if(!zi(c))break;c=f}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ie&&ft(I,S,Ie),ot&&ot.length>0&&ug(I,S,ot.join(" "))}if(Ue=ma(W,20),void 0!==a){const Ie=Ue.projection=[];for(let ot=0;ot<this.ngContentSelectors.length;ot++){const Bt=a[ot];Ie.push(null!=Bt?Array.from(Bt):null)}}Ne=function It(i,s,a,l,c){const f=a[1],_=function yD(i,s,a){const l=fn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),n_(i,l,s,Su(i,s,1,null),a));const c=Ci(s,i,l.directiveStart,l);xr(c,s);const f=pr(l,s);return f&&xr(f,s),c}(f,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=fn();s.contentQueries(1,_,I.directiveStart)}const w=fn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Fs(w.index),Ed(a[1],w,0,w.directiveStart,w.directiveEnd,s),_D(s,_)),_}(Qe,this.componentDef,me,V,[m_]),of(W,me,null)}finally{uo()}return new hm(this.componentType,Ne,Zs(Ue,me),me,Ue)}}class hm extends class lm{}{constructor(s,a,l,c,f){super(),this.location=l,this._rootLView=c,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Vu(c),this.componentType=s}get injector(){return new Ti(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Uu{}class pm{}const Bu=new Map;class mm extends Uu{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new gc(this);const l=an(s);this._bootstrapComponents=p(l.bootstrap),this._r3Injector=cw(s,a,[{provide:Uu,useValue:this},{provide:cm,useValue:this.componentFactoryResolver}],ce(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=ra.THROW_IF_NOT_FOUND,l=st.Default){return s===ra||s===Uu||s===Dg?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class ym extends pm{constructor(s){super(),this.moduleType=s,null!==an(s)&&function SE(i){const s=new Set;!function a(l){const c=an(l,!0),f=c.id;null!==f&&(function gs(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ce(s)} vs ${ce(s.name)}`)}(f,Bu.get(f),l),Bu.set(f,l));const _=p(c.imports);for(const w of _)s.has(w)||(s.add(w),a(w))}(i)}(s)}create(s){return new mm(this.moduleType,s)}}function NE(i,s,a,l){return dv(Ee(),sr(),i,s,a,l)}function xo(i,s){const a=i[s];return a===Ct?void 0:a}function dv(i,s,a,l,c,f){const _=s+a;return Nr(i,_,c)?To(i,_+1,f?l.call(f,c):l(c)):xo(i,_+1)}function pv(i,s){const a=Rt();let l;const c=i+20;a.firstCreatePass?(l=function sp(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}}(s,a.pipeRegistry),a.data[c]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(c,l.onDestroy)):l=a.data[c];const f=l.factory||(l.factory=jr(l.type)),_=Ln(Cf);try{const w=ui(!1),I=f();return ui(w),function UD(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,Ee(),c,I),I}finally{Ln(_)}}function FE(i,s,a){const l=i+20,c=Ee(),f=Ii(c,l);return op(c,l)?dv(c,sr(),s,f.transform,a,f):f.transform(a)}function LE(i,s,a,l){const c=i+20,f=Ee(),_=Ii(f,c);return op(f,c)?function ju(i,s,a,l,c,f,_){const w=s+a;return Kn(i,w,c,f)?To(i,w+2,_?l.call(_,c,f):l(c,f)):xo(i,w+2)}(f,sr(),s,_.transform,a,l,_):_.transform(a,l)}function op(i,s){return i[1].data[s].pure}function mv(i){return s=>{setTimeout(i,void 0,s)}}const Mo=class gv extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,f,_;let w=s,I=a||(()=>null),A=l;if(s&&"object"==typeof s){const P=s;w=null===(c=P.next)||void 0===c?void 0:c.bind(P),I=null===(f=P.error)||void 0===f?void 0:f.bind(P),A=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(I=mv(I),w&&(w=mv(w)),A&&(A=mv(A)));const S=super.subscribe({next:w,error:I,complete:A});return s instanceof K.w0&&s.add(S),S}};function VE(){return this._results[ql()]()}class yc{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ql(),l=yc.prototype;l[a]||(l[a]=VE)}get changes(){return this._changes||(this._changes=new Mo)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=_r(s);(this._changesDetected=!function vl(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],f=s[l];if(a&&(c=a(c),f=a(f)),f!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let No=(()=>{class i{}return i.__NG_ELEMENT_ID__=jE,i})();const UE=No,BE=class extends UE{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=sf(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(a)),of(a,l,s),new np(l)}};function jE(){return $u(fn(),Ee())}function $u(i,s){return 4&i.type?new BE(s,i,Zs(i,s)):null}let zd=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ob,i})();function Ob(){return Ba(fn(),Ee())}const lr=zd,qt=class extends lr{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return Zs(this._hostTNode,this._hostLView)}get injector(){return new Ti(this._hostTNode,this._hostLView)}get parentInjector(){const s=li(this._hostTNode,this._hostLView);if(Wc(s)){const a=bi(s,this._hostLView),l=ln(s);return new Ti(a[1].data[l+8],a)}return new Ti(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=yv(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,f){const _=s&&!function Zo(i){return"function"==typeof i}(s);let w;if(_)w=a;else{const P=a||{};w=P.index,l=P.injector,c=P.projectableNodes,f=P.ngModuleRef}const I=_?s:new So(Ut(s)),A=l||this.parentInjector;if(!f&&null==I.ngModule){const V=(_?A:this.parentInjector).get(Uu,null);V&&(f=V)}const S=I.create(A,c,void 0,f);return this.insert(S.hostView,w),S}insert(s,a){const l=s._lView,c=l[1];if(function tu(i){return si(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const P=l[3],V=new qt(P,P[6],P[3]);V.detach(V.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function ig(i,s,a,l){const c=10+l,f=a.length;l>0&&(a[c-1][4]=s),l<f-10?(s[4]=a[c],wl(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function md(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=128}(c,l,_,f);const w=Ly(f,_),I=l[11],A=wo(I,_[7]);return null!==A&&function Yh(i,s,a,l,c,f){l[0]=c,l[6]=s,ag(i,l,a,1,c,f)}(c,_[6],I,l,A,w),s.attachToViewContainerRef(),wl(Em(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=yv(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Ny(this._lContainer,a);l&&(cs(Em(this._lContainer),a),Ry(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Ny(this._lContainer,a);return l&&null!=cs(Em(this._lContainer),a)?new np(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function yv(i){return i[8]}function Em(i){return i[8]||(i[8]=[])}function Ba(i,s){let a;const l=s[i.index];if(si(l))a=l;else{let c;if(8&i.type)c=nn(l);else{const f=s[11];c=f.createComment("");const _=pr(i,s);hs(f,wo(f,_),c,function eD(i,s){return dn(i)?i.nextSibling(s):s.nextSibling}(f,_),!1)}s[i.index]=a=i_(l,s,c,i),hf(s,a)}return new qt(a,i,s)}class pn{constructor(s){this.queryList=s,this.matches=null}clone(){return new pn(this.queryList)}setDirty(){this.queryList.setDirty()}}class Dm{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let f=0;f<l;f++){const _=a.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new Dm(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==qE(s,a).matches&&this.queries[a].setDirty()}}class _c{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class _v{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(s,c);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new _v(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Wi{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Wi(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const f=l[c];this.matchTNodeWithReadOption(s,a,kb(a,f)),this.matchTNodeWithReadOption(s,a,Go(a,s,f,!1,!1))}else l===No?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Go(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Xf||c===zd||c===No&&4&a.type)this.addMatch(a.index,-2);else{const f=Go(a,s,c,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function kb(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function ap(i,s,a,l){return-1===a?function vv(i,s){return 11&i.type?Zs(i,s):4&i.type?$u(i,s):null}(s,i):-2===a?function Pb(i,s,a){return a===Xf?Zs(s,i):a===No?$u(s,i):a===zd?Ba(s,i):void 0}(i,s,l):Ci(i,i[1],a,s)}function $E(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const f=i.data,_=a.matches,w=[];for(let I=0;I<_.length;I+=2){const A=_[I];w.push(A<0?null:ap(s,f[A],_[I+1],a.metadata.read))}c.matches=w}return c.matches}function rn(i,s,a,l){const c=i.queries.getByIndex(a),f=c.matches;if(null!==f){const _=$E(i,s,c,a);for(let w=0;w<f.length;w+=2){const I=f[w];if(I>0)l.push(_[w/2]);else{const A=f[w+1],S=s[-I];for(let P=10;P<S.length;P++){const V=S[P];V[17]===V[3]&&rn(V[1],V,A,l)}if(null!==S[9]){const P=S[9];for(let V=0;V<P.length;V++){const W=P[V];rn(W[1],W,A,l)}}}}}return l}function HE(i){const s=Ee(),a=Rt(),l=ul();ll(l+1);const c=qE(a,l);if(i.dirty&&Ms(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const f=c.crossesNgTemplate?rn(a,s,l,[]):$E(a,s,c,l);i.reset(f,ep),i.notifyOnChanges()}return!0}return!1}function Wd(i,s,a,l){const c=Rt();if(c.firstCreatePass){const f=fn();(function Ev(i,s,a){null===i.queries&&(i.queries=new _v),i.queries.track(new Wi(s,a))})(c,new _c(s,a,l),f.index),function GE(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function wv(i,s,a){const l=new yc(4==(4&a));yg(i,s,l,l.destroy),null===s[19]&&(s[19]=new Dm),s[19].queries.push(new pn(l))}(c,Ee(),a)}function Zd(){return function Cm(i,s){return i[19].queries[s].queryList}(Ee(),ul())}function qE(i,s){return i.queries.getByIndex(s)}function Iv(i,s){return $u(i,s)}function Mm(...i){}const nI=new wn("Application Initializer");let Sv=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Mm,this.reject=Mm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(Hg(f))a.push(f);else if(O_(f)){const _=new Promise((w,I)=>{f.subscribe({complete:w,error:I})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Ze(nI,8))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const xv=new wn("AppId",{providedIn:"root",factory:function rI(){return`${Mv()}${Mv()}${Mv()}`}});function Mv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Nv=new wn("Platform Initializer"),iI=new wn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),de=new wn("appBootstrapListener");let Ro=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const wc=new wn("LocaleId",{providedIn:"root",factory:()=>At(wc,st.Optional|st.SkipSelf)||function zb(){return"undefined"!=typeof $localize&&$localize.locale||Wf}()}),Ec=new wn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ov{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let sI=(()=>{class i{compileModuleSync(a){return new ym(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=p(an(a).declarations).reduce((_,w)=>{const I=Ut(w);return I&&_.push(new So(I)),_},[]);return new Ov(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const kv=(()=>Promise.resolve(0))();function hp(i){"undefined"==typeof Zone?kv.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ys{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mo(!1),this.onMicrotaskEmpty=new Mo(!1),this.onStable=new Mo(!1),this.onError=new Mo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Hu(){let i=Pt.requestAnimationFrame,s=Pt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Ic(i){const s=()=>{!function Rm(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Pt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,ja(i),i.isCheckStableRunning=!0,Nm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),ja(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,f,_,w)=>{try{return Dc(i),a.invokeTask(c,f,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),nh(i)}},onInvoke:(a,l,c,f,_,w,I)=>{try{return Dc(i),a.invoke(c,f,_,w,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),nh(i)}},onHasTask:(a,l,c,f)=>{a.hasTask(c,f),l===c&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,ja(i),Nm(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,c,f)=>(a.handleError(c,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ys.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ys.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,s,Zb,Mm,Mm);try{return f.runTask(_,a,l)}finally{f.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const Zb={};function Nm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function ja(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Dc(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function nh(i){i._nesting--,Nm(i)}class aI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mo,this.onMicrotaskEmpty=new Mo,this.onStable=new Mo,this.onError=new Mo}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let Om=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ys.assertNotInAngularZone(),hp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hp(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Ze(Ys))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})(),Pv=(()=>{class i{constructor(){this._applications=new Map,km.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return km.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class uI{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function Kb(i){km=i}let Qs,km=new uI;const lI=new wn("AllowMultipleToken");class cI{constructor(s,a){this.name=s,this.token=a}}function dI(i,s,a=[]){const l=`Platform: ${s}`,c=new wn(l);return(f=[])=>{let _=$a();if(!_||_.injector.get(lI,!1))if(i)i(a.concat(f).concat({provide:c,useValue:!0}));else{const w=a.concat(f).concat({provide:c,useValue:!0},{provide:bg,useValue:"platform"});!function Yb(i){if(Qs&&!Qs.destroyed&&!Qs.injector.get(lI,!1))throw new Re(400,"");Qs=i.get(bc);const s=i.get(Nv,null);s&&s.forEach(a=>a())}(ra.create({providers:w,name:l}))}return function Qb(i){const s=$a();if(!s)throw new Re(401,"");return s}()}}function $a(){return Qs&&!Qs.destroyed?Qs:null}let bc=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function hI(i,s){let a;return a="noop"===i?new aI:("zone.js"===i?void 0:i)||new Ys({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:Ys,useValue:w}];return w.run(()=>{const A=ra.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(A),P=S.injector.get(wr,null);if(!P)throw new Re(402,"");return w.runOutsideAngular(()=>{const V=w.onError.subscribe({next:W=>{P.handleError(W)}});S.onDestroy(()=>{ih(this._modules,S),V.unsubscribe()})}),function Jb(i,s,a){try{const l=a();return Hg(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(P,w,()=>{const V=S.injector.get(Sv);return V.runInitializers(),V.donePromise.then(()=>(function pb(i){it(i,"Expected localeId to be defined"),"string"==typeof i&&(oc=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(wc,Wf)||Wf),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const c=fI({},l);return function Fv(i,s,a){const l=new ym(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(a){const l=a.injector.get(fp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Re(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Ze(ra))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function fI(i,s){return Array.isArray(s)?s.reduce(fI,i):Object.assign(Object.assign({},i),s)}let fp=(()=>{class i{constructor(a,l,c,f){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),w=new O.y(I=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Ys.assertNotInAngularZone(),hp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Ys.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{A.unsubscribe(),S.unsubscribe()}});this.isStable=(0,oe.T)(_,w.pipe((0,J.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Re(405,"");let c;c=a instanceof Gd?a:this._injector.get(cm).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const f=function rh(i){return i.isBoundToModule}(c)?void 0:this._injector.get(Uu),w=c.create(ra.NULL,[],l||c.selector,f),I=w.location.nativeElement,A=w.injector.get(Om,null),S=A&&w.injector.get(Pv);return A&&S&&S.registerApplication(I,A),w.onDestroy(()=>{this.detachView(w.hostView),ih(this.components,w),S&&S.unregisterApplication(I)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Re(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;ih(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(de,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Ze(Ys),Ze(ra),Ze(wr),Ze(Sv))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function ih(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let sh=!0,pp=!1;function Fm(){return pp=!0,sh}function mI(){if(pp)throw new Error("Cannot enable prod mode after platform setup.");sh=!1}let Vv=(()=>{class i{}return i.__NG_ELEMENT_ID__=yI,i})();function yI(i){return function Gu(i,s,a){if(Cs(i)&&!a){const l=gr(i.index,s);return new np(l,l)}return 47&i.type?new np(s[16],s):null}(fn(),Ee(),16==(16&i))}class Gv{constructor(){}supports(s){return yf(s)}create(s){return new wI(s)}}const rC=(i,s)=>s;class wI{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||rC}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,f=null;for(;a||l;){const _=!l||a&&a.currentIndex<_p(l,c,f)?a:l,w=_p(_,c,f),I=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{f||(f=[]);const A=w-c,S=I-c;if(A!=S){for(let V=0;V<A;V++){const W=V<f.length?f[V]:f[V]=0,me=W+V;S<=me&&me<A&&(f[V]=W+1)}f[_.previousIndex]=S-A}}w!==I&&s(_,w,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!yf(s))throw new Re(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,f,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)f=s[w],_=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,f,_,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,w),l=!0),a=a._next}else c=0,function __(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[ql()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{_=this._trackByFn(c,w),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,w,_,c)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,c)):s=this._addAfter(new qv(a,l),f,c),s}_verifyReinsertion(s,a,l,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?s=this._reinsertAfter(f,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,f=s._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new uh),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uh),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class qv{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class zv{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class uh{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new zv,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _p(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class jm{constructor(){}supports(s){return s instanceof Map||Cd(s)}create(){return new iC}}class iC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Cd(s)))throw new Re(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const l=new Wv(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class Wv{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Zv(){return new Kv([new Gv])}let Kv=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Zv()),deps:[[i,new go,new hi]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Re(901,"")}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:Zv}),i})();function Yv(){return new vp([new jm])}let vp=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Yv()),deps:[[i,new go,new hi]]}}find(a){const l=this.factories.find(f=>f.supports(a));if(l)return l;throw new Re(901,"")}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:Yv}),i})();const uC=dI(null,"core",[]);let lh=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Ze(fp))},i.\u0275mod=Y({type:i}),i.\u0275inj=Zt({}),i})()},3942:(rt,Ce,k)=>{k.d(Ce,{Z:()=>Re});var g=k(2090),K=k(4859),O=k(9681),oe=k(1877);class J{constructor(he,we){this._delegate=he,this.firebase=we,(0,O._addComponent)(he,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(he,we=O._DEFAULT_ENTRY_NAME){var Je;this._delegate.checkDestroyed();const qe=this._delegate.container.getProvider(he);return!qe.isInitialized()&&"EXPLICIT"===(null===(Je=qe.getComponent())||void 0===Je?void 0:Je.instantiationMode)&&qe.initialize(),qe.getImmediate({identifier:we})}_removeServiceInstance(he,we=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(we)}_addComponent(he){(0,O._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,O._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ue(){const Pe=function ce(Pe){const he={},we={__esModule:!0,initializeApp:function De(je,ee={}){const q=O.initializeApp(je,ee);if((0,g.r3)(he,q.name))return he[q.name];const te=new Pe(q,we);return he[q.name]=te,te},app:qe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ve(je){const ee=je.name,q=ee.replace("-compat","");if(O._registerComponent(je)&&"PUBLIC"===je.type){const te=(ge=qe())=>{if("function"!=typeof ge[q])throw ie.create("invalid-app-argument",{appName:ee});return ge[q]()};void 0!==je.serviceProps&&(0,g.ZB)(te,je.serviceProps),we[q]=te,Pe.prototype[q]=function(...ge){return this._getService.bind(this,ee).apply(this,je.multipleInstances?ge:[])}}return"PUBLIC"===je.type?we[q]:null},removeApp:function Je(je){delete he[je]},useAsService:function $e(je,ee){return"serverAuth"===ee?null:ee},modularAPIs:O}};function qe(je){if(!(0,g.r3)(he,je=je||O._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:je});return he[je]}return we.default=we,Object.defineProperty(we,"apps",{get:function _e(){return Object.keys(he).map(je=>he[je])}}),qe.App=Pe,we}(J);return Pe.INTERNAL=Object.assign(Object.assign({},Pe.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function he(we){(0,g.ZB)(Pe,we)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Pe}(),j=new oe.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Pe=self.firebase.SDK_VERSION;Pe&&Pe.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Re=B;!function Te(Pe){(0,O.registerVersion)("@firebase/app-compat","0.1.21",Pe)}()},9681:(rt,Ce,k)=>{k.r(Ce),k.d(Ce,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>br,_DEFAULT_ENTRY_NAME:()=>bn,_addComponent:()=>on,_addOrOverwriteComponent:()=>wi,_apps:()=>dt,_clearComponents:()=>Lt,_components:()=>sn,_getProvider:()=>Yi,_registerComponent:()=>Xt,_removeServiceInstance:()=>Zt,deleteApp:()=>Ji,getApp:()=>Cr,getApps:()=>Qi,initializeApp:()=>Pi,onLog:()=>Gn,registerVersion:()=>Vr,setLogLevel:()=>Ln});var g=k(5861),K=k(4859),O=k(1877),oe=k(2090);class J{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(We=>{if(function pe(ze){const be=ze.getComponent();return"VERSION"===(null==be?void 0:be.type)}(We)){const ut=We.getImmediate();return`${ut.library}/${ut.version}`}return null}).filter(We=>We).join(" ")}}const ie="@firebase/app",ue=new O.Yd("@firebase/app"),bn="[DEFAULT]",it={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dt=new Map,sn=new Map;function on(ze,be){try{ze.container.addComponent(be)}catch(We){ue.debug(`Component ${be.name} failed to register with FirebaseApp ${ze.name}`,We)}}function wi(ze,be){ze.container.addOrOverwriteComponent(be)}function Xt(ze){const be=ze.name;if(sn.has(be))return ue.debug(`There were multiple attempts to register component ${be}.`),!1;sn.set(be,ze);for(const We of dt.values())on(We,ze);return!0}function Yi(ze,be){const We=ze.container.getProvider("heartbeat").getImmediate({optional:!0});return We&&We.triggerHeartbeat(),ze.container.getProvider(be)}function Zt(ze,be,We=bn){Yi(ze,be).clearInstance(We)}function Lt(){sn.clear()}const ni=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ws{constructor(be,We,ut){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},We),this._name=We.name,this._automaticDataCollectionEnabled=We.automaticDataCollectionEnabled,this._container=ut,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw ni.create("app-deleted",{appName:this._name})}}const br="9.6.10";function Pi(ze,be={}){"object"!=typeof be&&(be={name:be});const We=Object.assign({name:bn,automaticDataCollectionEnabled:!1},be),ut=We.name;if("string"!=typeof ut||!ut)throw ni.create("bad-app-name",{appName:String(ut)});const kt=dt.get(ut);if(kt){if((0,oe.vZ)(ze,kt.options)&&(0,oe.vZ)(We,kt.config))return kt;throw ni.create("duplicate-app",{appName:ut})}const Nt=new K.H0(ut);for(const L of sn.values())Nt.addComponent(L);const U=new ws(ze,We,Nt);return dt.set(ut,U),U}function Cr(ze=bn){const be=dt.get(ze);if(!be)throw ni.create("no-app",{appName:ze});return be}function Qi(){return Array.from(dt.values())}function Ji(ze){return st.apply(this,arguments)}function st(){return(st=(0,g.Z)(function*(ze){const be=ze.name;dt.has(be)&&(dt.delete(be),yield Promise.all(ze.container.getProviders().map(We=>We.delete())),ze.isDeleted=!0)})).apply(this,arguments)}function Vr(ze,be,We){var ut;let kt=null!==(ut=it[ze])&&void 0!==ut?ut:ze;We&&(kt+=`-${We}`);const Nt=kt.match(/\s|\//),U=be.match(/\s|\//);if(Nt||U){const L=[`Unable to register library "${kt}" with version "${be}":`];return Nt&&L.push(`library name "${kt}" contains illegal characters (whitespace or "/")`),Nt&&U&&L.push("and"),U&&L.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void ue.warn(L.join(" "))}Xt(new K.wA(`${kt}-version`,()=>({library:kt,version:be}),"VERSION"))}function Gn(ze,be){if(null!==ze&&"function"!=typeof ze)throw ni.create("invalid-log-argument");(0,O.Am)(ze,be)}function Ln(ze){(0,O.Ub)(ze)}const hn="firebase-heartbeat-store";let qn=null;function Es(){return qn||(qn=(0,oe.X3)("firebase-heartbeat-database",1,(ze,be)=>{0===be&&ze.createObjectStore(hn)}).catch(ze=>{throw ni.create("storage-open",{originalErrorMessage:ze.message})})),qn}function Vt(){return(Vt=(0,g.Z)(function*(ze){try{return(yield Es()).transaction(hn).objectStore(hn).get(tr(ze))}catch(be){throw ni.create("storage-get",{originalErrorMessage:be.message})}})).apply(this,arguments)}function et(ze,be){return mt.apply(this,arguments)}function mt(){return(mt=(0,g.Z)(function*(ze,be){try{const ut=(yield Es()).transaction(hn,"readwrite");return yield ut.objectStore(hn).put(be,tr(ze)),ut.complete}catch(We){throw ni.create("storage-set",{originalErrorMessage:We.message})}})).apply(this,arguments)}function tr(ze){return`${ze.name}!${ze.options.appId}`}class Xs{constructor(be){this.container=be,this._heartbeatsCache=null;const We=this.container.getProvider("app").getImmediate();this._storage=new at(We),this._heartbeatsCachePromise=this._storage.read().then(ut=>(this._heartbeatsCache=ut,ut))}triggerHeartbeat(){var be=this;return(0,g.Z)(function*(){const ut=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kt=dr();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==kt&&!be._heartbeatsCache.heartbeats.some(Nt=>Nt.date===kt))return be._heartbeatsCache.heartbeats.push({date:kt,agent:ut}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(Nt=>{const U=new Date(Nt.date).valueOf();return Date.now()-U<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,g.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const We=dr(),{heartbeatsToSend:ut,unsentEntries:kt}=function nr(ze,be=1024){const We=[];let ut=ze.slice();for(const kt of ze){const Nt=We.find(U=>U.agent===kt.agent);if(Nt){if(Nt.dates.push(kt.date),hr(We)>be){Nt.dates.pop();break}}else if(We.push({agent:kt.agent,dates:[kt.date]}),hr(We)>be){We.pop();break}ut=ut.slice(1)}return{heartbeatsToSend:We,unsentEntries:ut}}(be._heartbeatsCache.heartbeats),Nt=(0,oe.L)(JSON.stringify({version:2,heartbeats:ut}));return be._heartbeatsCache.lastSentHeartbeatDate=We,kt.length>0?(be._heartbeatsCache.heartbeats=kt,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),Nt})()}}function dr(){return(new Date).toISOString().substring(0,10)}class at{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,g.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function ca(ze){return Vt.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var We=this;return(0,g.Z)(function*(){var ut;if(yield We._canUseIndexedDBPromise){const Nt=yield We.read();return et(We.app,{lastSentHeartbeatDate:null!==(ut=be.lastSentHeartbeatDate)&&void 0!==ut?ut:Nt.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var We=this;return(0,g.Z)(function*(){var ut;if(yield We._canUseIndexedDBPromise){const Nt=yield We.read();return et(We.app,{lastSentHeartbeatDate:null!==(ut=be.lastSentHeartbeatDate)&&void 0!==ut?ut:Nt.lastSentHeartbeatDate,heartbeats:[...Nt.heartbeats,...be.heartbeats]})}})()}}function hr(ze){return(0,oe.L)(JSON.stringify({version:2,heartbeats:ze})).length}!function Ot(ze){Xt(new K.wA("platform-logger",be=>new J(be),"PRIVATE")),Xt(new K.wA("heartbeat",be=>new Xs(be),"PRIVATE")),Vr(ie,"0.7.20",ze),Vr(ie,"0.7.20","esm2017"),Vr("fire-js","")}("")},4859:(rt,Ce,k)=>{k.d(Ce,{H0:()=>ce,wA:()=>O});var g=k(5861),K=k(2090);class O{constructor(B,j,Q){this.name=B,this.instanceFactory=j,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const oe="[DEFAULT]";class J{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const Q=new K.BH;if(this.instancesDeferred.set(j,Q),this.isInitialized(j)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:j});He&&Q.resolve(He)}catch(He){}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const Q=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),He=null!==(j=null==B?void 0:B.optional)&&void 0!==j&&j;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Te){if(He)return null;throw Te}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function ie(ue){return"EAGER"===ue.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(j){}for(const[j,Q]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(j);try{const Te=this.getOrInitializeService({instanceIdentifier:He});Q.resolve(Te)}catch(Te){}}}}clearInstance(B=oe){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,g.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...j.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=oe){return this.instances.has(B)}getOptions(B=oe){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,Q=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:Q,options:j});for(const[Te,Re]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Te)&&Re.resolve(He);return He}onInit(B,j){var Q;const He=this.normalizeInstanceIdentifier(j),Te=null!==(Q=this.onInitCallbacks.get(He))&&void 0!==Q?Q:new Set;Te.add(B),this.onInitCallbacks.set(He,Te);const Re=this.instances.get(He);return Re&&B(Re,He),()=>{Te.delete(B)}}invokeOnInitCallbacks(B,j){const Q=this.onInitCallbacks.get(j);if(Q)for(const He of Q)try{He(B,j)}catch(Te){}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let Q=this.instances.get(B);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=B,ue===oe?void 0:ue),options:j}),this.instances.set(B,Q),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(Q,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Q)}catch(He){}var ue;return Q||null}normalizeInstanceIdentifier(B=oe){return this.component?this.component.multipleInstances?B:oe:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new J(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(rt,Ce,k)=>{k.d(Ce,{Am:()=>ue,Ub:()=>ce,Yd:()=>ie,in:()=>K});const g=[];var K=(()=>{return(B=K||(K={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",K;var B})();const O={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},oe=K.INFO,J={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},pe=(B,j,...Q)=>{if(j<B.logLevel)return;const He=(new Date).toISOString(),Te=J[j];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Te](`[${He}]  ${B.name}:`,...Q)};class ie{constructor(j){this.name=j,this._logLevel=oe,this._logHandler=pe,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in K))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...j),this._logHandler(this,K.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...j),this._logHandler(this,K.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,K.INFO,...j),this._logHandler(this,K.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,K.WARN,...j),this._logHandler(this,K.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...j),this._logHandler(this,K.ERROR,...j)}}function ce(B){g.forEach(j=>{j.setLogLevel(B)})}function ue(B,j){for(const Q of g){let He=null;j&&j.level&&(He=O[j.level]),Q.userLogHandler=null===B?null:(Te,Re,...Pe)=>{const he=Pe.map(we=>{if(null==we)return null;if("string"==typeof we)return we;if("number"==typeof we||"boolean"==typeof we)return we.toString();if(we instanceof Error)return we.message;try{return JSON.stringify(we)}catch(Je){return null}}).filter(we=>we).join(" ");Re>=(null!=He?He:Te.logLevel)&&B({level:K[Re].toLowerCase(),message:he,args:Pe,type:Te.name})}}}},5861:(rt,Ce,k)=>{function g(O,oe,J,pe,ie,ce,ue){try{var B=O[ce](ue),j=B.value}catch(Q){return void J(Q)}B.done?oe(j):Promise.resolve(j).then(pe,ie)}function K(O){return function(){var oe=this,J=arguments;return new Promise(function(pe,ie){var ce=O.apply(oe,J);function ue(j){g(ce,pe,ie,ue,B,"next",j)}function B(j){g(ce,pe,ie,ue,B,"throw",j)}ue(void 0)})}}k.d(Ce,{Z:()=>K})}},rt=>{rt(rt.s=3673)}]);